<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ğŸŒ¸æ¨±èŠ±é…’å§ğŸ»</title>
  
  <subtitle>ğŸŒ¸Sakura-PubğŸ»</subtitle>
  <link href="http://sakura-pub.ltd/atom.xml" rel="self"/>
  
  <link href="http://sakura-pub.ltd/"/>
  <updated>2021-08-15T15:52:19.237Z</updated>
  <id>http://sakura-pub.ltd/</id>
  
  <author>
    <name>Sakura.</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>LeetCodeå‘¨èµ›254åœº</title>
    <link href="http://sakura-pub.ltd/LeetCode/%E5%91%A8%E8%B5%9B%E7%AC%94%E8%AE%B0/LeetCode%E5%91%A8%E8%B5%9B254%E5%9C%BA/"/>
    <id>http://sakura-pub.ltd/LeetCode/%E5%91%A8%E8%B5%9B%E7%AC%94%E8%AE%B0/LeetCode%E5%91%A8%E8%B5%9B254%E5%9C%BA/</id>
    <published>2021-08-15T15:51:40.000Z</published>
    <updated>2021-08-15T15:52:19.237Z</updated>
    
    <content type="html"><![CDATA[<h1 id="LeetCodeå‘¨èµ›ç¬¬254åœº"><a href="#LeetCodeå‘¨èµ›ç¬¬254åœº" class="headerlink" title="LeetCodeå‘¨èµ›ç¬¬254åœº"></a>LeetCodeå‘¨èµ›ç¬¬254åœº</h1><p>è¿™åœºå‘¨èµ›å†æ¬¡ç»™è™æƒ¨äº†ï¼Œåšåˆ°ç¬¬äºŒé¢˜å°±å¡ä½äº†æ²¡æœ‰æ€è·¯ï¼Œäº‰å–ä¸‹æ¬¡å‘¨èµ›å¯ä»¥åšåˆ°ç¬¬ä¸‰é¢˜<img src="https://i0.hdslb.com/bfs/emote/f2b3aee7e521de7799d4e3aa379b01be032698ac.png@112w_112h.webp" alt="[è·ªäº†]"></p><h2 id="5843-ä½œä¸ºå­å­—ç¬¦ä¸²å‡ºç°åœ¨å•è¯ä¸­çš„å­—ç¬¦ä¸²æ•°ç›®-â€”ï¼ˆç®€å•ï¼‰"><a href="#5843-ä½œä¸ºå­å­—ç¬¦ä¸²å‡ºç°åœ¨å•è¯ä¸­çš„å­—ç¬¦ä¸²æ•°ç›®-â€”ï¼ˆç®€å•ï¼‰" class="headerlink" title="5843. ä½œä¸ºå­å­—ç¬¦ä¸²å‡ºç°åœ¨å•è¯ä¸­çš„å­—ç¬¦ä¸²æ•°ç›®  â€”ï¼ˆç®€å•ï¼‰"></a><a href="https://leetcode-cn.com/problems/number-of-strings-that-appear-as-substrings-in-word/">5843. ä½œä¸ºå­å­—ç¬¦ä¸²å‡ºç°åœ¨å•è¯ä¸­çš„å­—ç¬¦ä¸²æ•°ç›®</a>  â€”ï¼ˆç®€å•ï¼‰</h2><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ patterns å’Œä¸€ä¸ªå­—ç¬¦ä¸² word ï¼Œç»Ÿè®¡ patterns ä¸­æœ‰å¤šå°‘ä¸ªå­—ç¬¦ä¸²æ˜¯ word çš„å­å­—ç¬¦ä¸²ã€‚è¿”å›å­—ç¬¦ä¸²æ•°ç›®ã€‚</p><p><strong>å­å­—ç¬¦ä¸²</strong> æ˜¯å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªè¿ç»­å­—ç¬¦åºåˆ—ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><blockquote><p>è¾“å…¥ï¼špatterns = [â€œaâ€,â€abcâ€,â€bcâ€,â€dâ€], word = â€œabcâ€<br>è¾“å‡ºï¼š3<br>è§£é‡Šï¼š</p><ul><li>â€œaâ€ æ˜¯ â€œabcâ€ çš„å­å­—ç¬¦ä¸²ã€‚</li><li>â€œabcâ€ æ˜¯ â€œabcâ€ çš„å­å­—ç¬¦ä¸²ã€‚</li><li>â€œbcâ€ æ˜¯ â€œabcâ€ çš„å­å­—ç¬¦ä¸²ã€‚</li><li>â€œdâ€ ä¸æ˜¯ â€œabcâ€ çš„å­å­—ç¬¦ä¸²ã€‚</li></ul><p>patterns ä¸­æœ‰ 3 ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå­å­—ç¬¦ä¸²å‡ºç°åœ¨ word ä¸­ã€‚</p></blockquote><p>ç¤ºä¾‹ 2ï¼š</p><blockquote><p>è¾“å…¥ï¼špatterns = [â€œaâ€,â€bâ€,â€câ€], word = â€œaaaaabbbbbâ€<br>è¾“å‡ºï¼š2<br>è§£é‡Šï¼š</p><ul><li>â€œaâ€ æ˜¯ â€œaaaaabbbbbâ€ çš„å­å­—ç¬¦ä¸²ã€‚</li><li>â€œbâ€ æ˜¯ â€œaaaaabbbbbâ€ çš„å­å­—ç¬¦ä¸²ã€‚</li><li>â€œcâ€ ä¸æ˜¯ â€œaaaaabbbbbâ€ çš„å­—ç¬¦ä¸²ã€‚</li></ul><p>patterns ä¸­æœ‰ 2 ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå­å­—ç¬¦ä¸²å‡ºç°åœ¨ word ä¸­ã€‚</p></blockquote><p>ç¤ºä¾‹ 3ï¼š</p><blockquote><p>è¾“å…¥ï¼špatterns = [â€œaâ€,â€aâ€,â€aâ€], word = â€œabâ€<br>è¾“å‡ºï¼š3<br>è§£é‡Šï¼špatterns ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²éƒ½ä½œä¸ºå­å­—ç¬¦ä¸²å‡ºç°åœ¨ word â€œabâ€ ä¸­ã€‚</p></blockquote><p>æç¤ºï¼š</p><ul><li>1 &lt;= patterns.length &lt;= 100</li><li>1 &lt;= patterns[i].length &lt;= 100</li><li>1 &lt;= word.length &lt;= 100</li><li>patterns[i] å’Œ word ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</li></ul><p>é¢˜ç›®åˆšå¼€å§‹åšçš„æ—¶å€™è„‘å­æ²¡è½¬è¿‡æ¥ï¼Œå¤©çœŸåœ°æƒ³è‡ªå·±å®ç°å¦‚ä½•æŸ¥æ‰¾å­å­—ç¬¦ä¸²ï¼Œåˆ°åé¢é†’æ‚Ÿæ‰æƒ³èµ·å¯ä»¥ç”¨åº“å‡½æ•°ï¼Œç›´æ¥æäº¤ä¸‹ä¸€é¢˜ï¼ˆæäº¤æ—¶è¿˜é”™äº†ä¸€æ¬¡ï¼Œå“­ï¼‰</p><p>æ³¨æ„è¿™é‡Œ<code>string::find()</code>å¯ä»¥ç”¨æ¥æŸ¥æ‰¾å­å­—ç¬¦ä¸²ï¼Œå¦‚æœæ‰¾åˆ°äº†åˆ™ä¼šè¿”å›å­ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ä¸‹æ ‡åºå·ï¼Œæ‰¾ä¸åˆ°åˆ™ä¼šè¿”å›<code>string::npos</code>è¯¥å®šå€¼ä¸º<code>string::size_type</code>ç±»å‹ï¼Œå³<code>size_t==usigned int</code></p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">numOfStrings</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token operator">&amp;</span> patterns<span class="token punctuation">,</span> string word<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> res<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>                <span class="token keyword">for</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> str<span class="token operator">:</span>patterns<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            string<span class="token operator">::</span>size_type pos<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pos<span class="token operator">=</span>word<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span>pos<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span>string<span class="token operator">::</span>npos<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token operator">++</span>res<span class="token punctuation">;</span>                <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="5832-æ„é€ å…ƒç´ ä¸ç­‰äºä¸¤ç›¸é‚»å…ƒç´ å¹³å‡å€¼çš„æ•°ç»„-â€”ï¼ˆä¸­ç­‰ï¼‰"><a href="#5832-æ„é€ å…ƒç´ ä¸ç­‰äºä¸¤ç›¸é‚»å…ƒç´ å¹³å‡å€¼çš„æ•°ç»„-â€”ï¼ˆä¸­ç­‰ï¼‰" class="headerlink" title="5832. æ„é€ å…ƒç´ ä¸ç­‰äºä¸¤ç›¸é‚»å…ƒç´ å¹³å‡å€¼çš„æ•°ç»„  â€”ï¼ˆä¸­ç­‰ï¼‰"></a><a href="https://leetcode-cn.com/problems/array-with-elements-not-equal-to-average-of-neighbors/">5832. æ„é€ å…ƒç´ ä¸ç­‰äºä¸¤ç›¸é‚»å…ƒç´ å¹³å‡å€¼çš„æ•°ç»„</a>  â€”ï¼ˆä¸­ç­‰ï¼‰</h2><p>ç»™ä½ ä¸€ä¸ª ä¸‹æ ‡ä» 0 å¼€å§‹ çš„æ•°ç»„ nums ï¼Œæ•°ç»„ç”±è‹¥å¹² äº’ä¸ç›¸åŒçš„ æ•´æ•°ç»„æˆã€‚ä½ æ‰“ç®—é‡æ–°æ’åˆ—æ•°ç»„ä¸­çš„å…ƒç´ ä»¥æ»¡è¶³ï¼šé‡æ’åï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½ ä¸ç­‰äº å…¶ä¸¤ä¾§ç›¸é‚»å…ƒç´ çš„ å¹³å‡å€¼ ã€‚</p><p>æ›´å…¬å¼åŒ–çš„è¯´æ³•æ˜¯ï¼Œé‡æ–°æ’åˆ—çš„æ•°ç»„åº”å½“æ»¡è¶³è¿™ä¸€å±æ€§ï¼šå¯¹äºèŒƒå›´ 1 &lt;= i &lt; nums.length - 1 ä¸­çš„æ¯ä¸ª i ï¼Œ(nums[i-1] + nums[i+1]) / 2 ä¸ç­‰äº nums[i] å‡æˆç«‹ ã€‚</p><p>è¿”å›æ»¡è¶³é¢˜æ„çš„ä»»ä¸€é‡æ’ç»“æœã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><blockquote><p>è¾“å…¥ï¼šnums = [1,2,3,4,5]<br>è¾“å‡ºï¼š[1,2,4,5,3]<br>è§£é‡Šï¼š<br>i=1, nums[i] = 2, ä¸¤ç›¸é‚»å…ƒç´ å¹³å‡å€¼ä¸º (1+4) / 2 = 2.5<br>i=2, nums[i] = 4, ä¸¤ç›¸é‚»å…ƒç´ å¹³å‡å€¼ä¸º (2+5) / 2 = 3.5<br>i=3, nums[i] = 5, ä¸¤ç›¸é‚»å…ƒç´ å¹³å‡å€¼ä¸º (4+3) / 2 = 3.5</p></blockquote><p>ç¤ºä¾‹ 2ï¼š</p><blockquote><p>è¾“å…¥ï¼šnums = [6,2,0,9,7]<br>è¾“å‡ºï¼š[9,7,6,2,0]<br>è§£é‡Šï¼š<br>i=1, nums[i] = 7, ä¸¤ç›¸é‚»å…ƒç´ å¹³å‡å€¼ä¸º (9+6) / 2 = 7.5<br>i=2, nums[i] = 6, ä¸¤ç›¸é‚»å…ƒç´ å¹³å‡å€¼ä¸º (7+2) / 2 = 4.5<br>i=3, nums[i] = 2, ä¸¤ç›¸é‚»å…ƒç´ å¹³å‡å€¼ä¸º (6+0) / 2 = 3</p></blockquote><p>æç¤ºï¼š</p><ul><li>3 &lt;= nums.length &lt;= 105</li><li>0 &lt;= nums[i] &lt;= 105</li></ul><p>è¿™ä¸€é“é¢˜åˆšæ‹¿åˆ°å°±å†™ä¸å‡ºæ¥äº†ï¼Œå®Œå…¨æ²¡æœ‰æ€è·¯ï¼Œæ„Ÿè§‰å’Œå¹³æ—¶åšçš„é¢˜å‹ä¸ä¸€æ ·</p><p>åæ¥çœ‹äº†åˆ«äººçš„ä½œç­”ä¹‹åæ‰å‘ç°æ˜¯æŒºç®€å•çš„ä¸€é“é¢˜ï¼Œä¸»è¦è„‘ç­‹è½¬ä¸è¿‡æ¥</p><p>è¿™é‡Œæ‹¿æ•°ç»„<code>nums=[6,2,0,9,7]</code>æ¥ä¸¾ä¾‹ï¼Œç®€å•çš„æ€è·¯å°±æ˜¯ï¼š</p><ol><li>å…ˆæŠŠæ•°ç»„æ’åºï¼Œä»å°åˆ°å¤§æ’å¥½ï¼Œegï¼š<code>nums=[0,2,6,7,9]</code></li><li>æ–°å»ºä¸€ä¸ªç”¨æ¥è¿”å›çš„ç©ºæ•°ç»„<code>res</code>ï¼Œå¹¶æŒ‰é¡ºåºå°†<code>nums</code>æ•°ç»„çš„æ•°å¡«å……å®Œ<code>res</code>æ•°ç»„çš„å¥‡æ•°ä¸‹æ ‡ä½ï¼ˆè¿™é‡Œå¯ä»¥ç”¨ä¸€ä¸ªæŒ‡é’ˆ<code>ans=0</code>æŒ‡å‘numsè¡¨ç¤ºå¡«å……åˆ°å“ªä¸ªæ•°å­—ï¼‰ï¼Œegï¼š<code>res=[0,-1,2,-1,6]</code>å…¶ä¸­<code>-1</code>è¡¨ç¤ºè¿˜æ²¡å¡«å……çš„ä½</li><li>æœ€åå†æŠŠå¶æ•°ä½ä¹Ÿå¡«å……å®Œï¼Œ<code>res=[0,7,2,9,6]</code></li><li>æ­¤æ—¶åœ¨<code>res</code>æ•°ç»„ä¸­ä»»æ„ä¸€ä½æ•°è¦ä¹ˆæ˜¯éƒ½å¤§äºä¸¤è¾¹çš„æ•°ï¼Œè¦ä¹ˆæ˜¯éƒ½å°äºä¸¤è¾¹çš„æ•°ï¼Œå³æ»¡è¶³é¢˜ç›®çš„è¦æ±‚ï¼Œè¯¥æ•°è‚¯å®šä¸ä¼šç­‰äºä¸¤è¾¹æ•°ä¹‹å’Œçš„å¹³å‡æ•°</li></ol><p>çŸ¥é“è¿™ä¸ªæ–¹æ³•ä¹‹åè¿˜æ˜¯è§‰å¾—æŒºç®€å•çš„ï¼Œä¸»è¦å°±æ˜¯æƒ³ä¸åˆ°è¿™ä¸ªæ–¹æ³•</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">rearrangeArray</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> nLen <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>nums<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">res</span><span class="token punctuation">(</span>nLen<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>nLen<span class="token punctuation">;</span>i<span class="token operator">+=</span><span class="token number">2</span><span class="token punctuation">)</span>            res<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>nums<span class="token punctuation">[</span>ans<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>nLen<span class="token punctuation">;</span>i<span class="token operator">+=</span><span class="token number">2</span><span class="token punctuation">)</span>            res<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>nums<span class="token punctuation">[</span>ans<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;LeetCodeå‘¨èµ›ç¬¬254åœº&quot;&gt;&lt;a href=&quot;#LeetCodeå‘¨èµ›ç¬¬254åœº&quot; class=&quot;headerlink&quot; title=&quot;LeetCodeå‘¨èµ›ç¬¬254åœº&quot;&gt;&lt;/a&gt;LeetCodeå‘¨èµ›ç¬¬254åœº&lt;/h1&gt;&lt;p&gt;è¿™åœºå‘¨èµ›å†æ¬¡ç»™è™æƒ¨äº†ï¼Œåšåˆ°ç¬¬äºŒé¢˜å°±å¡</summary>
      
    
    
    
    <category term="LeetCodeåˆ·é¢˜ç¬”è®°" scheme="http://sakura-pub.ltd/categories/LeetCode%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="LeetCode" scheme="http://sakura-pub.ltd/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°30-æ¸å…¥æ¸å‡ºæ•ˆæœ</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B030-%E6%B8%90%E5%85%A5%E6%B8%90%E5%87%BA%E6%95%88%E6%9E%9C/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B030-%E6%B8%90%E5%85%A5%E6%B8%90%E5%87%BA%E6%95%88%E6%9E%9C/</id>
    <published>2021-08-06T00:43:07.000Z</published>
    <updated>2021-08-06T02:08:23.952Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™é‡Œæˆ‘ä»¬å†æ¥å®Œå–„ä¸‹æ¸¸æˆä»èœå•åˆ°åœºæ™¯ä¸­çš„è¿‡æ¸¡åŠ¨ç”»</p><h1 id="ç”¨TimeLineåˆ¶ä½œèœå•è¿‡æ¸¡åŠ¨ç”»"><a href="#ç”¨TimeLineåˆ¶ä½œèœå•è¿‡æ¸¡åŠ¨ç”»" class="headerlink" title="ç”¨TimeLineåˆ¶ä½œèœå•è¿‡æ¸¡åŠ¨ç”»"></a>ç”¨TimeLineåˆ¶ä½œèœå•è¿‡æ¸¡åŠ¨ç”»</h1><p>ä¸Šä¸€ç« èŠ‚è¯´è¿‡ï¼Œæˆ‘æƒ³è¦åˆ¶ä½œä¸€ä¸ªå½“ç©å®¶ç‚¹å‡»New GameæŒ‰é’®æ—¶ï¼Œç›¸æœºæœ‰ä¸€ä¸ªç©¿è¶Šæ ‡é¢˜çš„åŠ¨ç”»ï¼ŒåŒæ—¶æ ‡é¢˜ç•Œé¢çš„å°ç‹—ä¹Ÿä¼šæœç€ä¼ é€é—¨å‰è¿›ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ç”¨åˆ°<code>TimeLine</code>æ¥åˆ¶ä½œåŠ¨ç”»äº†</p><img src="https://i.loli.net/2021/08/06/LtZ83H1fDnNyxw9.png" style="zoom:80%;" /><p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªEmpty Objectï¼Œé€‰ä¸­å®ƒç„¶ååœ¨TimeLineä¸­ç‚¹å‡»<code>Create</code>ï¼Œæ‰¾ä¸ªåœ°æ–¹ä¿å­˜æ–‡ä»¶</p><img src="https://i.loli.net/2021/08/06/ZAPzcGDjSE1vLti.png" style="zoom:80%;" /><p>é€‰ä¸­æˆ‘ä»¬çš„ç›¸æœºï¼Œæ‹–æ‹½åˆ°TimeLineä¸­ï¼Œé€‰æ‹©<code>Add Animation Track</code></p><img src="https://i.loli.net/2021/08/06/eRFhrvz6bAtsOBZ.png" style="zoom:80%;" /><p>è¿™æ—¶å€™å°±å¯ä»¥è¿›è¡Œå½•åˆ¶äº†ï¼Œå½•åˆ¶å‰åæ˜¯æˆ‘ä»¬ç›¸æœºçš„åæ ‡ï¼Œè®°å½•çš„å°±æ˜¯æ•´ä¸ªç›¸æœºçš„ç§»åŠ¨è¿‡ç¨‹ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯¹ç€ç›¸æœºçš„<code>Position</code>å’Œ<code>Rotation</code>å³é”®èœå•é€‰æ‹©<code>Add Key</code>å³å¯ä»¥è®°å½•å½“å‰åæ ‡ä½ç½®å’Œæ—‹è½¬è§’åº¦</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å†æ¥å®Œå–„ä¸‹æ¸¸æˆä»èœå•åˆ°åœºæ™¯ä¸­çš„è¿‡æ¸¡åŠ¨ç”»&lt;/p&gt;
&lt;h1 id=&quot;ç”¨TimeLineåˆ¶ä½œèœå•è¿‡æ¸¡åŠ¨ç”»&quot;&gt;&lt;a href=&quot;#ç”¨TimeLineåˆ¶ä½œèœå•è¿‡æ¸¡åŠ¨ç”»&quot; class=&quot;headerlink&quot; title=&quot;ç”¨TimeLineåˆ¶ä½œèœå•è¿‡æ¸¡åŠ¨ç”»&quot;&gt;&lt;/a&gt;ç”¨Tim</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°29-åˆ¶ä½œä¸»èœå•ç•Œé¢</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B029-%E5%88%B6%E4%BD%9C%E4%B8%BB%E8%8F%9C%E5%8D%95%E7%95%8C%E9%9D%A2/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B029-%E5%88%B6%E4%BD%9C%E4%B8%BB%E8%8F%9C%E5%8D%95%E7%95%8C%E9%9D%A2/</id>
    <published>2021-08-05T01:15:59.000Z</published>
    <updated>2021-08-05T07:07:43.002Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç« æˆ‘ä»¬æ¥ä¸ºæ¸¸æˆåˆ¶ä½œä¸€ä¸ªä¸»èœå•ç•Œé¢</p><h1 id="åœ¨æ–°åœºæ™¯ä¸­ç»˜åˆ¶ç”»å¸ƒ"><a href="#åœ¨æ–°åœºæ™¯ä¸­ç»˜åˆ¶ç”»å¸ƒ" class="headerlink" title="åœ¨æ–°åœºæ™¯ä¸­ç»˜åˆ¶ç”»å¸ƒ"></a>åœ¨æ–°åœºæ™¯ä¸­ç»˜åˆ¶ç”»å¸ƒ</h1><p>æˆ‘ä»¬è¦ä¸“é—¨ä¸ºæˆ‘ä»¬çš„èœå•æ–°å»ºä¸€ä¸ªåœºæ™¯ï¼Œè€Œèœå•åˆ™æ˜¯åœ¨è¿™ä¸ªæ–°åœºæ™¯ä¸­ç»˜åˆ¶çš„</p><p>æˆ‘è¿™é‡Œå…ˆæŠŠåœºæ™¯æ­å»ºå¥½äº†ï¼Œæ³¨æ„æˆ‘ä»¬åœ¨æ‘†æ”¾äººç‰©çš„æ—¶å€™å¯ä»¥ç‚¹å‡»å³é”®èœå•è¿›è¡Œ<code>è„±åŒ…</code>å¤„ç†ï¼Œè¿™æ ·æˆ‘ä»¬ç§»é™¤ç»„ä»¶æ—¶å°±ä¸ä¼šå½±å“åˆ°ç´ æé‡Œé¢çš„æ¨¡æ¿äº†</p><img src="https://i.loli.net/2021/08/05/29wfpAg8ZEyLdDG.png" style="zoom:80%;" /><p>ç„¶åæˆ‘ä»¬ä¹ŸæŠŠUIæ‘†æ”¾å¥½</p><img src="https://i.loli.net/2021/08/05/sHZyaWhDmL6qEvK.png" style="zoom:80%;" /><p>åŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™UIæ·»åŠ ä¸€äº›è§†è§‰æ•ˆæœçš„å¤„ç†</p><h2 id="å°†UIæ·»åŠ ç«‹ä½“æ•ˆæœ"><a href="#å°†UIæ·»åŠ ç«‹ä½“æ•ˆæœ" class="headerlink" title="å°†UIæ·»åŠ ç«‹ä½“æ•ˆæœ"></a>å°†UIæ·»åŠ ç«‹ä½“æ•ˆæœ</h2><p>è¿™é‡Œå¯ä»¥æ·»åŠ ä¸€ç§æ•ˆæœï¼Œæˆ‘æƒ³ç‚¹å‡»new game æ—¶å€™ç›¸æœºä¼šç©¿è¿‡æ ‡é¢˜UIç„¶åé è¿‘ä¼ é€é—¨çš„æ ·å¼ï¼Œä¸‹é¢å°±æ¥å®ç°ä¸€ä¸‹</p><p>æˆ‘ä»¬é€‰ä¸­ç”»å¸ƒï¼Œç„¶åå¦‚ä¸‹å›¾è®¾ç½®ï¼Œå°†<code>Render Mode</code>é€‰æ‹©ä¸º<code>Camera</code>ï¼Œå†æŠŠæ‘„åƒæœºæ‹–åˆ°ä¸‹é¢çš„æ¡†æ¡†é‡Œ</p><img src="https://i.loli.net/2021/08/05/VQnMjOfywAeiNTh.png" style="zoom:80%;" /><p>è¿™æ—¶å€™ç‚¹å‡»è¿è¡Œä¼šå‘ç°æŒ‰é’®ç»™åœºæ™¯é®æŒ¡ä½äº†ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥è°ƒä¸€ä¸‹<code>Plane Distance</code>ï¼Œæ¯”å¦‚æ”¹æˆ1ï¼ŒæŒ‰é’®å°±åˆå¯ä»¥çœ‹åˆ°äº†</p><p>æœ€åæˆ‘ä»¬å†æŠŠ<code>Render Mode</code>æ”¹ä¸º<code>World Space</code>ï¼Œç„¶åå°è¯•å‘å‰ç§»åŠ¨ç›¸æœºï¼Œå°±å¯ä»¥å‘ç°è¾¾æˆäº†ç›¸æœºç©¿è¶Šæ ‡é¢˜çš„æ•ˆæœäº†ï¼Œä¹‹æ‰€ä»¥è¦ç»è¿‡ä¸Šé¢çš„æ­¥éª¤æ˜¯å› ä¸ºå¯ä»¥è®©Unityè‡ªåŠ¨è°ƒèŠ‚UIçš„åˆé€‚ä½ç½®</p><h1 id="ç¼–å†™ä»£ç "><a href="#ç¼–å†™ä»£ç " class="headerlink" title="ç¼–å†™ä»£ç "></a>ç¼–å†™ä»£ç </h1><p>UIå»ºç«‹å¥½ä¹‹åæˆ‘ä»¬å°±è¦æ¥å®ç°æŒ‰é’®çš„åŠŸèƒ½äº†</p><img src="https://i.loli.net/2021/08/05/uZCjd6oGp7DJqe3.png" style="zoom:80%;" /><p>æŒ‰é’®æœ€ä¸»è¦å°±æ˜¯ç›‘å¬äº‹ä»¶ï¼Œä¸‹é¢å…ˆå•ç‹¬æ¥å†™å„ç§åŠŸèƒ½çš„æ–¹æ³•ï¼Œæœ€åå†é…ä¸Šæ•´ä¸ªä»£ç æ–‡ä»¶</p><h2 id="Exit"><a href="#Exit" class="headerlink" title="Exit"></a>Exit</h2><p>å…¶ä¸­æœ€ç®€å•çš„å°±æ˜¯é€€å‡ºæ¸¸æˆï¼Œä¸€è¡Œæå®š</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">QuitGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//é€€å‡ºæ¸¸æˆåŠŸèƒ½</span>        Application<span class="token punctuation">.</span><span class="token function">Quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="NewGame"><a href="#NewGame" class="headerlink" title="NewGame"></a>NewGame</h2><p>ç„¶åæ˜¯åˆ›å»ºæ–°æ¸¸æˆï¼Œè¿™é‡Œå°±è¦æ¶‰åŠå¤šä¸ªä»£ç æ–‡ä»¶</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//MainMenu.cs</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">NewGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//æ¸…æ¥šæ‰€æœ‰å­˜æ¡£</span>        PlayerPrefs<span class="token punctuation">.</span><span class="token function">DeleteAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è½¬æ¢åœºæ™¯</span>        <span class="token comment">//ä¼šåœ¨SceneControlleré‡Œé¢å®Œæˆ</span>        SceneController<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">TransitionToFirstLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åŠ è½½ç¬¬ä¸€ä¸ªåœºæ™¯</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//SceneController.cs</span><span class="token comment">//è½¬æ¢åœºæ™¯ï¼Œå¯ç”¨äºåœ¨æ ‡é¢˜ç•Œé¢è¿‡æ¸¡åˆ°ç¬¬ä¸€ä¸ªç•Œé¢ä¸­</span>    <span class="token return-type class-name">IEnumerator</span> <span class="token function">LoadLevel</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> scene<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>scene<span class="token operator">!=</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//ä¼ å…¥å‚æ•°ä¸ä¸ºç©º</span>            <span class="token comment">//åŠ è½½åœºæ™¯</span>            <span class="token keyword">yield</span> <span class="token keyword">return</span> SceneManager<span class="token punctuation">.</span><span class="token function">LoadSceneAsync</span><span class="token punctuation">(</span>scene<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//åŠ è½½äººç‰©ï¼Œåœ¨GMaeManagerä¸­åˆ›å»ºäº†ä¸€ä¸ªç”¨äºè·å¾—åˆå§‹ä½ç½®çš„æ–¹æ³•</span>            <span class="token keyword">yield</span> <span class="token keyword">return</span> player <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>playerPrefab<span class="token punctuation">,</span>            GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">GetEntrance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>position<span class="token punctuation">,</span>            GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">GetEntrance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rotation<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//ä¿å­˜æ•°æ®</span>            SaveManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">SavePlayerData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">yield</span> <span class="token keyword">break</span><span class="token punctuation">;</span><span class="token comment">//ç»“æŸåç¨‹</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//åŠ è½½ç¬¬ä¸€ä¸ªåœºæ™¯ï¼Œå¯ä»¥å°†è¿™ä¸ªç›´æ¥æ”¾åœ¨æ ‡é¢˜ç•Œé¢çš„åŠŸèƒ½é‡Œ</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TransitionToFirstLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">StartCoroutine</span><span class="token punctuation">(</span><span class="token function">LoadLevel</span><span class="token punctuation">(</span><span class="token string">"3D RPG"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//GmaeManager.cs</span><span class="token comment">//è·å¾—åœºæ™¯åŠ è½½å…¥å£ï¼Œè¿™é‡Œæ˜¯æ ‡é¢˜ç•Œé¢è¿›å…¥ä¸»åœºæ™¯æ—¶ç”¨äºè·å¾—è½åœ°ç‚¹</span>    <span class="token keyword">public</span> <span class="token return-type class-name">Transform</span> <span class="token function">GetEntrance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> item <span class="token keyword">in</span> <span class="token generic-method"><span class="token function">FindObjectsOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TransitionDestination<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>destinationTag<span class="token operator">==</span>TransitionDestination<span class="token punctuation">.</span>DestinationTag<span class="token punctuation">.</span>ENTER<span class="token punctuation">)</span>                <span class="token keyword">return</span> item<span class="token punctuation">.</span>transform<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„è¦æŠŠå‡ ä¸ªManagerå¯¹è±¡å¤åˆ¶åˆ°æ ‡é¢˜åœºæ™¯ä¸­</p><h2 id="Continue"><a href="#Continue" class="headerlink" title="Continue"></a>Continue</h2><p>ç”±äºæˆ‘ä»¬æ¸¸æˆæœ‰å¤šä¸ªåœºæ™¯ï¼Œå› æ­¤åœ¨åŠ è½½åŠŸèƒ½ä¸­æˆ‘ä»¬è¿˜è¦è®°ä½ä¸Šæ¬¡ä¿å­˜ç©å®¶æ˜¯åœç•™åœ¨å“ªä¸€ä¸ªåœºæ™¯ï¼Œä»è€Œåœ¨åŠ è½½å­˜æ¡£æ—¶åˆ¤æ–­è¦åŠ è½½å“ªä¸€ä¸ªåœºæ™¯çš„ç”»é¢</p><p>ä¹Ÿæ˜¯æœ‰å¤šä¸ªä»£ç æ–‡ä»¶éœ€è¦ä¿®æ”¹ï¼Œéœ€è¦æ³¨æ„åŒºåˆ†</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//SaveManager.cs</span><span class="token class-name"><span class="token keyword">string</span></span> sceneName<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span><span class="token comment">//è®°å½•ä¿å­˜åœºæ™¯çš„åå­—</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> SceneName<span class="token punctuation">&#123;</span><span class="token keyword">get</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> PlayerPrefs<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span>sceneName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Save</span><span class="token punctuation">(</span><span class="token class-name">UnityEngine<span class="token punctuation">.</span>Object</span> data<span class="token punctuation">,</span><span class="token class-name"><span class="token keyword">string</span></span> key<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name"><span class="token keyword">var</span></span> jsonData <span class="token operator">=</span> JsonUtility<span class="token punctuation">.</span><span class="token function">ToJson</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è½¬æ¢ä¸ºjson</span>        PlayerPrefs<span class="token punctuation">.</span><span class="token function">SetString</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>jsonData<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å†å»ºç«‹é”®å€¼ä¿å­˜</span>        <span class="token comment">//åœ¨ä¿å­˜æ•°æ®åŒæ—¶ä¿å­˜ç©å®¶åœç•™åœ¨å“ªä¸ªåœºæ™¯</span>        PlayerPrefs<span class="token punctuation">.</span><span class="token function">SetString</span><span class="token punctuation">(</span>sceneName<span class="token punctuation">,</span>SceneManager<span class="token punctuation">.</span><span class="token function">GetActiveScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>        PlayerPrefs<span class="token punctuation">.</span><span class="token function">Save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//SceneController.cs</span><span class="token comment">//Continue</span>    <span class="token comment">//ç”¨äºåŠ è½½æ¸¸æˆçš„åŠ è½½æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TransitionToLoadGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name"><span class="token keyword">string</span></span> sceneName <span class="token operator">=</span> SaveManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>SceneName<span class="token punctuation">;</span><span class="token comment">//è·å¾—ä¸Šæ¬¡ä¿å­˜åœºæ™¯åç§°ï¼Œå¯èƒ½ä¸ºç©º</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sceneName<span class="token operator">!=</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">//ä¸ä¸ºç©ºçš„è¯å°±åŠ è½½åœºæ™¯</span>            <span class="token function">StartCoroutine</span><span class="token punctuation">(</span><span class="token function">LoadLevel</span><span class="token punctuation">(</span>sceneName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//PlayerController.cs</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//ç´ æå¯ç”¨æ—¶æ³¨å†Œäº‹ä»¶</span>MouseManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>OnMouseClicked<span class="token operator">+=</span>MoveToTarget<span class="token punctuation">;</span>MouseManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>OnEnemyClicked<span class="token operator">+=</span>EventAttact<span class="token punctuation">;</span>GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">RigisterPlayer</span><span class="token punctuation">(</span>charcterStates<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ³¨å†ŒGmaeManager</span><span class="token punctuation">&#125;</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//åŠ è½½äººç‰©æ•°æ®</span>SaveManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">LoadPlayerData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//MainMenu.cs</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ContinueGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//è½¬æ¢åœºæ™¯ï¼Œè¯»å–è¿›åº¦</span>        SceneController<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">TransitionToLoadGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¸¸æˆä¸­Escè¿”å›ä¸»èœå•"><a href="#æ¸¸æˆä¸­Escè¿”å›ä¸»èœå•" class="headerlink" title="æ¸¸æˆä¸­Escè¿”å›ä¸»èœå•"></a>æ¸¸æˆä¸­Escè¿”å›ä¸»èœå•</h2><p>æˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªåŠŸèƒ½æ˜¯åœ¨æ¸¸æˆå†…å¿…è¦çš„ï¼Œå°±æ˜¯è¿”å›ä¸»èœå•åŠŸèƒ½ï¼Œè¿™é‡Œä¹Ÿæ¥å®ç°ä¸€ä¸‹</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//SaveManager.cs</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetKeyDown</span><span class="token punctuation">(</span>KeyCode<span class="token punctuation">.</span>Escape<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>           <span class="token comment">//æ¸¸æˆä¸­Escå›åˆ°ä¸»èœå•</span>           SceneController<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">TransitionToMain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetKey</span><span class="token punctuation">(</span>KeyCode<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//ä¿å­˜</span>           <span class="token function">SavePlayerData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetKey</span><span class="token punctuation">(</span>KeyCode<span class="token punctuation">.</span>L<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//è¯»å–</span>           <span class="token function">LoadPlayerData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//SceneController.cs</span><span class="token comment">//åŠ è½½æ ‡é¢˜åœºæ™¯åç¨‹</span>    <span class="token return-type class-name">IEnumerator</span> <span class="token function">LoadMain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">yield</span> <span class="token keyword">return</span> SceneManager<span class="token punctuation">.</span><span class="token function">LoadSceneAsync</span><span class="token punctuation">(</span><span class="token string">"Main"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">yield</span> <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//åŠ è½½æ ‡é¢˜æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TransitionToMain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">StartCoroutine</span><span class="token punctuation">(</span><span class="token function">LoadMain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ°è¿™æˆ‘ä»¬å°±æˆåŠŸå®ç°äº†ä¸»èœå•åˆ°æ¸¸æˆå†åˆ°ä¸»èœå•çš„è¿‡æ¸¡æ•ˆæœ</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ¬ç« æˆ‘ä»¬æ¥ä¸ºæ¸¸æˆåˆ¶ä½œä¸€ä¸ªä¸»èœå•ç•Œé¢&lt;/p&gt;
&lt;h1 id=&quot;åœ¨æ–°åœºæ™¯ä¸­ç»˜åˆ¶ç”»å¸ƒ&quot;&gt;&lt;a href=&quot;#åœ¨æ–°åœºæ™¯ä¸­ç»˜åˆ¶ç”»å¸ƒ&quot; class=&quot;headerlink&quot; title=&quot;åœ¨æ–°åœºæ™¯ä¸­ç»˜åˆ¶ç”»å¸ƒ&quot;&gt;&lt;/a&gt;åœ¨æ–°åœºæ™¯ä¸­ç»˜åˆ¶ç”»å¸ƒ&lt;/h1&gt;&lt;p&gt;æˆ‘ä»¬è¦ä¸“é—¨ä¸ºæˆ‘ä»¬çš„èœå•æ–°å»ºä¸€ä¸ªåœºæ™¯</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°28-ä¿å­˜æ•°æ®</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B028-%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B028-%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE/</id>
    <published>2021-08-04T01:32:04.000Z</published>
    <updated>2021-08-04T02:53:20.289Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸€ç« æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ å¦‚ä½•ä¿å­˜æ•°æ®ï¼Œç”¨åˆ°çš„æœ‰ä¸¤ä¸ªé‡è¦çš„APIï¼Œæ–‡ç« ä¸­ä¼šæœ‰ä»‹ç»åˆ°</p><h1 id="è®¤è¯†API"><a href="#è®¤è¯†API" class="headerlink" title="è®¤è¯†API"></a>è®¤è¯†API</h1><p>è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°ä¸¤ä¸ªAPIï¼Œä¸€ä¸ªæ˜¯**<a href="https://docs.unity.cn/cn/2020.3/ScriptReference/EditorPrefs.html">PlayerPrefs</a><strong>ç±»ï¼Œè™½ç„¶å®˜æ–¹æ–‡æ¡£å†™çš„æ˜¯EditorPrefsï¼Œä½†æ˜¯ä»–ä»¬çš„æ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œå¦å¤–ä¸€ä¸ªè¦ç”¨åˆ°çš„APIæ˜¯</strong><a href="https://docs.unity.cn/cn/2020.3/ScriptReference/JsonUtility.ToJson.html">JsonUtility.ToJson</a>**æ–¹æ³•</p><p>PlayerPrefsï¼šç”¨äºæœ¬åœ°æŒä¹…åŒ–ä¿å­˜ä¸è¯»å–çš„ç±»ï¼ŒPlayerPrefsç±»å·¥ä½œåŸç†éå¸¸ç®€å•ï¼Œä»¥é”®å€¼å¯¹çš„å½¢å¼å°†æ•°æ®ä¿å­˜åœ¨æ–‡ä»¶ä¸­ï¼Œç„¶åç¨‹åºå¯ä»¥æ ¹æ®è¿™ä¸ªåç§°å–å‡ºä¸Šæ¬¡ä¿å­˜çš„æ•°å€¼</p><p>JsonUtility.ToJsonï¼šç”Ÿæˆå¯¹è±¡çš„å…¬å…±å­—æ®µçš„ JSON è¡¨ç¤ºå½¢å¼ã€‚</p><h1 id="ç¼–å†™ä»£ç "><a href="#ç¼–å†™ä»£ç " class="headerlink" title="ç¼–å†™ä»£ç "></a>ç¼–å†™ä»£ç </h1><p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ª<code>SaveManager.cs</code>ç„¶åæ¥ç¼–å†™ä¸“é—¨ç®¡ç†ä¿å­˜è¯»å–çš„ç±»</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SaveManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Singleton<span class="token punctuation">&lt;</span>SaveManager<span class="token punctuation">></span></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">DontDestroyOnLoad</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åˆ‡æ¢åœºæ™¯ä¸é”€æ¯</span>    <span class="token punctuation">&#125;</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetKey</span><span class="token punctuation">(</span>KeyCode<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//ä¿å­˜</span>            <span class="token function">SavePlayerData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetKey</span><span class="token punctuation">(</span>KeyCode<span class="token punctuation">.</span>L<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//è¯»å–</span>            <span class="token function">LoadPlayerData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SavePlayerData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name"><span class="token keyword">var</span></span> PlayerData <span class="token operator">=</span> GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>playerStates<span class="token punctuation">.</span>characterData<span class="token punctuation">;</span>        <span class="token function">Save</span><span class="token punctuation">(</span>PlayerData<span class="token punctuation">,</span>GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>playerStates<span class="token punctuation">.</span>characterData<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">LoadPlayerData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name"><span class="token keyword">var</span></span> PlayerData <span class="token operator">=</span> GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>playerStates<span class="token punctuation">.</span>characterData<span class="token punctuation">;</span>        <span class="token function">Load</span><span class="token punctuation">(</span>PlayerData<span class="token punctuation">,</span>GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>playerStates<span class="token punctuation">.</span>characterData<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Save</span><span class="token punctuation">(</span><span class="token class-name">UnityEngine<span class="token punctuation">.</span>Object</span> data<span class="token punctuation">,</span><span class="token class-name"><span class="token keyword">string</span></span> key<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name"><span class="token keyword">var</span></span> jsonData <span class="token operator">=</span> JsonUtility<span class="token punctuation">.</span><span class="token function">ToJson</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è½¬æ¢ä¸ºjson</span>        PlayerPrefs<span class="token punctuation">.</span><span class="token function">SetString</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>jsonData<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å†å»ºç«‹é”®å€¼ä¿å­˜</span>        PlayerPrefs<span class="token punctuation">.</span><span class="token function">Save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Load</span><span class="token punctuation">(</span><span class="token class-name">UnityEngine<span class="token punctuation">.</span>Object</span> data<span class="token punctuation">,</span><span class="token class-name"><span class="token keyword">string</span></span> key<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>PlayerPrefs<span class="token punctuation">.</span><span class="token function">HasKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//å¦‚æœé”®å€¼å­˜åœ¨çš„è¯å°±è¯»å–</span>            JsonUtility<span class="token punctuation">.</span><span class="token function">FromJsonOverwrite</span><span class="token punctuation">(</span>PlayerPrefs<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥è¿›æ¸¸æˆä½“éªŒä¸€ä¸‹äº†ï¼ŒæŒ‰<code>S</code>é”®æ˜¯ä¿å­˜ç©å®¶å½“å‰æ•°æ®ï¼ŒæŒ‰<code>L</code>é”®æ˜¯è¯»å–ï¼Œå¹¶ä¸”ä¿å­˜ååœ¨ä¸‹ä¸€æ¬¡æ¸¸æˆå¯åŠ¨æ—¶ä»ç„¶å¯ä»¥è¯»å–æ•°æ®</p><p>Windowsç³»ç»Ÿå¯ä»¥åœ¨æ³¨å†Œè¡¨ä¸Šçœ‹åˆ°ä¿å­˜çš„æ•°æ®</p><img src="https://i.loli.net/2021/08/04/jTPgFrdWL1wH96N.png" style="zoom:80%;" /><h1 id="è·¨åœºæ™¯ä¿å­˜è¯»å–"><a href="#è·¨åœºæ™¯ä¿å­˜è¯»å–" class="headerlink" title="è·¨åœºæ™¯ä¿å­˜è¯»å–"></a>è·¨åœºæ™¯ä¿å­˜è¯»å–</h1><p>æ—¢ç„¶æˆ‘ä»¬åœ¨ä¸‹ä¸€æ¬¡å¼€å¯æ¸¸æˆä¹Ÿå¯ä»¥è¯»å–ç©å®¶æ•°æ®ï¼Œé‚£ä¹ˆè·¨åœºæ™¯ä¹Ÿä¸åœ¨è¯ä¸‹</p><p>å»åˆ°<code>SceneController.cs</code>ä¿®æ”¹ä¸€ä¸‹ä»£ç </p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token return-type class-name">IEnumerator</span> <span class="token function">Transition</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> sceneName<span class="token punctuation">,</span><span class="token class-name">TransitionDestination<span class="token punctuation">.</span>DestinationTag</span> destinationTag<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//ä¿å­˜æ•°æ®</span>        SaveManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">SavePlayerData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>SceneManager<span class="token punctuation">.</span><span class="token function">GetActiveScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token operator">!=</span>sceneName<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">//ä¸åŒåœºæ™¯çš„è¯</span>            <span class="token keyword">yield</span> <span class="token keyword">return</span> SceneManager<span class="token punctuation">.</span><span class="token function">LoadSceneAsync</span><span class="token punctuation">(</span>sceneName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åç¨‹åŠ è½½åœºæ™¯</span>            <span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>playerPrefab<span class="token punctuation">,</span>                <span class="token function">GetDestination</span><span class="token punctuation">(</span>destinationTag<span class="token punctuation">)</span><span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span>                <span class="token function">GetDestination</span><span class="token punctuation">(</span>destinationTag<span class="token punctuation">)</span><span class="token punctuation">.</span>transform<span class="token punctuation">.</span>rotation<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åŠ è½½ç©å®¶ç´ æå¯¹è±¡</span>                        <span class="token comment">//è¯»å–ç©å®¶æ•°æ®</span>            SaveManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">LoadPlayerData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">yield</span> <span class="token keyword">break</span><span class="token punctuation">;</span><span class="token comment">//åŠ è½½å¥½åè·³å‡ºåç¨‹</span>                    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token comment">//ç›¸åŒåœºæ™¯</span>            <span class="token comment">//å…ˆè·å¾—ç©å®¶çš„å¯¹è±¡</span>            player <span class="token operator">=</span> GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>playerStates<span class="token punctuation">.</span>gameObject<span class="token punctuation">;</span>            <span class="token comment">//è·å¾—ç›®çš„åœ°ä¼ é€é—¨å¯¹è±¡</span>            <span class="token class-name"><span class="token keyword">var</span></span> td <span class="token operator">=</span> <span class="token function">GetDestination</span><span class="token punctuation">(</span>destinationTag<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//å…³é—­å¯¼èˆªç§»åŠ¨</span>            player<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token comment">//è®¾ç½®å¯¹è±¡çš„åæ ‡å’Œæ—‹è½¬è§’åº¦</span>            player<span class="token punctuation">.</span>transform<span class="token punctuation">.</span><span class="token function">SetPositionAndRotation</span><span class="token punctuation">(</span>td<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span>td<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>rotation<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æ¢å¤å¯¼èˆªç§»åŠ¨</span>            player<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæˆ‘ä»¬åœ¨åŠ è½½å¦å¤–ä¸€ä¸ªåœºæ™¯å‰ä¼šå…ˆä¿å­˜æ•°æ®ï¼Œåœ¨åŠ è½½åœºæ™¯å®Œåæˆ‘ä»¬å…ˆè¯»å–æ•°æ®å†é€€å‡ºåç¨‹</p><p>è¿™æ ·å°±å®ç°äº†äººç‰©æ•°æ®çš„ä¿å­˜äº†ï¼Œå½“ç„¶è¿™åªæ˜¯ä¿å­˜è¯»å–äº†äººç‰©çš„ç”Ÿå‘½å€¼ã€ç»éªŒå€¼ç­‰æ•°æ®ï¼Œå…¶å®ƒæ•°æ®ä¹Ÿå¯ä»¥è‡ªç”±å‘æŒ¥</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¿™ä¸€ç« æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ å¦‚ä½•ä¿å­˜æ•°æ®ï¼Œç”¨åˆ°çš„æœ‰ä¸¤ä¸ªé‡è¦çš„APIï¼Œæ–‡ç« ä¸­ä¼šæœ‰ä»‹ç»åˆ°&lt;/p&gt;
&lt;h1 id=&quot;è®¤è¯†API&quot;&gt;&lt;a href=&quot;#è®¤è¯†API&quot; class=&quot;headerlink&quot; title=&quot;è®¤è¯†API&quot;&gt;&lt;/a&gt;è®¤è¯†API&lt;/h1&gt;&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°ä¸¤ä¸ªA</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°27-ä¸åŒåœºæ™¯çš„ä¼ é€</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B027-%E4%B8%8D%E5%90%8C%E5%9C%BA%E6%99%AF%E7%9A%84%E4%BC%A0%E9%80%81/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B027-%E4%B8%8D%E5%90%8C%E5%9C%BA%E6%99%AF%E7%9A%84%E4%BC%A0%E9%80%81/</id>
    <published>2021-08-03T01:05:23.000Z</published>
    <updated>2021-08-03T03:25:32.587Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸€ç« æˆ‘ä»¬æ¥å®ç°ä¸åŒåœºæ™¯çš„ä¼ é€</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦æŠŠå¦å¤–ä¸€ä¸ªåœºæ™¯æ­å»ºå¥½å…ˆï¼Œéšåæ‰å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥çš„å·¥ä½œï¼Œè¿™é‡Œå°±è‡ªå·±å‘æŒ¥å§</p><p>æ­å»ºå¥½åœºæ™¯åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ­£å¼å¼€å§‹æ¥å®ç°å¦‚ä½•è·¨åœºæ™¯ä¼ é€äº†</p><h1 id="è®¾ç½®å¥½ä¼ é€é—¨å±æ€§"><a href="#è®¾ç½®å¥½ä¼ é€é—¨å±æ€§" class="headerlink" title="è®¾ç½®å¥½ä¼ é€é—¨å±æ€§"></a>è®¾ç½®å¥½ä¼ é€é—¨å±æ€§</h1><p>é¦–å…ˆå°±æ˜¯è¦æŠŠä¸¤ä¸ªä¸åŒåœºæ™¯çš„ä¼ é€é—¨å±æ€§è®¾ç½®å¥½ï¼Œæ³¨æ„è¦é€‰æ‹©ä¸åŒåœºæ™¯ä¼ é€å¹¶æŠŠåå­—å¡«ä¸Š</p><p>ä¸‹é¢æ˜¯ä¸»ä¸–ç•Œçš„ä¼ é€é—¨å±æ€§</p><img src="https://i.loli.net/2021/08/03/qSY69TCAibHz8wP.png" style="zoom:80%;" /><p>ä»¥åŠå¦å¤–ä¸€ä¸ªä¸–ç•Œä¼ é€é—¨çš„å±æ€§</p><img src="https://i.loli.net/2021/08/03/O4ymdIfH3CVZA2L.png" style="zoom:80%;" /><h1 id="ç¼–å†™ä»£ç "><a href="#ç¼–å†™ä»£ç " class="headerlink" title="ç¼–å†™ä»£ç "></a>ç¼–å†™ä»£ç </h1><p>ä¸‹é¢çš„ä»£ç å¯èƒ½æœ‰ç‚¹åˆ†æ•£ï¼Œéœ€è¦ä¿®æ”¹çš„æ–‡ä»¶æ¯”è¾ƒå¤šï¼Œä¼šæœ‰æ³¨é‡Šå†™å‡ºæ¥åœ¨å“ªä¸ªæ–‡ä»¶</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//SceneController.csï¼Œæ·»åŠ äº†ä¸åŒåœºæ™¯åŠ è½½æ—¶çš„ä»£ç </span><span class="token keyword">public</span> <span class="token class-name">GameObject</span> playerPrefab<span class="token punctuation">;</span><span class="token comment">//ç©å®¶ç´ æå¯¹è±¡ï¼Œç”¨æ¥ä¸åŒåœºæ™¯æ—¶è¿›è¡ŒåŠ è½½</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TransitiToDestination</span><span class="token punctuation">(</span><span class="token class-name">TransitionPoint</span> transitionPoint<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//è€ƒè™‘æ˜¯åŒåœºæ™¯è¿˜æ˜¯ä¸åŒåœºæ™¯çš„ä¼ é€</span>        <span class="token keyword">switch</span><span class="token punctuation">(</span>transitionPoint<span class="token punctuation">.</span>transitionType<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">case</span> TransitionPoint<span class="token punctuation">.</span>TransitionType<span class="token punctuation">.</span>SameScene<span class="token punctuation">:</span>                <span class="token comment">//åŒåœºæ™¯å¯ä»¥ä¸ç”¨å¼‚æ­¥ï¼Œç›´æ¥ä¼ é€</span>                <span class="token comment">//è¿™é‡Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è·å¾—å½“å‰æ´»åŠ¨çª—å£çš„åå­—</span>                <span class="token function">StartCoroutine</span><span class="token punctuation">(</span><span class="token function">Transition</span><span class="token punctuation">(</span>SceneManager<span class="token punctuation">.</span><span class="token function">GetActiveScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span>transitionPoint<span class="token punctuation">.</span>destinationTag<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> TransitionPoint<span class="token punctuation">.</span>TransitionType<span class="token punctuation">.</span>DifferentScene<span class="token punctuation">:</span>                <span class="token comment">//ä¸åŒåœºæ™¯ï¼Œç”¨å¼‚æ­¥åŠ è½½çš„æ–¹å¼</span>                <span class="token function">StartCoroutine</span><span class="token punctuation">(</span><span class="token function">Transition</span><span class="token punctuation">(</span>transitionPoint<span class="token punctuation">.</span>sceneName<span class="token punctuation">,</span>transitionPoint<span class="token punctuation">.</span>destinationTag<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token return-type class-name">IEnumerator</span> <span class="token function">Transition</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> sceneName<span class="token punctuation">,</span><span class="token class-name">TransitionDestination<span class="token punctuation">.</span>DestinationTag</span> destinationTag<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//TODO:ä¿å­˜æ•°æ®</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>SceneManager<span class="token punctuation">.</span><span class="token function">GetActiveScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token operator">!=</span>sceneName<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">//ä¸åŒåœºæ™¯çš„è¯</span>            <span class="token keyword">yield</span> <span class="token keyword">return</span> SceneManager<span class="token punctuation">.</span><span class="token function">LoadSceneAsync</span><span class="token punctuation">(</span>sceneName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åç¨‹åŠ è½½åœºæ™¯</span>            <span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>playerPrefab<span class="token punctuation">,</span>                <span class="token function">GetDestination</span><span class="token punctuation">(</span>destinationTag<span class="token punctuation">)</span><span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span>                <span class="token function">GetDestination</span><span class="token punctuation">(</span>destinationTag<span class="token punctuation">)</span><span class="token punctuation">.</span>transform<span class="token punctuation">.</span>rotation<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åŠ è½½ç©å®¶ç´ æå¯¹è±¡</span>            <span class="token keyword">yield</span> <span class="token keyword">break</span><span class="token punctuation">;</span><span class="token comment">//åŠ è½½å¥½åè·³å‡ºåç¨‹</span>                    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token comment">//ç›¸åŒåœºæ™¯</span>            <span class="token comment">//å…ˆè·å¾—ç©å®¶çš„å¯¹è±¡</span>            player <span class="token operator">=</span> GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>playerStates<span class="token punctuation">.</span>gameObject<span class="token punctuation">;</span>            <span class="token comment">//è·å¾—ç›®çš„åœ°ä¼ é€é—¨å¯¹è±¡</span>            <span class="token class-name"><span class="token keyword">var</span></span> td <span class="token operator">=</span> <span class="token function">GetDestination</span><span class="token punctuation">(</span>destinationTag<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//å…³é—­å¯¼èˆªç§»åŠ¨</span>            player<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token comment">//è®¾ç½®å¯¹è±¡çš„åæ ‡å’Œæ—‹è½¬è§’åº¦</span>            player<span class="token punctuation">.</span>transform<span class="token punctuation">.</span><span class="token function">SetPositionAndRotation</span><span class="token punctuation">(</span>td<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span>td<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>rotation<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æ¢å¤å¯¼èˆªç§»åŠ¨</span>            player<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„è¿™é‡Œæˆ‘ä»¬è¦å¤–ç•ŒæŠŠäººç‰©çš„ç´ ææ‹–è¿›å»ä»£ç ä¸­ï¼Œä»¥ä¿è¯ä¼ é€åˆ°å¦å¤–ä¸€ä¸ªåœºæ™¯æ—¶å¯ä»¥åŠ è½½äººç‰©å‡ºæ¥</p><img src="https://i.loli.net/2021/08/03/xDbVRIcpGHqTy4h.png" style="zoom:80%;" /><h1 id="ä¿®å¤é—®é¢˜"><a href="#ä¿®å¤é—®é¢˜" class="headerlink" title="ä¿®å¤é—®é¢˜"></a>ä¿®å¤é—®é¢˜</h1><h2 id="ä¼ é€æŠ¥é”™"><a href="#ä¼ é€æŠ¥é”™" class="headerlink" title="ä¼ é€æŠ¥é”™"></a>ä¼ é€æŠ¥é”™</h2><p>æ­¤æ—¶æˆ‘ä»¬ä¼ é€æ—¶ä¼šæŠ¥é”™ï¼Œæœ‰å¥½å‡ ä¸ªé—®é¢˜æˆ‘ä»¬æ…¢æ…¢æ¥çœ‹</p><p>ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯è¦æŠŠåœºæ™¯æ”¾åœ¨<code>Scene in Build</code>çš„è®¾ç½®å½“ä¸­</p><img src="https://i.loli.net/2021/08/03/dpRCZcfYrDAUx1V.png" style="zoom:80%;" /><p>ç¬¬äºŒä¸ªé—®é¢˜å°±æ˜¯æˆ‘ä»¬ä¼ é€åˆ°æ–°åœºæ™¯åï¼Œé‚£äº›Manageræ–‡ä»¶éƒ½ä¼šä¸å­˜åœ¨ï¼Œå› æ­¤æˆ‘ä»¬è¦æŠŠå®ƒä»¬åŠ å…¥<code>DontDestory</code>çš„æ¸…å•é‡Œ</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//åœ¨GameManager.cs  SceneController.cs  MouseManager.csåŠ ä¸Šè¿™è¡Œä»£ç </span><span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">DontDestroyOnLoad</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é˜²æ­¢æ­¤Manageræ–‡ä»¶åœ¨åˆ‡æ¢åœºæ™¯æ—¶ç»™é”€æ¯</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬è¦åœ¨<code>GameManager.cs</code>  <code>SceneController.cs</code>  <code>MouseManager.cs</code>åŠ ä¸Šä¸Šé¢ä»£ç ï¼Œå¹¶ä¸”æ˜¯è¦<strong>ç»§æ‰¿å•ä¾‹æ¨¡å¼çš„ä»£ç æ–‡ä»¶</strong></p><h2 id="äººç‰©ä¼ é€åæ— æ³•ç§»åŠ¨"><a href="#äººç‰©ä¼ é€åæ— æ³•ç§»åŠ¨" class="headerlink" title="äººç‰©ä¼ é€åæ— æ³•ç§»åŠ¨"></a>äººç‰©ä¼ é€åæ— æ³•ç§»åŠ¨</h2><p>è¿™æ—¶å€™äººç‰©å¯ä»¥ä¼ é€åˆ°å¦å¤–ä¸€ä¸ªåœºæ™¯äº†ï¼Œä½†æ˜¯ä¸èƒ½ç§»åŠ¨ï¼Œå¯èƒ½æœ‰ä¸‹é¢é—®é¢˜</p><p>ç¬¬ä¸€ä¸ªå¯èƒ½å­˜åœ¨çš„é—®é¢˜å°±æ˜¯æˆ‘ä»¬ç¬¬äºŒä¸ªåœºæ™¯çš„åœ°æ¿æ²¡æœ‰è®¾ç½®æˆ<code>Ground</code>æ ‡ç­¾ï¼Œæˆ‘ä»¬è¦è®¾ç½®ä¸€ä¸‹</p><p>ç¬¬äºŒä¸ªé—®é¢˜æ˜¯æˆ‘ä»¬åœ¨<code>PlayerController.cs</code>ä¸­çš„<code>OnMouseClicked</code>äº‹ä»¶æ²¡æœ‰åŠ è½½å‡ºæ¥</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//ç´ æå¯ç”¨æ—¶æ³¨å†Œäº‹ä»¶</span>MouseManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>OnMouseClicked<span class="token operator">+=</span>MoveToTarget<span class="token punctuation">;</span>MouseManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>OnEnemyClicked<span class="token operator">+=</span>EventAttact<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//KeyManager.Instance.OnKeyInputMove+=MoveToTarget;</span>GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">RigisterPlayer</span><span class="token punctuation">(</span>charcterStates<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnDisable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//ç´ æç¦ç”¨æ—¶æ³¨é”€äº‹ä»¶</span>MouseManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>OnMouseClicked<span class="token operator">-=</span>MoveToTarget<span class="token punctuation">;</span>MouseManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>OnEnemyClicked<span class="token operator">-=</span>EventAttact<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äººç‰©ä¼ é€å›æ¥ç›¸æœºæ²¡æœ‰è·Ÿéš"><a href="#äººç‰©ä¼ é€å›æ¥ç›¸æœºæ²¡æœ‰è·Ÿéš" class="headerlink" title="äººç‰©ä¼ é€å›æ¥ç›¸æœºæ²¡æœ‰è·Ÿéš"></a>äººç‰©ä¼ é€å›æ¥ç›¸æœºæ²¡æœ‰è·Ÿéš</h2><p>æ¥ç€è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯å½“æˆ‘ä»¬ä»å¦å¤–ä¸€ä¸ªåœºæ™¯ä¼ é€å›æ¥æ—¶ï¼Œç›¸æœºçš„è·Ÿéšå°±ä¼šå¤±æ•ˆï¼Œè¿™é‡Œæ¥ä¿®å¤è¿™ä¸ªé—®é¢˜</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//GameManager.cs</span><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">RigisterPlayer</span><span class="token punctuation">(</span><span class="token class-name">CharacterStates</span> player<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//é€šè¿‡å¤–ç•Œæ³¨å†Œçš„æ–¹å¼æ¥è·å¾—å¯¹è±¡çš„playerStates</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>playerStates <span class="token operator">=</span> player<span class="token punctuation">;</span>        <span class="token comment">//å¤–ç•Œäººç‰©å¯¹è±¡æ³¨å†ŒåŒæ—¶è®©ç›¸æœºè¿›è¡Œè·Ÿéš</span>        followCamera <span class="token operator">=</span> <span class="token generic-method"><span class="token function">FindObjectOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CinemachineFreeLook<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åœ¨åœ°å›¾ä¸­æŸ¥æ‰¾ç›¸æœº</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>followCamera<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//å¦‚æœæ‰¾åˆ°ç›¸æœºå°±è®©å®ƒè·Ÿéš</span>            followCamera<span class="token punctuation">.</span>Follow <span class="token operator">=</span> playerStates<span class="token punctuation">.</span>transform<span class="token punctuation">;</span>            followCamera<span class="token punctuation">.</span>LookAt <span class="token operator">=</span> playerStates<span class="token punctuation">.</span>transform<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¿™ä¸€ç« æˆ‘ä»¬æ¥å®ç°ä¸åŒåœºæ™¯çš„ä¼ é€&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬è¦æŠŠå¦å¤–ä¸€ä¸ªåœºæ™¯æ­å»ºå¥½å…ˆï¼Œéšåæ‰å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥çš„å·¥ä½œï¼Œè¿™é‡Œå°±è‡ªå·±å‘æŒ¥å§&lt;/p&gt;
&lt;p&gt;æ­å»ºå¥½åœºæ™¯åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ­£å¼å¼€å§‹æ¥å®ç°å¦‚ä½•è·¨åœºæ™¯ä¼ é€äº†&lt;/p&gt;
&lt;h1 id=&quot;è®¾ç½®å¥½ä¼ é€é—¨å±æ€§&quot;&gt;&lt;a href=&quot;#è®¾ç½®å¥½ä¼ é€é—¨</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°26-å®ç°åŒåœºæ™¯çš„ä¼ é€</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B026-%E5%AE%9E%E7%8E%B0%E5%90%8C%E5%9C%BA%E6%99%AF%E7%9A%84%E4%BC%A0%E9%80%81/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B026-%E5%AE%9E%E7%8E%B0%E5%90%8C%E5%9C%BA%E6%99%AF%E7%9A%84%E4%BC%A0%E9%80%81/</id>
    <published>2021-08-02T01:49:40.000Z</published>
    <updated>2021-08-02T04:18:18.335Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™é‡Œæˆ‘ä»¬å®ç°åŒåœºæ™¯çš„ä¼ é€æ•ˆæœ</p><h1 id="è°ƒæ•´ä¼ é€é—¨"><a href="#è°ƒæ•´ä¼ é€é—¨" class="headerlink" title="è°ƒæ•´ä¼ é€é—¨"></a>è°ƒæ•´ä¼ é€é—¨</h1><p>åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬è¦æŠŠä¸åŒçš„ä¼ é€é—¨æ‘†æ”¾å¥½å…ˆ</p><p>å¦å¤–æˆ‘ä»¬å¯èƒ½ä¼šå‘ç°ç‚¹å‡»ä¸äº†ä¼ é€é—¨ï¼Œè¿™æ˜¯å› ä¸ºä¼ é€é—¨çš„box collideræŒ¡ä½äº†æˆ‘ä»¬é¼ æ ‡çš„å°„çº¿ï¼Œè¿™é‡ŒæŠŠå®ƒçš„å¤§å°æ”¹ä¸€ä¸‹å°±è¡Œäº†</p><img src="https://i.loli.net/2021/08/02/LHvS6JN4idPbQOA.png" style="zoom:80%;" /><p>ç»™ä¼ é€é—¨åŠ ä¸Š<code>Portal</code>çš„æ ‡ç­¾ï¼Œç„¶åå†å»<code>MouseManager.cs</code>ä¿®æ”¹ä¸€ä¸‹é¼ æ ‡çš„å›¾æ ·</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetCursorTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token class-name">Ray</span> ray <span class="token operator">=</span> Camera<span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token function">ScreenPointToRay</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span>mousePosition<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>Physics<span class="token punctuation">.</span><span class="token function">Raycast</span><span class="token punctuation">(</span>ray<span class="token punctuation">,</span><span class="token keyword">out</span> hitInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//TODO:åˆ‡æ¢é¼ æ ‡è´´å›¾</span><span class="token keyword">switch</span><span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span>tag<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">case</span> <span class="token string">"Ground"</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>åœ°é¢è¡Œèµ°çš„å›¾æ ‡Cursor<span class="token punctuation">.</span><span class="token function">SetCursor</span><span class="token punctuation">(</span>arrow<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span>CursorMode<span class="token punctuation">.</span>Auto<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token string">"Enemy"</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>ç‚¹å‡»æ•Œäººçš„å›¾æ ‡Cursor<span class="token punctuation">.</span><span class="token function">SetCursor</span><span class="token punctuation">(</span>attack<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span>CursorMode<span class="token punctuation">.</span>Auto<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token string">"Portal"</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>ç‚¹å‡»ä¼ é€é—¨å›¾æ ‡Cursor<span class="token punctuation">.</span><span class="token function">SetCursor</span><span class="token punctuation">(</span>doorway<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span>CursorMode<span class="token punctuation">.</span>Auto<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">default</span><span class="token punctuation">:</span>Cursor<span class="token punctuation">.</span><span class="token function">SetCursor</span><span class="token punctuation">(</span>point<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span>CursorMode<span class="token punctuation">.</span>Auto<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//if</span><span class="token punctuation">&#125;</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">MouseControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetMouseButtonDown</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> hitInfo<span class="token punctuation">.</span>collider <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span><span class="token function">CompareTag</span><span class="token punctuation">(</span><span class="token string">"Ground"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>OnMouseClicked<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span><span class="token function">CompareTag</span><span class="token punctuation">(</span><span class="token string">"Portal"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//ç‚¹å‡»ä¼ é€é—¨</span>OnMouseClicked<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span><span class="token function">CompareTag</span><span class="token punctuation">(</span><span class="token string">"Enemy"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>OnEnemyClicked<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç‚¹å‡»æ•Œäººä¼ é€’æ•Œäººçš„gameObject</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span><span class="token function">CompareTag</span><span class="token punctuation">(</span><span class="token string">"Attackable"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>OnEnemyClicked<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ç¼–å†™ä¼ é€ç®¡ç†ä»£ç "><a href="#ç¼–å†™ä¼ é€ç®¡ç†ä»£ç " class="headerlink" title="ç¼–å†™ä¼ é€ç®¡ç†ä»£ç "></a>ç¼–å†™ä¼ é€ç®¡ç†ä»£ç </h1><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>SceneController.cs</code>ï¼Œä¹‹æ‰€ä»¥ä¸æ˜¯ç”¨Manageræ˜¯å› ä¸ºåœ¨Unityæœ‰ä¸ª<code>SceneManager</code>åŒåçš„æ–‡ä»¶å­˜åœ¨</p><img src="https://i.loli.net/2021/08/02/FLvOK3csbIP45Xz.png" style="zoom:80%;" /><p>æ³¨æ„æ­¤æ–‡ä»¶ç»§æ‰¿çš„æ˜¯<strong>å•ä¾‹æ¨¡å¼</strong>ç±»</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>SceneManagement</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>AI</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SceneController</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Singleton<span class="token punctuation">&lt;</span>SceneController<span class="token punctuation">></span></span></span><span class="token punctuation">&#123;</span>    <span class="token class-name">GameObject</span> player<span class="token punctuation">;</span><span class="token comment">//ç©å®¶</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TransitiToDestination</span><span class="token punctuation">(</span><span class="token class-name">TransitionPoint</span> transitionPoint<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//è€ƒè™‘æ˜¯åŒåœºæ™¯è¿˜æ˜¯ä¸åŒåœºæ™¯çš„ä¼ é€</span>        <span class="token keyword">switch</span><span class="token punctuation">(</span>transitionPoint<span class="token punctuation">.</span>transitionType<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">case</span> TransitionPoint<span class="token punctuation">.</span>TransitionType<span class="token punctuation">.</span>SameScene<span class="token punctuation">:</span>            <span class="token comment">//åŒåœºæ™¯å¯ä»¥ä¸ç”¨å¼‚æ­¥ï¼Œç›´æ¥ä¼ é€</span>            <span class="token comment">//è¿™é‡Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è·å¾—å½“å‰æ´»åŠ¨çª—å£çš„åå­—</span>            <span class="token function">StartCoroutine</span><span class="token punctuation">(</span><span class="token function">Transition</span><span class="token punctuation">(</span>SceneManager<span class="token punctuation">.</span><span class="token function">GetActiveScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span>transitionPoint<span class="token punctuation">.</span>destinationTag<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> TransitionPoint<span class="token punctuation">.</span>TransitionType<span class="token punctuation">.</span>DifferentScene<span class="token punctuation">:</span>            <span class="token comment">//ä¸åŒåœºæ™¯ï¼Œç”¨å¼‚æ­¥åŠ è½½çš„æ–¹å¼</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token return-type class-name">IEnumerator</span> <span class="token function">Transition</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> sceneName<span class="token punctuation">,</span><span class="token class-name">TransitionDestination<span class="token punctuation">.</span>DestinationTag</span> destinationTag<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//å…ˆè·å¾—ç©å®¶çš„å¯¹è±¡</span>        player <span class="token operator">=</span> GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>playerStates<span class="token punctuation">.</span>gameObject<span class="token punctuation">;</span>        <span class="token comment">//è·å¾—ç›®çš„åœ°ä¼ é€é—¨å¯¹è±¡</span>        <span class="token class-name"><span class="token keyword">var</span></span> td <span class="token operator">=</span> <span class="token function">GetDestination</span><span class="token punctuation">(</span>destinationTag<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å…³é—­å¯¼èˆªç§»åŠ¨</span>        player<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token comment">//è®¾ç½®å¯¹è±¡çš„åæ ‡å’Œæ—‹è½¬è§’åº¦</span>        player<span class="token punctuation">.</span>transform<span class="token punctuation">.</span><span class="token function">SetPositionAndRotation</span><span class="token punctuation">(</span>td<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span>td<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>rotation<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ¢å¤å¯¼èˆªç§»åŠ¨</span>        player<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token return-type class-name">TransitionDestination</span> <span class="token function">GetDestination</span><span class="token punctuation">(</span><span class="token class-name">TransitionDestination<span class="token punctuation">.</span>DestinationTag</span> destinationTag<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//é€šè¿‡ä¼ é€é—¨ç›®çš„åœ°çš„æ ‡ç­¾å¯»æ‰¾ç›®çš„åœ°ä¼ é€é—¨æ‰€åœ¨ä½ç½®</span>        <span class="token class-name"><span class="token keyword">var</span></span> entrances <span class="token operator">=</span> <span class="token generic-method"><span class="token function">FindObjectsOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TransitionDestination<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>entrances<span class="token punctuation">.</span>Length<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>entrances<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>destinationTag <span class="token operator">==</span> destinationTag<span class="token punctuation">)</span><span class="token comment">//ç›®çš„åœ°ä¼ é€é—¨æ ‡ç­¾åŒ¹é…çš„è¯</span>                <span class="token keyword">return</span> entrances<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦å¤–å½“æˆ‘ä»¬ç©å®¶åˆ°è¾¾ä¼ é€é—¨ï¼Œæˆ‘å¸Œæœ›å®ƒå¯ä»¥æŒ‰é”®è§¦å‘ä¼ é€çš„ï¼Œæ‰€ä»¥è¿™é‡Œå»åˆ°<code>TransitionPoint.cs</code></p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//è§¦å‘å™¨è®¾ç½®</span><span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">bool</span></span> canTrans<span class="token punctuation">;</span><span class="token comment">//æ˜¯å¦è§¦å‘ä¼ é€</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetKeyDown</span><span class="token punctuation">(</span>KeyCode<span class="token punctuation">.</span>E<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> canTrans<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//æŒ‰é”®è§¦å‘ä¼ é€</span>        SceneController<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">TransitiToDestination</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿˜æœ‰ä¸€ä¸ªå·¥ä½œå°±æ˜¯è¦æŠŠæˆ‘ä»¬çš„<code>TransitionDestination.cs</code>ä½œä¸ºç»„ä»¶æ·»åŠ åœ¨ä¼ é€é—¨å­å¯¹è±¡çš„ç‚¹ä¸Š</p><img src="https://i.loli.net/2021/08/02/3Jm9QXySOEiqdRF.png" style="zoom:80%;" /><img src="https://i.loli.net/2021/08/02/Hen9PBroRJYcFjp.png" style="zoom:80%;" /><p>è¿™ä¸ªç‚¹æ˜¯ç”¨æ¥è®¾ç½®å½“å‰çš„ç‚¹æ˜¯å±äºå“ªä¸€ä¸ªæ ‡ç­¾çš„ï¼Œæˆ‘ä»¬å°±æŠŠä¸€ä¸ªä¼ é€é—¨å½“åšå…¥å£è®¾ä¸º<code>ENTER</code>ï¼Œå¦ä¸€ä¸ªä¼ é€é—¨å½“åšç›®çš„åœ°è®¾ä¸º<code>A</code></p><p>å¦å¤–å»åˆ°ä¼ é€é—¨ä¸­ï¼Œç›®çš„åœ°ä¹Ÿè¦è¿›è¡Œå¯¹åº”çš„è®¾ç½®ï¼Œå…¥å£ä¼ é€é—¨çš„ç›®çš„åœ°æ˜¯<code>A</code>ï¼Œåè¿‡æ¥å¦å¤–ä¸€ä¸ªä¼ é€é—¨æƒ³è¿‡æ¥å°±è¦è®¾ç½®ç›®çš„åœ°ä¸º<code>ENTER</code></p><p><strong>æ³¨æ„</strong>ï¼šæˆ‘ä»¬æœ€å¥½ä¸è¦è®¾ç½®å¤šä¸ªåŒä¸€æ ‡ç­¾çš„ä¼ é€é—¨ï¼Œå¯èƒ½ä¼šå‡ºç°é—®é¢˜</p><p>æœ€åï¼Œå»ºç«‹ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¹¶æŠŠ<code>SceneController.cs</code>ä½œä¸ºç»„ä»¶é™„ä¸Šå»</p><img src="https://i.loli.net/2021/08/02/caN1CyLrJU76bnI.png" style="zoom:80%;" /><h1 id="Triggeræ— æ³•è§¦å‘é—®é¢˜"><a href="#Triggeræ— æ³•è§¦å‘é—®é¢˜" class="headerlink" title="Triggeræ— æ³•è§¦å‘é—®é¢˜"></a>Triggeræ— æ³•è§¦å‘é—®é¢˜</h1><p>å¦‚æœå‡½æ•°å†…çš„Triggeräº‹ä»¶æ²¡æœ‰è§¦å‘çš„è¯ï¼Œå¯èƒ½æ˜¯ç©å®¶ä¸Šæ²¡æœ‰æ·»åŠ é’¢ä½“çš„åŸå› ï¼ŒæŠŠé’¢ä½“æ·»åŠ åœ¨ä¸»åŠ¨ç¢°æ’çš„ç‰©ä½“ä¸Šï¼ˆè¿™é‡Œæ˜¯ç©å®¶ï¼‰ï¼Œç„¶åæŠŠä¼ é€é—¨å’Œç©å®¶çš„ç¢°æ’ä½“ç»„ä»¶ä¸­<code>IsTrigger</code>å‹¾é€‰ä¸Šå°±å¯ä»¥äº†</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å®ç°åŒåœºæ™¯çš„ä¼ é€æ•ˆæœ&lt;/p&gt;
&lt;h1 id=&quot;è°ƒæ•´ä¼ é€é—¨&quot;&gt;&lt;a href=&quot;#è°ƒæ•´ä¼ é€é—¨&quot; class=&quot;headerlink&quot; title=&quot;è°ƒæ•´ä¼ é€é—¨&quot;&gt;&lt;/a&gt;è°ƒæ•´ä¼ é€é—¨&lt;/h1&gt;&lt;p&gt;åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬è¦æŠŠä¸åŒçš„ä¼ é€é—¨æ‘†æ”¾å¥½å…ˆ&lt;/p&gt;
&lt;p&gt;å¦å¤–æˆ‘ä»¬å¯èƒ½ä¼šå‘ç°</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°25-åˆ¶ä½œä¼ é€é—¨</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B025-%E5%88%B6%E4%BD%9C%E4%BC%A0%E9%80%81%E9%97%A8/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B025-%E5%88%B6%E4%BD%9C%E4%BC%A0%E9%80%81%E9%97%A8/</id>
    <published>2021-08-01T01:53:22.000Z</published>
    <updated>2021-08-01T03:53:51.612Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»¬è¿™ä¸€ç« æ¥åˆ¶ä½œä¸€ä¸ªä¼ é€é—¨ä»¥ä¾›åé¢ç©å®¶åˆ‡æ¢ä¸åŒåœºæ™¯æ—¶ä½¿ç”¨</p><h1 id="åˆ¶ä½œä¼ é€é—¨Shader"><a href="#åˆ¶ä½œä¼ é€é—¨Shader" class="headerlink" title="åˆ¶ä½œä¼ é€é—¨Shader"></a>åˆ¶ä½œä¼ é€é—¨Shader</h1><p>é¦–å…ˆå°±æ˜¯è¦æ¥åˆ¶ä½œä¼ é€é—¨çš„Shaderï¼Œæ–°å»ºä¸€ä¸ª<code>Lit Shader Graph</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰å…‰å½±å“çš„shaderï¼Œèœå•ä¸­è¿˜æœ‰ä¸€ä¸ªå«åšUnlit Shader Graphå°±æ˜¯æ²¡æœ‰å…‰å½±å“çš„</p><p>è¿™é‡Œå»ºå¥½åèµ·åä¸º<code>Portal Shader</code></p><img src="https://i.loli.net/2021/08/01/pd7nMhKZHVBm4ar.png" style="zoom:80%;" /><p>æ³¨æ„é‡Œè¾¹çš„è®¾ç½®ï¼ŒSurfaceé€‰æ‹©<code>Transparent</code>å°±æ˜¯æœ‰é€æ˜é€šé“çš„æ„æ€ï¼Œç„¶åå‹¾é€‰<code>Two Sided</code>æ˜¾ç¤ºä¸¤é¢</p><img src="https://i.loli.net/2021/08/01/k7eZSNDKwTt2Y43.png" style="zoom:80%;" /><p>è¿™é‡Œç›´æ¥ä¸Šåšå¥½çš„å›¾ï¼Œé¢œè‰²çš„å±æ€§é¢æ¿ä¸­æ³¨æ„è¦é€‰æ‹©<code>HDR</code></p><img src="https://i.loli.net/2021/08/01/nwoQLuWKhYSR8lp.png" style="zoom:80%;" /><p>åšå¥½åç‚¹å‡»å·¦ä¸Šè§’<code>Save Asset</code>ä¿å­˜ï¼Œç„¶åå³é”®<code>Shder Graph</code>åˆ›å»ºä¸ºä¸€ä¸ª<code>Materials</code></p><img src="https://i.loli.net/2021/08/01/ecxz9EY5KfGgMOq.png" style="zoom:80%;" /><p>è¿™æ ·ä¸€ä¸ªä¼ é€é—¨çš„Shaderå°±åˆ›å»ºå¥½äº†</p><h1 id="åˆ¶ä½œä¼ é€é—¨"><a href="#åˆ¶ä½œä¼ é€é—¨" class="headerlink" title="åˆ¶ä½œä¼ é€é—¨"></a>åˆ¶ä½œä¼ é€é—¨</h1><p>å›åˆ°åœ°å›¾ä¸Šï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>Quad</code></p><img src="https://i.loli.net/2021/08/01/1ULfhYbuIgzD529.png" style="zoom:80%;" /><p>ç„¶åæŠŠåˆšåˆšçš„ä¼ é€é—¨æè´¨é™„ä¸Šå»ï¼Œç„¶åå°±å¯ä»¥çœ‹åˆ°ä¼ é€é—¨çš„é›å½¢äº†</p><img src="https://i.loli.net/2021/08/01/oGMurVFip1O8sjA.png" style="zoom:80%;" /><p>ä¹‹åå¯ä»¥åˆ›å»ºä¸€ä¸ªå­å¯¹è±¡ï¼Œè¡¨ç¤ºä¼ é€ç‚¹ï¼Œä»¥åå½“ç©å®¶è§¦ç¢°è¿™ä¸ªç‚¹ä¾¿å¯ä»¥è§¦å‘ä¼ é€äº‹ä»¶</p><img src="https://i.loli.net/2021/08/01/z65KBjWylxAvGIo.png" style="zoom:80%;" /><p>å¦‚å›¾æˆ‘è¿˜å°†è¿™ä¸ªç‚¹é™„ä¸Šäº†ä¸€ä¸ªè“è‰²å›¾æ ‡ï¼Œä»£è¡¨è¿™ä¸¤ä¸ªä¼ é€é—¨æ˜¯äº’é€šçš„ï¼Œä¸€å¯¹çš„ï¼Œå¯ä»¥èµ·åˆ°ä¸€ä¸ªæ ‡è®°ä½œç”¨</p><h1 id="ç¼–å†™ä¼ é€é—¨åŸºæœ¬ä»£ç "><a href="#ç¼–å†™ä¼ é€é—¨åŸºæœ¬ä»£ç " class="headerlink" title="ç¼–å†™ä¼ é€é—¨åŸºæœ¬ä»£ç "></a>ç¼–å†™ä¼ é€é—¨åŸºæœ¬ä»£ç </h1><p>è¿™é‡Œç¼–å†™ä¸€ä¸‹åŸºæœ¬çš„ä¼ é€é—¨ä»£ç ï¼Œè¯¦ç»†çš„ä»£ç å®Œå–„ç•™åœ¨ä¸‹ä¸€ç« èŠ‚</p><img src="https://i.loli.net/2021/08/01/aVGXZyRzq36d8pt.png" style="zoom:80%;" /><p>è¿™é‡Œçš„<code>TransitionPoint</code>æŒ‚è½½åœ¨ä¼ é€é—¨ä¸Šï¼Œè€Œ<code>TransitionDestination</code>æŒ‚è½½åœ¨è“è‰²çš„ç‚¹ä¸Š</p><p>æˆ‘ä»¬å…ˆæ¥ç¼–è¾‘TransitionPoint.cs</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//TransitionPoint.cs</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransitionPoint</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span><span class="token punctuation">&#123;</span>        <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">TransitionType</span><span class="token punctuation">&#123;</span><span class="token comment">//ä¼ é€çŠ¶æ€</span>        SameScene<span class="token punctuation">,</span>DifferentScene    <span class="token punctuation">&#125;</span>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Transition Infoï¼ˆä¼ é€é—¨è®¾ç½®ï¼‰"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span></span> sceneName<span class="token punctuation">;</span><span class="token comment">//è®°å½•åœºæ™¯åç§°</span>    <span class="token keyword">public</span> <span class="token class-name">TransitionType</span> transitionType<span class="token punctuation">;</span><span class="token comment">//è®°å½•ä¼ é€çŠ¶æ€ï¼ŒåŒåœºæ™¯ä¼ é€å°±å¤–è¾¹é€‰æ‹©ç¬¬ä¸€ä¸ªï¼Œä¸åŒåœºæ™¯å°±é€‰æ‹©ç¬¬äºŒä¸ª</span>    <span class="token keyword">public</span> <span class="token class-name">TransitionDestination<span class="token punctuation">.</span>DestinationTag</span> destinationTag<span class="token punctuation">;</span><span class="token comment">//ä¼ é€ç‚¹ç›®çš„åœ°</span>    <span class="token comment">//è§¦å‘å™¨è®¾ç½®</span>    <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">bool</span></span> canTrans<span class="token punctuation">;</span><span class="token comment">//æ˜¯å¦è§¦å‘ä¼ é€</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnTriggerStay</span><span class="token punctuation">(</span><span class="token class-name">Collider</span> other<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//ç©å®¶åœ¨ä¼ é€é—¨åŒºåŸŸå†…</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>other<span class="token punctuation">.</span><span class="token function">CompareTag</span><span class="token punctuation">(</span><span class="token string">"Player"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            canTrans <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnTriggerExit</span><span class="token punctuation">(</span><span class="token class-name">Collider</span> other<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//ç©å®¶ç¦»å¼€äº†ä¼ é€é—¨åŒºåŸŸ</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>other<span class="token punctuation">.</span><span class="token function">CompareTag</span><span class="token punctuation">(</span><span class="token string">"Player"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            canTrans <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ä¼ é€ç‚¹ç›®çš„åœ°å¯¹åº”çš„åœ¨TransitionDestination.csä¸­</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//TransitionDestination.cs</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransitionDestination</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">DestinationTag</span><span class="token punctuation">&#123;</span><span class="token comment">//ä¼ é€ç‚¹æ ‡ç­¾</span>        ENTER<span class="token punctuation">,</span>A<span class="token punctuation">,</span>B<span class="token punctuation">,</span>C    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">DestinationTag</span> destinationTag<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œçš„A,B,Cå¯ä»¥è‡ªè¡Œä¿®æ”¹ï¼Œè¡¨ç¤ºçš„æ˜¯ä¸åŒä¼ é€é—¨ä¸­çš„ä¸åŒåœ°æ–¹ï¼Œç±»ä¼¼äºä¸€ä¸ªç«™ç‰Œ</p><p>æˆ‘ä»¬è¿˜æ³¨æ„åˆ°åœ¨å‰é¢<code>TransitionPoint.cs</code>ä¸­æœ‰è§¦å‘çš„ä»£ç ï¼Œè¿™é‡Œè¦åˆ°Unityå±æ€§é¢æ¿ä¸­æŠŠè§¦å‘<code>isTrigger</code>é€‰é¡¹å‹¾ä¸Šï¼Œå¦åˆ™ä¸èƒ½è§¦å‘<code>OnTriggerStay()</code>å’Œ<code>OnTriggerExit()</code>æ–¹æ³•</p><img src="https://i.loli.net/2021/08/01/G7DPlvBtNd5Lw9Y.png" style="zoom:80%;" /><p>å½“ç„¶ï¼Œç°åœ¨ç”¨åˆ°çš„æ˜¯<code>Mesh Collider</code>ï¼Œè¿™é‡Œè§¦å‘é¢ç§¯åªæ˜¯ä¸€ä¸ªå¹³é¢ï¼Œæˆ‘ä»¬å¯ä»¥æ¢æˆ<code>Box Collider</code>ï¼Œè®©å®ƒçš„è§¦å‘é¢ç§¯æ›´å¤§ä¸€äº›</p><img src="https://i.loli.net/2021/08/01/mPRClNHWdA6jufi.png" style="zoom:80%;" /><p>å¼„å¥½è¿™äº›åï¼Œè®°å¾—æŠŠä¼ é€é—¨ä¿å­˜ä¸ºä¸€ä¸ªç´ æ</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æˆ‘ä»¬è¿™ä¸€ç« æ¥åˆ¶ä½œä¸€ä¸ªä¼ é€é—¨ä»¥ä¾›åé¢ç©å®¶åˆ‡æ¢ä¸åŒåœºæ™¯æ—¶ä½¿ç”¨&lt;/p&gt;
&lt;h1 id=&quot;åˆ¶ä½œä¼ é€é—¨Shader&quot;&gt;&lt;a href=&quot;#åˆ¶ä½œä¼ é€é—¨Shader&quot; class=&quot;headerlink&quot; title=&quot;åˆ¶ä½œä¼ é€é—¨Shader&quot;&gt;&lt;/a&gt;åˆ¶ä½œä¼ é€é—¨Shader&lt;/h1&gt;&lt;</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°24-åˆ¶ä½œç©å®¶çŠ¶æ€æ¡</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B024-%E5%88%B6%E4%BD%9C%E7%8E%A9%E5%AE%B6%E7%8A%B6%E6%80%81%E6%9D%A1/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B024-%E5%88%B6%E4%BD%9C%E7%8E%A9%E5%AE%B6%E7%8A%B6%E6%80%81%E6%9D%A1/</id>
    <published>2021-07-31T02:35:09.000Z</published>
    <updated>2021-07-31T03:56:36.736Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç« æ¥åˆ¶ä½œç©å®¶çš„çŠ¶æ€æ¡ï¼Œå¦‚è¡€é‡æ¡ï¼Œç»éªŒæ¡ç­‰</p><h1 id="ç¼–è¾‘UIå¸ƒå±€"><a href="#ç¼–è¾‘UIå¸ƒå±€" class="headerlink" title="ç¼–è¾‘UIå¸ƒå±€"></a>ç¼–è¾‘UIå¸ƒå±€</h1><p>ç¬¬ä¸€æ­¥ä¹Ÿæ˜¯å»ºç«‹ä¸€ä¸ªç”»å¸ƒï¼Œæ¨¡å¼ä½¿ç”¨é»˜è®¤çš„<code>Screen Space</code>è¦†ç›–å±å¹•</p><p>å€¼å¾—æ³¨æ„æ˜¯ä¸ºäº†ä½¿çŠ¶æ€æ¡å¯ä»¥éšç€å±å¹•çš„åˆ†è¾¨ç‡å¤§å°è€Œåˆ‡æ¢ï¼Œæˆ‘ä»¬çš„<code>UI Scale Mode</code>è¦è®¾ç½®æˆ<code>Scale With Scree</code></p><img src="https://www.hualigs.cn/image/6104bb2a28b1d.jpg" style="zoom:80%;" /><p>ä¹‹ååˆ›å»ºå¥½UIï¼Œå¯ä»¥åœ¨<code>Scene</code>è§†å›¾çš„2Dæ¨¡å¼ä¸‹è°ƒæ•´åˆ°åˆé€‚çš„ä½ç½®ï¼Œç„¶ååœ¨<code>Game</code>è§†å›¾ä¸‹é¢„è§ˆæ•ˆæœï¼Œå¯ä»¥è‡ªè¡Œå¤šå¤šå°è¯•</p><p>æœ€åçš„æ•ˆæœå¦‚ä¸‹</p><img src="https://i.loli.net/2021/07/31/xh2a6d1GFWIAQB3.png" style="zoom:80%;" /><p>æ³¨æ„è¿™é‡Œçš„æ–‡å­—æˆ‘ç”¨äº†è‡ªå®šä¹‰çš„å­—ä½“ï¼Œåœ¨Unityä¸­åªç”¨æŠŠä½ æƒ³è¦ç”¨çš„ç‰©ä½“æ‹–æ‹½è¿›æ¥åˆ†ç±»å¥½ï¼Œå°±å¯ä»¥ç›´æ¥åœ¨æ–‡å­—UIè®¾ç½®é¢æ¿ä¸Šé€‰æ‹©ä½¿ç”¨äº†</p><h1 id="ç¼–å†™ä»£ç "><a href="#ç¼–å†™ä»£ç " class="headerlink" title="ç¼–å†™ä»£ç "></a>ç¼–å†™ä»£ç </h1><p>æ¥ä¸‹æ¥å°±æ˜¯ç¼–å†™ä»£ç æ¥ç®¡ç†æˆ‘ä»¬çš„UIäº†</p><img src="https://i.loli.net/2021/07/31/WEluxrQkRazFKf5.png" style="zoom:80%;" /><p>ç„¶åæŠŠä»£ç ä½œä¸ºç»„ä»¶æ·»åŠ åˆ°ä¸Šé¢åˆ›å»ºçš„ç”»å¸ƒå½“ä¸­ï¼Œæ¥ç€å°±æ˜¯ç¼–å†™ä»£ç äº†</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>UI</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PlayerHealthUI</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span><span class="token punctuation">&#123;</span>    <span class="token comment">//ç”±äºæˆ‘ä»¬çš„äººç‰©ä¿¡æ¯æ æœ€ç»ˆä¼šä¿å­˜ä¸ºä¸€ä¸ªprefab</span>    <span class="token comment">//å› æ­¤æˆ‘ä»¬å¯ä»¥ä¸ä½¿ç”¨æ‹–æ‹½gameobjectæ–¹å¼æ¥è·å¾—å¯¹è±¡</span>    <span class="token comment">//å¯ä»¥ç›´æ¥ä½¿ç”¨è·å¾—å¯¹è±¡çš„å­å¯¹è±¡æ–¹å¼</span>    <span class="token class-name">Text</span> levelText<span class="token punctuation">;</span><span class="token comment">//è·å¾—textæ–‡æœ¬</span>    <span class="token class-name">Image</span> healthSlider<span class="token punctuation">;</span><span class="token comment">//ç”Ÿå‘½å€¼æ‹–æ‹½æ¡</span>    <span class="token class-name">Image</span> expSlider<span class="token punctuation">;</span><span class="token comment">//ç»éªŒæ‹–æ‹½æ¡</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//æ³¨æ„GetChildå¡«å†™çš„å‚æ•°ç±»ä¼¼äºæ•°ç»„ä¸‹æ ‡ï¼Œç¬¬ä¸€ä¸ªå¯¹è±¡çš„ç´¢å¼•æ˜¯0</span>        levelText <span class="token operator">=</span> transform<span class="token punctuation">.</span><span class="token function">GetChild</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Text<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å¾—æ–‡å­—å¯¹è±¡</span>        healthSlider <span class="token operator">=</span> transform<span class="token punctuation">.</span><span class="token function">GetChild</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetChild</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Image<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å¾—ç”Ÿå‘½æ‹–æ‹½æ¡</span>        expSlider <span class="token operator">=</span> transform<span class="token punctuation">.</span><span class="token function">GetChild</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetChild</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Image<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å¾—ç»éªŒå€¼æ‹–æ‹½æ¡</span>    <span class="token punctuation">&#125;</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">UpdateExp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">UpdateHealth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        levelText<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">"Level  "</span> <span class="token operator">+</span>             GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>playerStates<span class="token punctuation">.</span>characterData<span class="token punctuation">.</span>currentLevel<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token string">"00"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//00æ˜¯è§„å®šç»™å®ƒçš„ä¸€ä¸ªæ ¼å¼ï¼Œæ¯”å¦‚01 02....</span>    <span class="token punctuation">&#125;</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">UpdateHealth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//å¯ä»¥é€šè¿‡GameManagerç±»æ¥è·å¾—playerçš„states</span>        <span class="token class-name"><span class="token keyword">float</span></span> sliderPercent <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>            GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>playerStates<span class="token punctuation">.</span>currentHealth<span class="token operator">/</span>            GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>playerStates<span class="token punctuation">.</span>MaxHealth<span class="token punctuation">;</span>        <span class="token comment">//æ›´æ–°å›¾ç‰‡å¡«å……</span>        healthSlider<span class="token punctuation">.</span>fillAmount <span class="token operator">=</span> sliderPercent<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">UpdateExp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name"><span class="token keyword">float</span></span> sliderPercent <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>            GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>playerStates<span class="token punctuation">.</span>characterData<span class="token punctuation">.</span>currentExp<span class="token operator">/</span>            GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>playerStates<span class="token punctuation">.</span>characterData<span class="token punctuation">.</span>baseExp<span class="token punctuation">;</span>        <span class="token comment">//æ›´æ–°å›¾ç‰‡å¡«å……</span>        expSlider<span class="token punctuation">.</span>fillAmount <span class="token operator">=</span> sliderPercent<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæ˜¯å€ŸåŠ©äº†<code>GameManager.cs</code>ä¸­çš„å•ä¾‹æ¨¡å¼å®ä¾‹åŒ–çš„æ–¹å¼æ¥è·å¾—playerçš„çŠ¶æ€ä¿¡æ¯ï¼Œå› ä¸ºå…ˆå‰æˆ‘ç”¨äº†å¤–ç•Œæ³¨å†Œçš„æ–¹å¼æŠŠç©å®¶çš„ä¿¡æ¯èµ‹äºˆäº†GameManageré‡Œé¢çš„æˆå‘˜å˜é‡</p><p>åˆ°è¿™æˆ‘ä»¬å°±å¤§åŠŸå‘Šæˆäº†</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ¬ç« æ¥åˆ¶ä½œç©å®¶çš„çŠ¶æ€æ¡ï¼Œå¦‚è¡€é‡æ¡ï¼Œç»éªŒæ¡ç­‰&lt;/p&gt;
&lt;h1 id=&quot;ç¼–è¾‘UIå¸ƒå±€&quot;&gt;&lt;a href=&quot;#ç¼–è¾‘UIå¸ƒå±€&quot; class=&quot;headerlink&quot; title=&quot;ç¼–è¾‘UIå¸ƒå±€&quot;&gt;&lt;/a&gt;ç¼–è¾‘UIå¸ƒå±€&lt;/h1&gt;&lt;p&gt;ç¬¬ä¸€æ­¥ä¹Ÿæ˜¯å»ºç«‹ä¸€ä¸ªç”»å¸ƒï¼Œæ¨¡å¼ä½¿ç”¨é»˜è®¤çš„&lt;code&gt;</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°23-åˆ¶ä½œç©å®¶çš„å‡çº§</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B023-%E5%88%B6%E4%BD%9C%E7%8E%A9%E5%AE%B6%E7%9A%84%E5%8D%87%E7%BA%A7/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B023-%E5%88%B6%E4%BD%9C%E7%8E%A9%E5%AE%B6%E7%9A%84%E5%8D%87%E7%BA%A7/</id>
    <published>2021-07-30T02:05:51.000Z</published>
    <updated>2021-07-31T04:10:05.890Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æœ¬ç« ä¸­æˆ‘ä»¬æ¥åˆ¶ä½œç©å®¶çš„ç»éªŒç³»ç»Ÿï¼Œå¹¶é™„æœ‰å‡çº§åŠŸèƒ½</p><h1 id="æ‰©å±•CharacterData-SO"><a href="#æ‰©å±•CharacterData-SO" class="headerlink" title="æ‰©å±•CharacterData_SO"></a>æ‰©å±•CharacterData_SO</h1><p>æˆ‘ä»¬é¦–å…ˆæ‰“å¼€<code>CharacterData_SO.cs</code>æ·»åŠ ä¸€äº›é¢å¤–çš„å±æ€§è¿›å»ï¼ŒåŒæ—¶å†™ä¸€ä¸ªå‡çº§æ—¶å¤„ç†çš„æ–¹æ³•</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CreateAssetMenu</span><span class="token attribute-arguments"><span class="token punctuation">(</span>fileName <span class="token operator">=</span> <span class="token string">"New Data"</span><span class="token punctuation">,</span>menuName <span class="token operator">=</span> <span class="token string">"Character States/Data"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CharacterData_SO</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ScriptableObject</span></span><span class="token punctuation">&#123;</span>    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"States Infoï¼ˆå±æ€§ä¿¡æ¯ï¼‰"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> maxHealth<span class="token punctuation">;</span><span class="token comment">//æœ€å¤§ç”Ÿå‘½å€¼</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> currentHealth<span class="token punctuation">;</span><span class="token comment">//å½“å‰ç”Ÿå‘½å€¼</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> baseDefence<span class="token punctuation">;</span><span class="token comment">//åŸºç¡€é˜²å¾¡å€¼</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> currentDefence<span class="token punctuation">;</span><span class="token comment">//å½“å‰é˜²å¾¡å€¼</span>    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Killï¼ˆå‡»æ€ä¿¡æ¯ï¼‰"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> killPoint<span class="token punctuation">;</span><span class="token comment">//å‡»æ€åæ‰è½çš„ç»éªŒå€¼</span>    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Levelï¼ˆç­‰çº§ä¿¡æ¯ï¼‰"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> currentLevel<span class="token punctuation">;</span><span class="token comment">//å½“å‰ç­‰çº§</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> maxLevel<span class="token punctuation">;</span><span class="token comment">//æœ€å¤§ç­‰çº§æ•°</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> baseExp<span class="token punctuation">;</span><span class="token comment">//åŸºç¡€ç»éªŒå€¼</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> currentExp<span class="token punctuation">;</span><span class="token comment">//å½“å‰ç»éªŒå€¼</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> levelBuff<span class="token punctuation">;</span><span class="token comment">//æ¯æ¬¡å‡çº§æ•´ä½“å±æ€§æå‡çš„ç™¾åˆ†æ¯”</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">float</span></span> LevelMultiplier<span class="token punctuation">&#123;</span>        <span class="token comment">//å‡çº§æå‡å±æ€§åŠ çš„å€ç‡</span>        <span class="token keyword">get</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token punctuation">(</span>currentLevel<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> levelBuff<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">UpdateExp</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> point<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        currentExp <span class="token operator">+=</span> point<span class="token punctuation">;</span><span class="token comment">//æŠŠå¤–ç•Œçš„ç»éªŒåŠ è¿›æ¥</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>currentExp <span class="token operator">>=</span> baseExp<span class="token punctuation">)</span>            <span class="token function">LevelUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">LevelUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//è¿™ä¸ªæ–¹æ³•ä¸­æ·»åŠ å‡çº§æ—¶æƒ³æå‡çš„æ•°æ®</span>        <span class="token comment">//å°†current+1é™åˆ¶åœ¨[0,maxLevel]é—­åŒºé—´ä¸­</span>        currentLevel <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Clamp</span><span class="token punctuation">(</span>currentLevel<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>maxLevel<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å°†ç»éªŒå’Œç”Ÿå‘½å€¼æŒ‰ç…§æ¯ä¸€ç­‰çº§ä¸åŒå€ç‡å¢é•¿ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨å›ºå®šå€¼level buffï¼‰</span>        baseExp <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>baseExp<span class="token operator">*</span>LevelMultiplier<span class="token punctuation">)</span><span class="token punctuation">;</span>        maxHealth <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>maxHealth <span class="token operator">*</span> LevelMultiplier<span class="token punctuation">)</span><span class="token punctuation">;</span>        currentHealth <span class="token operator">=</span> maxHealth<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ç€å†å»åˆ°<code>CharacterStates.cs</code>åšæœ€åçš„ä¿®æ”¹</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TakeDamage</span><span class="token punctuation">(</span><span class="token class-name">CharacterStates</span> attacker<span class="token punctuation">,</span><span class="token class-name">CharacterStates</span> defener<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//è®¡ç®—ä¼¤å®³æ•°å€¼</span>    <span class="token comment">//å½“å‰æ”»å‡»åŠ›å‡å»ç›®æ ‡çš„é˜²å¾¡åŠ›ï¼Œå¦‚æœé˜²å¾¡åŠ›è¿‡é«˜å°±æ˜¯0ä¼¤å®³</span>    <span class="token class-name"><span class="token keyword">int</span></span> damage <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>attacker<span class="token punctuation">.</span><span class="token function">CurrentDamage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>defener<span class="token punctuation">.</span>currentDefence<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    currentHealth <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>currentHealth<span class="token operator">-</span>damage<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¡€é‡ä¹Ÿæ˜¯æœ€å°å€¼é”åœ¨0</span>    Debug<span class="token punctuation">.</span><span class="token function">LogFormat</span><span class="token punctuation">(</span><span class="token string">"&#123;0&#125;æ”»å‡»äº†&#123;1&#125;ï¼Œé€ æˆäº†&#123;2&#125;ç‚¹ä¼¤å®³"</span><span class="token punctuation">,</span>attacker<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span>name<span class="token punctuation">,</span>defener<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span>name<span class="token punctuation">,</span>damage<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>attacker<span class="token punctuation">.</span>isCritical<span class="token punctuation">)</span><span class="token comment">//åˆ¤æ–­è¢«æ‰“è€…æ˜¯å¦å—åˆ°æš´å‡»å¹¶ä¸”æ’­æ”¾å—ä¼¤åŠ¨ç”»</span>        defener<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Animator<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetTrigger</span><span class="token punctuation">(</span><span class="token string">"Hit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//å°†æ¥è¦åšçš„äº‹æƒ…</span>    <span class="token comment">//è¡€é‡æ¡UI</span>    UpdateHealthBarOnAttack<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>currentHealth<span class="token punctuation">,</span>MaxHealth<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¦‚æœäº‹ä»¶ä¸ä¸ºç©ºåˆ™è°ƒç”¨</span>    <span class="token comment">//æ‰“æ­»æ€ªååŠ ç»éªŒ</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>defener<span class="token punctuation">.</span>currentHealth <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>        attacker<span class="token punctuation">.</span>characterData<span class="token punctuation">.</span><span class="token function">UpdateExp</span><span class="token punctuation">(</span>defener<span class="token punctuation">.</span>characterData<span class="token punctuation">.</span>killPoint<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TakeDamage</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> damage<span class="token punctuation">,</span><span class="token class-name">CharacterStates</span> defener<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//çŸ³å¤´åå‡»çŸ³å¤´äººçš„æ”»å‡»æ–¹å¼</span>    <span class="token class-name"><span class="token keyword">int</span></span> dam <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>damage <span class="token operator">-</span> defener<span class="token punctuation">.</span>currentDefence<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    defener<span class="token punctuation">.</span>currentHealth <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>defener<span class="token punctuation">.</span>currentHealth <span class="token operator">-</span> dam<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//è¡€æ¡äº‹ä»¶</span>    UpdateHealthBarOnAttack<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>currentHealth<span class="token punctuation">,</span>MaxHealth<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¦‚æœäº‹ä»¶ä¸ä¸ºç©ºåˆ™è°ƒç”¨</span>    <span class="token comment">//TODO:åŠ ç»éªŒ</span>    <span class="token comment">//å¯ä»¥é€šè¿‡GameManageræ¥è®¿é—®ç©å®¶çš„å±æ€§</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>defener<span class="token punctuation">.</span>currentHealth <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>    GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>playerStates<span class="token punctuation">.</span>characterData<span class="token punctuation">.</span><span class="token function">UpdateExp</span><span class="token punctuation">(</span>defener<span class="token punctuation">.</span>characterData<span class="token punctuation">.</span>killPoint<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åæˆ‘ä»¬å»åˆ°äººç‰©çš„<code>PlayerData</code>è¿˜æœ‰æ¯ä¸ªæ•Œäººçš„<code>Data</code>æ·»åŠ å±æ€§å°±å¯ä»¥äº†</p><img src="https://p6-tt.byteimg.com/origin/pgc-image/bc33680758884eb88e5bfed71402eaa5.png" alt="1.png" style="zoom:80%;" />]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åœ¨æœ¬ç« ä¸­æˆ‘ä»¬æ¥åˆ¶ä½œç©å®¶çš„ç»éªŒç³»ç»Ÿï¼Œå¹¶é™„æœ‰å‡çº§åŠŸèƒ½&lt;/p&gt;
&lt;h1 id=&quot;æ‰©å±•CharacterData-SO&quot;&gt;&lt;a href=&quot;#æ‰©å±•CharacterData-SO&quot; class=&quot;headerlink&quot; title=&quot;æ‰©å±•CharacterData_SO&quot;&gt;&lt;/a&gt;</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°22-åˆ¶ä½œè¡€é‡æ¡UI</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B022-%E5%88%B6%E4%BD%9C%E8%A1%80%E9%87%8F%E6%9D%A1UI/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B022-%E5%88%B6%E4%BD%9C%E8%A1%80%E9%87%8F%E6%9D%A1UI/</id>
    <published>2021-07-29T01:28:59.000Z</published>
    <updated>2021-07-29T10:01:08.942Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸€ç« æˆ‘ä»¬æ¥åˆ¶ä½œä¸€ä¸‹æ•Œäººçš„è¡€é‡æ¡</p><h1 id="åˆ›å»ºè¡€æ¡UI"><a href="#åˆ›å»ºè¡€æ¡UI" class="headerlink" title="åˆ›å»ºè¡€æ¡UI"></a>åˆ›å»ºè¡€æ¡UI</h1><h2 id="åˆ›å»ºè¡€æ¡åŸºç¡€å½¢çŠ¶ï¼ˆCanvasä¸Imageï¼‰"><a href="#åˆ›å»ºè¡€æ¡åŸºç¡€å½¢çŠ¶ï¼ˆCanvasä¸Imageï¼‰" class="headerlink" title="åˆ›å»ºè¡€æ¡åŸºç¡€å½¢çŠ¶ï¼ˆCanvasä¸Imageï¼‰"></a>åˆ›å»ºè¡€æ¡åŸºç¡€å½¢çŠ¶ï¼ˆCanvasä¸Imageï¼‰</h2><p>é¦–å…ˆåœ¨<code>Hierachy</code>çª—å£ä¸­åˆ›å»ºä¸€ä¸ª<code>Canvas</code>ï¼ˆç”»å¸ƒï¼‰ï¼Œå¹¶å°†å®ƒå‘½åä¸º<code>HealthBarCanvas</code></p><img src="https://p26-tt.byteimg.com/origin/pgc-image/a4bddbb255de4c87825a7866dd064269.png" alt="1.png" style="zoom:80%;" /><p>ä¹‹åæˆ‘ä»¬æ”¹ä¸€ä¸‹<code>HealthBarCanvas</code>è®¾ç½®ï¼Œå¹¶æŠŠåæ ‡é‡ç½®</p><img src="https://p26-tt.byteimg.com/origin/pgc-image/7c8fa921e76f4decb29167a49ad882f1.png" alt="2.png" style="zoom:80%;" /><p>éšåæˆ‘ä»¬åœ¨è¿™ä¸ªç”»å¸ƒçš„åŸºç¡€ä¸Šåˆ›å»ºä¸€ä¸ª<code>Image</code>ï¼Œå¹¶å°†å®ƒå‘½åä¸º<code>Bar Holder</code>ï¼Œç„¶ååœ¨æŠŠå®ƒçš„åæ ‡æ”¹ä¸€ä¸‹ï¼Œæ”¹æˆåƒä¸€ä¸ªè¡€æ¡çš„å¤§å°</p><img src="https://p6-tt.byteimg.com/origin/pgc-image/48339de2f8e6417f94b09466da3b7428.png" alt="3.png" style="zoom:80%;" /><p>æˆ‘ä»¬å°±å¯ä»¥åœ¨Sceneçª—å£ä¸Šçœ‹åˆ°è¡€æ¡çš„åˆå§‹æ ·å­äº†</p><img src="https://p6-tt.byteimg.com/origin/pgc-image/ccf344e88ab44a2e92fc6563d1339523.png" alt="4.png" style="zoom:80%;" /><h2 id="åˆ›å»ºè¡€æ¡åº•å±‚å›¾åƒï¼ˆSource-Imageï¼‰"><a href="#åˆ›å»ºè¡€æ¡åº•å±‚å›¾åƒï¼ˆSource-Imageï¼‰" class="headerlink" title="åˆ›å»ºè¡€æ¡åº•å±‚å›¾åƒï¼ˆSource Imageï¼‰"></a>åˆ›å»ºè¡€æ¡åº•å±‚å›¾åƒï¼ˆSource Imageï¼‰</h2><p>æ¥ç€æˆ‘ä»¬è¦ä¸º<code>Bar Holder</code>å¯¼å…¥ä¸€ä¸ª<code>Source Image</code>ä½œä¸ºè¡€æ¡çš„åº•å±‚ï¼Œè¿™é‡Œå°±é€‰æ‹©è‡ªå·±åˆ›å»ºä¸€ä¸ªå›¾åƒä½œä¸ºå®ƒçš„åº•å±‚</p><p>é¦–å…ˆè¦æ‰“å¼€<code>Package Manager</code>å®‰è£…ä¸€ä¸‹<code>2D Sprite</code></p><img src="https://p26-tt.byteimg.com/origin/pgc-image/7c103cd1256d4e5cb07ed10165846528.png" alt="5.png" style="zoom:80%;" /><p>æ¥ç€æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè·¯å¾„ä¸“é—¨å­˜æ”¾UIç›¸å…³çš„å¯¹è±¡ï¼Œè¿™é‡Œåˆ›å»ºä¸€ä¸ª<code>Square</code>æ–¹å½¢å›¾åƒ</p><img src="https://p9-tt.byteimg.com/origin/pgc-image/73d842b512f940698760bf2547bbf82c.png" alt="6.png" style="zoom:80%;" /><p>å†æŠŠè¿™ä¸ªæ–¹å½¢å›¾åƒåº”ç”¨åœ¨åˆšåˆšçš„<code>Source Image</code>ä¸­å°±è¡Œäº†</p><p>ç”±äºç°åœ¨æˆ‘ä»¬åˆ›å»ºå‡ºæ¥çš„æ˜¯ä¸€ä¸ªè¡€æ¡çš„åº•å±‚ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æŠŠå®ƒçš„é¢œè‰²è®¾ç½®ä¸ºçº¢è‰²åº•ï¼Œå¾…ä¼šæœ‰ä¸ªä¸Šå±‚å›¾åƒè®¾ç½®æˆç»¿è‰²ï¼Œè¿™æ ·å¼„å‡ºæ¥å°±æœ‰è¡€æ¡çš„æ ·å­äº†</p><p>å› æ­¤æˆ‘ä»¬è¿™é‡ŒæŠŠé¢œè‰²æ”¹ä¸ºçº¢è‰²ï¼ˆè¿™é‡Œæˆ‘æŠŠé¢œè‰²çš„é€æ˜åº¦æ”¹æˆäº† 150 ï¼‰</p><img src="https://p3-tt.byteimg.com/origin/pgc-image/9d082235f7dc478ca60891914aaa2de1.png" alt="7.png" style="zoom:80%;" /><h2 id="åˆ›å»ºè¡€æ¡ä¸Šå±‚å›¾åƒ"><a href="#åˆ›å»ºè¡€æ¡ä¸Šå±‚å›¾åƒ" class="headerlink" title="åˆ›å»ºè¡€æ¡ä¸Šå±‚å›¾åƒ"></a>åˆ›å»ºè¡€æ¡ä¸Šå±‚å›¾åƒ</h2><p>æˆ‘ä»¬åœ¨<code>Bar Holder</code>çš„åŸºç¡€ä¸Šå†åˆ›å»ºä¸€ä¸ªå›¾åƒ<code>Image</code>ï¼Œå‘½åä¸º<code>Current Health</code>ï¼Œå¹¶å°†å®½åº¦å’Œé«˜åº¦è®¾ç½®æˆå’Œåº•å±‚ä¸€æ ·ï¼ˆ2.5å’Œ0.25ï¼‰</p><img src="https://p26-tt.byteimg.com/origin/pgc-image/13abb2c92ea14215973e66d999182fa4.png" alt="8.png" style="zoom:80%;" /><p>åŒæ—¶<code>Source Image</code>è¿˜æ˜¯å’Œåˆšåˆšä¸€æ ·ï¼Œé¢œè‰²è°ƒä¸ºç»¿è‰²</p><p>å”¯ä¸€ä¸åŒçš„æ˜¯å›¾ç‰‡çš„ç±»å‹<code>Image Type</code>è¦è°ƒä¸º<strong>å¡«å……</strong><code>Filled</code>ï¼Œå¡«å……çš„æ–¹å¼ä¸º<strong>æ°´å¹³å¡«å……</strong><code>Horizontal</code>ï¼Œä¹‹åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è°ƒèŠ‚å¡«å……æ•°é‡<code>Fill Amount</code>æ¥æ§åˆ¶ç»¿è‰²æ¡çš„é•¿åº¦ï¼Œä»è€Œä»£è¡¨è¡€é‡çš„å¤šå°‘äº†</p><img src="https://p6-tt.byteimg.com/origin/pgc-image/f5d505bfb9e74b98a2e2ffdaa4b81b15.png" alt="9.png" style="zoom:80%;" /><p>æ•ˆæœå›¾å¦‚ä¸‹</p><img src="https://p6-tt.byteimg.com/origin/pgc-image/72681600544d4713a09b34e971078333.png" alt="10.png" style="zoom:80%;" /><p>è¿™æ ·ä¸€ä¸ªç®€é™‹çš„è¡€æ¡å°±å¼„å¥½äº†ï¼Œæˆ‘ä»¬å°†å®ƒä¿å­˜ä¸ºä¸€ä¸ªç´ æ</p><img src="https://p5-tt.byteimg.com/origin/pgc-image/7d681c103df74db1921f9235c27f02e1.png" alt="11.png" style="zoom:80%;" /><h2 id="è®¾ç½®è¡€æ¡åœ¨æ•Œäººä¸Šæ–¹çš„ä½ç½®"><a href="#è®¾ç½®è¡€æ¡åœ¨æ•Œäººä¸Šæ–¹çš„ä½ç½®" class="headerlink" title="è®¾ç½®è¡€æ¡åœ¨æ•Œäººä¸Šæ–¹çš„ä½ç½®"></a>è®¾ç½®è¡€æ¡åœ¨æ•Œäººä¸Šæ–¹çš„ä½ç½®</h2><p>ç”±äºæˆ‘ä»¬æ¯ä¸ªæ•Œäººé«˜çŸ®ä¸åŒï¼Œå°±å¯¼è‡´äº†è¡€æ¡åœ¨ä¸åŒæ•Œäººçš„ä½ç½®ä¹Ÿä¸ä¸€æ ·ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬åé¢çš„ä»£ç ï¼Œè¿™é‡Œæˆ‘ä»¬è¦ä¸ºæ¯ä¸ªæ•Œäººè®¾ç½®ä¸€ä¸‹è¡€æ¡åº”è¯¥å‡ºç°çš„ä½ç½®</p><p>æœ€ç›´æ¥çš„åŠæ³•å°±æ˜¯ä¸ºæ¯ä¸ªæ•Œäººå¯¹è±¡å†åˆ›å»ºä¸€ä¸ªå­å¯¹è±¡æ¥è®°å½•è¡€æ¡ä½ç½®</p><p>æˆ‘ä»¬æ‰“å¼€<code>Prefabs ---&gt; Characters</code>ç›®å½•ç¼–è¾‘æ•Œäººç´ æï¼Œè¿™é‡Œæ‹¿å²è±å§†ä¸ºä¾‹å­</p><img src="https://p3-tt.byteimg.com/origin/pgc-image/a4ed16108baa4e62a2c591cb1d263eb6.png" alt="13.png" style="zoom:80%;" /><p>åƒä¸Šé¢å›¾ç‰‡è¿™æ ·ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>HealthBar Point</code>çš„ç©ºå¯¹è±¡æ¥è®°å½•è¡€æ¡çš„ä½ç½®ï¼Œè¿™æ ·å°±å¾ˆæ–¹ä¾¿æˆ‘ä»¬ä»£ç çš„ç¼–å†™äº†</p><p>æœ€åæŒ‰ç…§åŒæ ·çš„æ–¹å¼ç»™æ¯ä¸ªæ•Œäººéƒ½å®‰æ”¾<code>HealthBar Point</code></p><h1 id="ç¼–å†™è¡€æ¡ä»£ç "><a href="#ç¼–å†™è¡€æ¡ä»£ç " class="headerlink" title="ç¼–å†™è¡€æ¡ä»£ç "></a>ç¼–å†™è¡€æ¡ä»£ç </h1><h2 id="åˆ›å»ºäº‹ä»¶"><a href="#åˆ›å»ºäº‹ä»¶" class="headerlink" title="åˆ›å»ºäº‹ä»¶"></a>åˆ›å»ºäº‹ä»¶</h2><p>åœ¨åˆ›å»ºè¡€æ¡ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆåœ¨<code>CharacterStates.cs</code>ä¸­åˆ›å»ºä¸€ä¸ªäº‹ä»¶ï¼Œå³åœ¨é€ æˆä¼¤å®³æ—¶è¦è§¦å‘çš„è¡€æ¡å˜åŠ¨äº‹ä»¶</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//é€ æˆä¼¤å®³æ—¶è¡€æ¡æ”¹å˜çš„äº‹ä»¶</span><span class="token keyword">public</span> <span class="token keyword">event</span> <span class="token class-name">Action<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">></span></span> UpdateHealthBarOnAttack<span class="token punctuation">;</span><span class="token comment">//åœ¨é€ æˆä¼¤å®³æ—¶è°ƒç”¨</span><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TakeDamage</span><span class="token punctuation">(</span><span class="token class-name">CharacterStates</span> attacker<span class="token punctuation">,</span><span class="token class-name">CharacterStates</span> defener<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name"><span class="token keyword">int</span></span> damage <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>attacker<span class="token punctuation">.</span><span class="token function">CurrentDamage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>defener<span class="token punctuation">.</span>currentDefence<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    currentHealth <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>currentHealth<span class="token operator">-</span>damage<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Debug<span class="token punctuation">.</span><span class="token function">LogFormat</span><span class="token punctuation">(</span><span class="token string">"&#123;0&#125;æ”»å‡»äº†&#123;1&#125;ï¼Œé€ æˆäº†&#123;2&#125;ç‚¹ä¼¤å®³"</span><span class="token punctuation">,</span>attacker<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span>name<span class="token punctuation">,</span>defener<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span>name<span class="token punctuation">,</span>damage<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>attacker<span class="token punctuation">.</span>isCritical<span class="token punctuation">)</span>        defener<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Animator<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetTrigger</span><span class="token punctuation">(</span><span class="token string">"Hit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//TODO:è¡€é‡æ¡UI</span>    UpdateHealthBarOnAttack<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>currentHealth<span class="token punctuation">,</span>MaxHealth<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¦‚æœäº‹ä»¶ä¸ä¸ºç©ºåˆ™è°ƒç”¨</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TakeDamage</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> damage<span class="token punctuation">,</span><span class="token class-name">CharacterStates</span> defener<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name"><span class="token keyword">int</span></span> dam <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>damage <span class="token operator">-</span> defener<span class="token punctuation">.</span>currentDefence<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    defener<span class="token punctuation">.</span>currentHealth <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>defener<span class="token punctuation">.</span>currentHealth <span class="token operator">-</span> dam<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//è¡€æ¡äº‹ä»¶</span>    UpdateHealthBarOnAttack<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>currentHealth<span class="token punctuation">,</span>MaxHealth<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¦‚æœäº‹ä»¶ä¸ä¸ºç©ºåˆ™è°ƒç”¨</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆ›å»ºè¡€æ¡ä»£ç "><a href="#åˆ›å»ºè¡€æ¡ä»£ç " class="headerlink" title="åˆ›å»ºè¡€æ¡ä»£ç "></a>åˆ›å»ºè¡€æ¡ä»£ç </h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å†™æ§åˆ¶è¡€æ¡çš„è„šæœ¬ä»£ç </p><p>åœ¨ä¸‹å›¾ç›®å½•åˆ›å»ºä¸€ä¸ªè„šæœ¬ï¼Œèµ·åä¸º<code>HealthBarUI.cs</code></p><img src="https://p6-tt.byteimg.com/origin/pgc-image/19ea0718eaf34586b42b44476b56da6c.png" alt="12.png" style="zoom:80%;" /><p>ç„¶åæ‰“å¼€ç¼–å†™ä»£ç </p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HealthBarUI</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">GameObject</span> healthUIPrefab<span class="token punctuation">;</span><span class="token comment">//ä¾›å¤–ç•Œæä¾›ä¸€ä¸ªè¡€æ¡ç´ æ</span>    <span class="token keyword">public</span> <span class="token class-name">Transform</span> barPoint<span class="token punctuation">;</span><span class="token comment">//è®°å½•è¡€é‡æ¡è¯¥æ˜¾ç¤ºåœ¨æ•Œäººçš„å“ªä¸ªä½ç½®</span>    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"è¡€æ¡æ˜¾ç¤ºè®¾ç½®"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> alwaysVisible<span class="token punctuation">;</span><span class="token comment">//è¡€æ¡æ˜¯å¦ä¸€ç›´å¯è§</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> visibleTime<span class="token punctuation">;</span><span class="token comment">//è¡€æ¡æ˜¾ç¤ºæ—¶é—´ï¼ˆå¦‚æœä¸æ˜¯ä¸€ç›´å¯è§çš„æƒ…å†µä¸‹ï¼‰</span>    <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">float</span></span> timeLeft<span class="token punctuation">;</span><span class="token comment">//å‰©ä½™çš„æ˜¾ç¤ºæ—¶é—´</span>    <span class="token class-name">Image</span> healthSlider<span class="token punctuation">;</span><span class="token comment">//æ‹¿åˆ°è¡€æ¡ä¸Šå±‚å›¾åƒ</span>    <span class="token class-name">Transform</span> UIbar<span class="token punctuation">;</span><span class="token comment">//è®°å½•ç”Ÿæˆçš„è¡€æ¡åœ¨çš„ä½ç½®</span>    <span class="token class-name">Transform</span> cam<span class="token punctuation">;</span><span class="token comment">//æ‹¿åˆ°æ‘„åƒæœºä½ç½®ä»¥å¤„ç†è¡€æ¡ä¸€ç›´é¢å‘æˆ‘ä»¬æ‘„åƒæœº</span>    <span class="token class-name">CharacterStates</span> currentStates<span class="token punctuation">;</span><span class="token comment">//è·å–å½“å‰äººç‰©çš„states</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        currentStates <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CharacterStates<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        currentStates<span class="token punctuation">.</span>UpdateHealthBarOnAttack <span class="token operator">+=</span> UpdateHealthBar<span class="token punctuation">;</span><span class="token comment">//æ³¨å†Œäº‹ä»¶</span>    <span class="token punctuation">&#125;</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//OnEnableåœ¨æ¯æ¬¡åˆ‡æ¢åœ°å›¾æ—¶éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡</span>        cam <span class="token operator">=</span> Camera<span class="token punctuation">.</span>main<span class="token punctuation">.</span>transform<span class="token punctuation">;</span><span class="token comment">//è·å–ä¸»ç›¸æœºä½ç½®</span>        <span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token class-name">Canvas</span> canvas <span class="token keyword">in</span> <span class="token generic-method"><span class="token function">FindObjectsOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Canvas<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">//éå†æ¯ä¸€ä¸ªç”»å¸ƒ</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>renderMode <span class="token operator">==</span> RenderMode<span class="token punctuation">.</span>WorldSpace<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token comment">//æ‰¾åˆ°è¡€æ¡æ‰€åœ¨çš„ç”»å¸ƒï¼Œæœ‰å¤šç§æ–¹æ³•æ¥è·å¾—</span>                <span class="token comment">//ä¹Ÿå¯ä»¥ä¾›å¤–ç•Œæä¾›æ­¤ç”»å¸ƒï¼Œæ›´ä¸¥è°¨ä¸€ç‚¹</span>                UIbar <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>healthUIPrefab<span class="token punctuation">,</span>canvas<span class="token punctuation">.</span>transform<span class="token punctuation">)</span><span class="token punctuation">.</span>transform<span class="token punctuation">;</span>                <span class="token comment">//è·å¾—ä¸Šå±‚å›¾åƒï¼ˆç»¿è‰²æ¡ï¼‰çš„å¯¹è±¡ï¼Œä¸‹æ ‡ä¸º0</span>                healthSlider <span class="token operator">=</span> UIbar<span class="token punctuation">.</span><span class="token function">GetChild</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Image<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//æ˜¯å¦ä¸€ç›´å¯è§</span>                UIbar<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span>alwaysVisible<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">UpdateHealthBar</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> currentHealth<span class="token punctuation">,</span><span class="token class-name"><span class="token keyword">int</span></span> maxHealth<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//æ›´æ–°è¡€é‡</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>currentHealth <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">//å¦‚æœå½“å‰è¡€é‡å°äºç­‰äº0ï¼Œå°±é”€æ¯UIbar</span>            <span class="token function">Destroy</span><span class="token punctuation">(</span>UIbar<span class="token punctuation">.</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//æ¯æ¬¡æ›´æ–°æ—¶å¿…ç„¶å¯è§</span>        UIbar<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å¾—åˆ°è¡€é‡ç™¾åˆ†æ¯”</span>        <span class="token class-name"><span class="token keyword">float</span></span> sliderPercent <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>currentHealth <span class="token operator">/</span> maxHealth<span class="token punctuation">;</span>        <span class="token comment">//æ›´æ–°è¡€æ¡é•¿åº¦</span>        healthSlider<span class="token punctuation">.</span>fillAmount <span class="token operator">=</span> sliderPercent<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">LateUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//åœ¨Updateåä¸€å¸§æ‰§è¡Œ</span>        <span class="token comment">//æ›´æ–°è¡€æ¡è·Ÿéšæ•Œäººä½ç½®</span>        <span class="token comment">//è¿™é‡Œå…ˆæ£€æµ‹UIbaræœ‰æ²¡æœ‰ç»™é”€æ¯</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>UIbar <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            UIbar<span class="token punctuation">.</span>position <span class="token operator">=</span> barPoint<span class="token punctuation">.</span>position<span class="token punctuation">;</span><span class="token comment">//æ›´æ–°åˆ°æ•Œäººä½ç½®</span>            UIbar<span class="token punctuation">.</span>forward <span class="token operator">=</span> cam<span class="token punctuation">.</span>forward<span class="token punctuation">;</span><span class="token comment">//é¢æœæ‘„åƒæœºï¼ˆå³æ‘„åƒæœºçš„æ–¹å‘ï¼‰</span>            <span class="token comment">//è¡€æ¡å‰©ä½™æ˜¾ç¤ºæ—¶é—´</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>timeLeft <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>alwaysVisible<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                timeLeft <span class="token operator">=</span> visibleTime<span class="token punctuation">;</span>                UIbar<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">else</span>                timeLeft <span class="token operator">-=</span> Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åæŠŠä»£ç è„šæœ¬æŒ‚è½½åˆ°æ¯ä¸ªæ•Œäººèº«ä¸Šï¼Œå†è°ƒæ•´æ•°æ®å°±å¯ä»¥è¿è¡Œè¯•è¯•çœ‹æ•ˆæœäº†</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¿™ä¸€ç« æˆ‘ä»¬æ¥åˆ¶ä½œä¸€ä¸‹æ•Œäººçš„è¡€é‡æ¡&lt;/p&gt;
&lt;h1 id=&quot;åˆ›å»ºè¡€æ¡UI&quot;&gt;&lt;a href=&quot;#åˆ›å»ºè¡€æ¡UI&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºè¡€æ¡UI&quot;&gt;&lt;/a&gt;åˆ›å»ºè¡€æ¡UI&lt;/h1&gt;&lt;h2 id=&quot;åˆ›å»ºè¡€æ¡åŸºç¡€å½¢çŠ¶ï¼ˆCanvasä¸Imageï¼‰&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°21-åå‡»çŸ³å¤´äºº</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B021-%E5%8F%8D%E5%87%BB%E7%9F%B3%E5%A4%B4%E4%BA%BA/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B021-%E5%8F%8D%E5%87%BB%E7%9F%B3%E5%A4%B4%E4%BA%BA/</id>
    <published>2021-07-27T13:54:34.000Z</published>
    <updated>2021-07-28T01:59:34.199Z</updated>
    
    <content type="html"><![CDATA[<p> è¿™ä¸€ç« ä¸­æˆ‘ä»¬æ¥å®ç°çŸ³å¤´äººä¸¢å‡ºçŸ³å¤´æ¥å‡»é£ç©å®¶å¹¶ä¸”é€ æˆä¼¤å®³çš„æ•ˆæœï¼ŒåŒæ—¶ç©å®¶è¿˜å¯ä»¥åˆ©ç”¨çŸ³å¤´åå‡»çŸ³å¤´äºº</p><h1 id="å®ç°çŸ³å¤´å‡»é£ç©å®¶å¹¶é€ æˆä¼¤å®³"><a href="#å®ç°çŸ³å¤´å‡»é£ç©å®¶å¹¶é€ æˆä¼¤å®³" class="headerlink" title="å®ç°çŸ³å¤´å‡»é£ç©å®¶å¹¶é€ æˆä¼¤å®³"></a>å®ç°çŸ³å¤´å‡»é£ç©å®¶å¹¶é€ æˆä¼¤å®³</h1><p>æˆ‘ä»¬æ‰“å¼€<code>Rock.cs</code>ï¼Œæˆ‘ä»¬è¦æœ‰åŒºåˆ†æ€§çš„è§¦å‘ä¼¤å®³ï¼Œå¯¹äºç©å®¶å’Œæ•Œäººå¯ä»¥é€ æˆä¼¤å®³ï¼Œä½†æ˜¯å¯¹äºä¸¢åˆ°åœ°é¢çš„æƒ…å†µæ˜¯ä¸èƒ½é€ æˆä¼¤å®³çš„ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥åˆ©ç”¨ä¸€ä¸ªæšä¸¾æ¥åŒºåˆ†å¼€æ¥</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">RockStates</span><span class="token punctuation">&#123;</span>HitPlayer<span class="token punctuation">,</span>HitEnemy<span class="token punctuation">,</span>HitNothing<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">public</span>  <span class="token class-name">RockStates</span> rockStates<span class="token punctuation">;</span><span class="token comment">//æšä¸¾å®ä¾‹</span><span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> damage<span class="token punctuation">;</span><span class="token comment">//é€ æˆçš„ä¼¤å®³æ˜¯å¤šå°‘</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnCollisionEnter</span><span class="token punctuation">(</span><span class="token class-name">Collision</span> other<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//otheræŒ‡è¢«çŸ³å¤´æ‰“åˆ°çš„å¯¹è±¡</span>    <span class="token comment">//å½“å‘ç”Ÿç¢°æ’æ—¶ä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°</span>    <span class="token keyword">switch</span><span class="token punctuation">(</span>rockStates<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">case</span> RockStates<span class="token punctuation">.</span>HitPlayer<span class="token punctuation">:</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>other<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token function">CompareTag</span><span class="token punctuation">(</span><span class="token string">"Player"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                other<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isStopped <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                other<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>velocity <span class="token operator">=</span> direction <span class="token operator">*</span> force<span class="token punctuation">;</span><span class="token comment">//å‡»é€€ç©å®¶</span>                other<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Animator<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetTrigger</span><span class="token punctuation">(</span><span class="token string">"Dizzy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//çœ©æ™•</span>                <span class="token comment">//è¿™é‡Œçš„TakeDamageæ˜¯é‡è½½çš„å…¶ä¸­ä¸€ä¸ªæ–¹æ³•</span>                <span class="token comment">//é€ æˆä¼¤å®³</span>                other<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CharacterStates<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">TakeDamage</span><span class="token punctuation">(</span>damage<span class="token punctuation">,</span>other<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CharacterStates<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                rockStates <span class="token operator">=</span> RockStates<span class="token punctuation">.</span>HitNothing<span class="token punctuation">;</span><span class="token comment">//å¤åŸçŠ¶æ€ä»¥é˜²ä¸€ç›´æ‰§è¡Œ</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token comment">//end switch</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬çœ‹åˆ°å…¶ä¸­çš„<code>TakeDamage()</code>æ˜¯ä¸€ä¸ªé‡è½½æ–¹æ³•ï¼Œæ‰“å¼€<code>CharacterStates.cs</code>æˆ‘ä»¬è¿™é‡Œè¡¥å……ä¸€ä¸‹</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//å‡½æ•°é‡è½½</span><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TakeDamage</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> damage<span class="token punctuation">,</span><span class="token class-name">CharacterStates</span> defener<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name"><span class="token keyword">int</span></span> dam <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>damage <span class="token operator">-</span> defener<span class="token punctuation">.</span>currentDefence<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    defener<span class="token punctuation">.</span>currentHealth <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>defener<span class="token punctuation">.</span>currentHealth <span class="token operator">-</span> dam<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åä¿å­˜å…³é—­ï¼Œåˆ«å¿˜äº†è¦åœ¨å¤–è¾¹çŸ³å¤´å¯¹è±¡ä¸Šèµ‹äºˆä¸€ä¸ªåˆå§‹ä¼¤å®³å€¼</p><img src="https://p9-tt.byteimg.com/origin/pgc-image/87f552555d2d4f60b4fe62d0d9c10da6.png" alt="1.png" style="zoom:80%;" /><p>è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†çŸ³å¤´çš„ç¬¬ä¸€ä¸ªçŠ¶æ€</p><h1 id="å®ç°çŸ³å¤´æ”»å‡»çŸ³å¤´äºº"><a href="#å®ç°çŸ³å¤´æ”»å‡»çŸ³å¤´äºº" class="headerlink" title="å®ç°çŸ³å¤´æ”»å‡»çŸ³å¤´äºº"></a>å®ç°çŸ³å¤´æ”»å‡»çŸ³å¤´äºº</h1><p>å…ˆæŠŠä»£ç å®Œå–„å¥½</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">case</span> RockStates<span class="token punctuation">.</span>HitEnemy<span class="token punctuation">:</span><span class="token keyword">if</span><span class="token punctuation">(</span>other<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Golem<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//è·å¾—äº†çŸ³å¤´äººä»£ç ç»„ä»¶çš„å°±æ˜¯çŸ³å¤´äººçš„ï¼Œå¦åˆ™è¿”å›çš„æ˜¯ç©º</span>    <span class="token class-name"><span class="token keyword">var</span></span> otherStates <span class="token operator">=</span> other<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CharacterStates<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    otherStates<span class="token punctuation">.</span><span class="token function">TakeDamage</span><span class="token punctuation">(</span>damage<span class="token punctuation">,</span>otherStates<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">Destroy</span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸ºæˆ‘ä»¬è¿™é‡Œæ˜¯åå‡»çŸ³å¤´äººï¼Œæ‰€ä»¥è¦æœ‰ä¸ªåˆ¤æ–­é¼ æ ‡ç‚¹å‡»åˆ°äº†çŸ³å¤´ï¼Œä¸€ä¸ªæœ€ç›´æ¥çš„åŠæ³•å°±æ˜¯ç»™æˆ‘ä»¬çš„çŸ³å¤´æ·»åŠ ä¸€ä¸ªæ ‡ç­¾ï¼Œç„¶åå†ä¿®æ”¹ä¸€ä¸‹é¼ æ ‡ç‚¹å‡»æ—¶çš„æ–¹æ³•</p><img src="https://p3-tt.byteimg.com/origin/pgc-image/e18b4dde9c5b4129bba36dd1c9f553b2.png" alt="2.png" style="zoom:80%;" /><p>å›åˆ°<code>PlayerController.cs</code>ä¿®æ”¹ä¸€ä¸‹</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Hit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>attactTarget<span class="token punctuation">.</span><span class="token function">CompareTag</span><span class="token punctuation">(</span><span class="token string">"Attackable"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//å¦‚æœç‚¹å‡»çš„å¯¹è±¡ä¸æ˜¯æ•Œäººè€Œæ˜¯å…¶å®ƒå¦ç±»å¯æ”»å‡»å¯¹è±¡ï¼Œå¦‚çŸ³å¤´</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>attactTarget<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rock<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> attactTarget<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rock<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rockStates            <span class="token operator">==</span> Rock<span class="token punctuation">.</span>RockStates<span class="token punctuation">.</span>HitNothing<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">//å¦‚æœæ˜¯çŸ³å¤´å¹¶ä¸”çŸ³å¤´ä¸åœ¨ç©ºä¸­è€Œæ˜¯è½åœ°ä¹‹å</span>            attactTarget<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rock<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rockStates <span class="token operator">=</span> Rock<span class="token punctuation">.</span>RockStates<span class="token punctuation">.</span>HitEnemy<span class="token punctuation">;</span>            <span class="token comment">//é˜²æ­¢æ”»å‡»é‚£ä¸€åˆ¹é‚£é€Ÿåº¦å°äº1å¯¼è‡´çŸ³å¤´çŠ¶æ€å‘ç”Ÿæ”¹å˜</span>            attactTarget<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>velocity <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>one<span class="token punctuation">;</span>                        <span class="token comment">//æ·»åŠ ä¸€ä¸ªç©å®¶æœå‘çš„åŠ›ï¼ŒåŠ›çš„å¤§å°æš‚æ—¶å®š 40</span>            attactTarget<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">AddForce</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>forward <span class="token operator">*</span> <span class="token number">40</span><span class="token punctuation">,</span>ForceMode<span class="token punctuation">.</span>Impulse<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>        <span class="token class-name"><span class="token keyword">var</span></span> targetStates <span class="token operator">=</span> attactTarget<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CharacterStates<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è®¡ç®—ä¼¤å®³</span>        targetStates<span class="token punctuation">.</span><span class="token function">TakeDamage</span><span class="token punctuation">(</span>charcterStates<span class="token punctuation">,</span>targetStates<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¡ä»¶ä¸­æœ‰ä¸€ä¸ªæ˜¯åˆ¤æ–­æ˜¯å¦ä¸º<code>HitNothing</code>ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨åˆ¤æ–­çŸ³å¤´æ˜¯å¦ä¸ºæ¥è¿‘äºé™æ­¢æ—¶ä¸ºæ¡ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬å°±è¦å›å»<code>Rock.cs</code>åšä¸€äº›ä¿®æ”¹äº†</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    rb <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    rb<span class="token punctuation">.</span>velocity <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>one<span class="token punctuation">;</span><span class="token comment">//é˜²æ­¢çŸ³å¤´ä¸€ç”Ÿæˆæ—¶é€Ÿåº¦ä¸º0å¯¼è‡´çŠ¶æ€å‘ç”Ÿæ”¹å˜</span>    <span class="token function">FlyToTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">FixedUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//å›ºå®šå¸§æ›´æ–°</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>rb<span class="token punctuation">.</span>velocity<span class="token punctuation">.</span>sqrMagnitude <span class="token operator">&lt;</span> <span class="token number">1f</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//å‘é‡çš„å¹³æ–¹</span>        rockStates <span class="token operator">=</span> RockStates<span class="token punctuation">.</span>HitNothing<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€ååˆ«å¿˜äº†åœ¨<code>MouseManager.cs</code>åŠ ä¸Šä»£ç </p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">MouseControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetMouseButtonDown</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> hitInfo<span class="token punctuation">.</span>collider <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span><span class="token function">CompareTag</span><span class="token punctuation">(</span><span class="token string">"Ground"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            OnMouseClicked<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">var</span></span> point <span class="token operator">=</span> hitInfo<span class="token punctuation">.</span>point<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span><span class="token function">CompareTag</span><span class="token punctuation">(</span><span class="token string">"Enemy"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            OnEnemyClicked<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç‚¹å‡»æ•Œäººä¼ é€’æ•Œäººçš„gameObject</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span><span class="token function">CompareTag</span><span class="token punctuation">(</span><span class="token string">"Attackable"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//ç‚¹å‡»çŸ³å¤´ç­‰å¯¹è±¡ç”¨</span>            OnEnemyClicked<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ä¸ºçŸ³å¤´åŠ ä¸Šçˆ†è£‚ç‰¹æ•ˆ"><a href="#ä¸ºçŸ³å¤´åŠ ä¸Šçˆ†è£‚ç‰¹æ•ˆ" class="headerlink" title="ä¸ºçŸ³å¤´åŠ ä¸Šçˆ†è£‚ç‰¹æ•ˆ"></a>ä¸ºçŸ³å¤´åŠ ä¸Šçˆ†è£‚ç‰¹æ•ˆ</h1><p>æœ€åæˆ‘ä»¬æƒ³åœ¨çŸ³å¤´æ‰“åˆ°çŸ³å¤´äººæ—¶æœ‰ä¸€ä¸ªçˆ†è£‚ç¢çŸ³ç‰¹æ•ˆï¼Œè¿™é‡Œå°±è¦ç”¨åˆ°<code>Particle System</code>äº†</p><img src="https://p6-tt.byteimg.com/origin/pgc-image/efcac51c11a3459cb6e1cfad55ff677a.png" alt="3.png" style="zoom:80%;" /><p>åˆ›å»ºå¥½ä¹‹åæˆ‘ä»¬æŒ‰ç…§ä¸‹å›¾å‚è€ƒè®¾ç½®</p><img src="https://p26-tt.byteimg.com/origin/pgc-image/2a5fef602fe948eab2649b98a3f07f83.png" alt="5.png" style="zoom:80%;" /><img src="https://p5-tt.byteimg.com/origin/pgc-image/529e6ea5fe1141afb30b34135e7b8018.png" alt="6.png" style="zoom:80%;" /><img src="https://p6-tt.byteimg.com/origin/pgc-image/e34343a1983440909f77ce88719261e3.png" alt="7.png" style="zoom:80%;" /><img src="https://p5-tt.byteimg.com/origin/pgc-image/973530a9742240a7bc989b50a5ce86fb.png" alt="8.png" style="zoom:80%;" /><p>è‡ªå·±å¤šå¤šæµ‹è¯•ä¸€ä¸‹æ•ˆæœï¼Œæ»¡æ„ä¹‹åæˆ‘ä»¬å°±å¯ä»¥æ”¹ä¸ªåå°†å®ƒä¿å­˜ä¸ºä¸€ä¸ªç´ ææ”¾å¥½å…ˆï¼Œç„¶åä¸è¦å¿˜äº†æŠŠåœ°å›¾ä¸Šåˆšåˆšè°ƒè¯•çš„åˆ é™¤</p><img src="https://p6-tt.byteimg.com/origin/pgc-image/4b40b473872f4223a4aafecdb889c930.png" alt="9.png" style="zoom:80%;" /><p>æœ€åå†åœ¨<code>Rock.cs</code>ä¸Šä¿®æ”¹ä¸€ä¸‹ä»£ç </p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token class-name">GameObject</span> RockBreakParticle<span class="token punctuation">;</span><span class="token comment">//çŸ³å¤´çˆ†è£‚ç‰¹æ•ˆï¼Œä¾›å¤–ç•Œæ‹–æ‹½è¿›æ¥</span><span class="token keyword">case</span> RockStates<span class="token punctuation">.</span>HitEnemy<span class="token punctuation">:</span><span class="token keyword">if</span><span class="token punctuation">(</span>other<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Golem<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//è·å¾—äº†çŸ³å¤´äººä»£ç ç»„ä»¶çš„å°±æ˜¯çŸ³å¤´äººçš„ï¼Œå¦åˆ™è¿”å›çš„æ˜¯ç©º</span>    <span class="token class-name"><span class="token keyword">var</span></span> otherStates <span class="token operator">=</span> other<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CharacterStates<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    otherStates<span class="token punctuation">.</span><span class="token function">TakeDamage</span><span class="token punctuation">(</span>damage<span class="token punctuation">,</span>otherStates<span class="token punctuation">)</span><span class="token punctuation">;</span>    Instantiate        <span class="token punctuation">(</span>RockBreakParticle<span class="token punctuation">,</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span>Quaternion<span class="token punctuation">.</span>identity<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å‡»ä¸­æ•Œäººæ—¶äº§ç”Ÿçˆ†è£‚ç‰¹æ•ˆ</span>    <span class="token function">Destroy</span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åä¸è¦å¿˜äº†æŠŠçŸ³å¤´çˆ†è£‚çš„ç‰¹æ•ˆæ‹–è¿›å»è®¾ç½®é¢æ¿é‡Œ</p><img src="https://p9-tt.byteimg.com/origin/pgc-image/272290cea6af4b3a8f67fbe952186662.png" alt="10.png" style="zoom:80%;" />]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt; è¿™ä¸€ç« ä¸­æˆ‘ä»¬æ¥å®ç°çŸ³å¤´äººä¸¢å‡ºçŸ³å¤´æ¥å‡»é£ç©å®¶å¹¶ä¸”é€ æˆä¼¤å®³çš„æ•ˆæœï¼ŒåŒæ—¶ç©å®¶è¿˜å¯ä»¥åˆ©ç”¨çŸ³å¤´åå‡»çŸ³å¤´äºº&lt;/p&gt;
&lt;h1 id=&quot;å®ç°çŸ³å¤´å‡»é£ç©å®¶å¹¶é€ æˆä¼¤å®³&quot;&gt;&lt;a href=&quot;#å®ç°çŸ³å¤´å‡»é£ç©å®¶å¹¶é€ æˆä¼¤å®³&quot; class=&quot;headerlink&quot; title=&quot;å®ç°çŸ³å¤´å‡»é£ç©å®¶å¹¶é€ </summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°20-å®ç°çŸ³å¤´äººä¸¢å‡ºçŸ³å¤´</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B020-%E5%AE%9E%E7%8E%B0%E7%9F%B3%E5%A4%B4%E4%BA%BA%E4%B8%A2%E5%87%BA%E7%9F%B3%E5%A4%B4/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B020-%E5%AE%9E%E7%8E%B0%E7%9F%B3%E5%A4%B4%E4%BA%BA%E4%B8%A2%E5%87%BA%E7%9F%B3%E5%A4%B4/</id>
    <published>2021-07-26T01:12:34.000Z</published>
    <updated>2021-07-26T03:00:21.294Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸€ç« æˆ‘ä»¬å®ç°ä¸€ä¸‹çŸ³å¤´äººçš„ç‰¹æ®Šæ”»å‡»ï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆä¸€ä¸ªçŸ³å¤´ç„¶åä¸¢å‘æˆ‘ä»¬ç©å®¶</p><h1 id="ç¼–è¾‘çŸ³å¤´"><a href="#ç¼–è¾‘çŸ³å¤´" class="headerlink" title="ç¼–è¾‘çŸ³å¤´"></a>ç¼–è¾‘çŸ³å¤´</h1><p>é¦–å…ˆæˆ‘ä»¬æ‰¾åˆ°çŸ³å¤´ç´ ææ‹–å‡ºæ¥ï¼Œç”±äºæˆ‘ä»¬è¦ç»™å®ƒæ–½åŠ ä¸€ä¸ªåŠ›ï¼Œå› æ­¤è¿™é‡Œå°±è¦ç”¨åˆ°<code>Rigidbody(é’¢ä½“)</code>ç»„ä»¶äº†</p><img src="https://p9-tt.byteimg.com/origin/pgc-image/63ea4e8d49e540acb69a7ded75d37782.png" alt="2.png" style="zoom:80%;" /><p>åŒæ—¶çŸ³å¤´è¿˜è¦ä¸åœ°é¢å‘ç”Ÿç¢°æ’ï¼Œå› æ­¤è¿˜è¦æ·»åŠ ä¸€ä¸ªç¢°æ’ä½“ï¼Œè¿™é‡Œé€‰æ‹©çš„æ˜¯<code>MeshCollider</code>ï¼Œå‹¾é€‰<code>Convex</code>å¯ä»¥çœ‹åˆ°ç¢°æ’ä½“ç§¯åˆšå¥½é€‚é…æˆ‘ä»¬çš„çŸ³å¤´å½¢çŠ¶</p><img src="https://p26-tt.byteimg.com/origin/pgc-image/ddc484a234c94603b2b16b9dd5ea0a42.png" alt="3.png" style="zoom:80%;" /><p>ç„¶åæˆ‘ä»¬å°±è¦æ¥è¿›è¡Œå†™ä»£ç äº†</p><img src="https://p3-tt.byteimg.com/origin/pgc-image/0a42c8f078f8441ea47b3ef4af3302f8.png" alt="1.png" style="zoom:80%;" /><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rock</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span><span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Rigidbody</span> rb<span class="token punctuation">;</span>    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Basic Settings(æ‰”å‡ºçŸ³å¤´å‚æ•°è®¾ç½®)"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> force<span class="token punctuation">;</span><span class="token comment">//ä¸¢å‡ºå»çš„å†²å‡»åŠ›å¤§å°</span>    <span class="token keyword">public</span> <span class="token class-name">GameObject</span> target<span class="token punctuation">;</span><span class="token comment">//ä¸¢å‘çš„ç›®æ ‡</span>    <span class="token keyword">private</span> <span class="token class-name">Vector3</span> direction<span class="token punctuation">;</span><span class="token comment">//ä¸¢å‡ºå»çš„æ–¹å‘</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        rb <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">FlyToTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">FlyToTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//é˜²æ­¢ä¸¢å‡ºå»é‚£ä¸€åˆ¹é‚£ç©å®¶è„±ç¦»ä¸¢å¤±ç›®æ ‡å¯¼è‡´çŸ³å¤´ç”Ÿæˆä¸å‡ºæ¥</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            target <span class="token operator">=</span> <span class="token generic-method"><span class="token function">FindObjectOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>PlayerController<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">;</span>                <span class="token comment">//Vector3.upæ˜¯æƒ³åœ¨çŸ³å¤´ä¸¢å‡ºå»çš„æ—¶å€™ä¸Šå‡ä¸€ä¸ªé«˜åº¦</span>        direction <span class="token operator">=</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">-</span> transform<span class="token punctuation">.</span>position <span class="token operator">+</span> Vector3<span class="token punctuation">.</span>up<span class="token punctuation">)</span><span class="token punctuation">.</span>normalized<span class="token punctuation">;</span>        <span class="token comment">//Impulseæ˜¯å†²å‡»åŠ›çš„æ¨¡å¼</span>        rb<span class="token punctuation">.</span><span class="token function">AddForce</span><span class="token punctuation">(</span>direction <span class="token operator">*</span> force<span class="token punctuation">,</span>ForceMode<span class="token punctuation">.</span>Impulse<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åæˆ‘ä»¬å°†çŸ³å¤´ç´ æä¿å­˜ä¸€ä¸ªæ¨¡æ¿å¯¹è±¡</p><img src="https://p26-tt.byteimg.com/origin/pgc-image/735c192da1924614a7f5e0f0ee01b428.png" alt="4.png" style="zoom:80%;" /><h1 id="è¿›ä¸€æ­¥å®Œå–„çŸ³å¤´äºº"><a href="#è¿›ä¸€æ­¥å®Œå–„çŸ³å¤´äºº" class="headerlink" title="è¿›ä¸€æ­¥å®Œå–„çŸ³å¤´äºº"></a>è¿›ä¸€æ­¥å®Œå–„çŸ³å¤´äºº</h1><p>éšåæˆ‘ä»¬å†æ¬¡ç¼–è¾‘çŸ³å¤´äººï¼Œå› ä¸ºæˆ‘ä»¬çš„çŸ³å¤´æ˜¯ä»çŸ³å¤´äººçš„æ‰‹ä¸Šä¸¢å‡ºå»çš„ï¼Œå› æ­¤æˆ‘ä»¬å°±è¦è·å¾—æ‰‹çš„åæ ‡ï¼Œå³ä¸‹é¢çš„å¯¹è±¡åæ ‡</p><img src="https://p26-tt.byteimg.com/origin/pgc-image/0cdbbddf408c42e6a443e151c343ce6b.png" alt="5.png" style="zoom:80%;" /><p>çŸ¥é“è¿™ä¸ªåæˆ‘ä»¬æš‚æ—¶æ”¾åœ¨ä¸€è¾¹ï¼Œæ¥ç¼–å†™ä¸€ä¸‹çŸ³å¤´äººçš„ä»£ç </p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Rock Settingsï¼ˆä¸¢çŸ³å¤´æ”»å‡»çš„ç›¸å…³è®¾ç½®ï¼‰"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><span class="token keyword">public</span> <span class="token class-name">GameObject</span> rockPrefab<span class="token punctuation">;</span><span class="token comment">//çŸ³å¤´ç´ æ</span><span class="token keyword">public</span> <span class="token class-name">Transform</span> handPos<span class="token punctuation">;</span><span class="token comment">//ä¸¢å‡ºçŸ³å¤´çš„æ‰‹çš„åæ ‡</span><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ThrowRock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>attackTarget <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//åˆ›å»ºçŸ³å¤´å¯¹è±¡ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æ—‹è½¬ï¼Œè¿™é‡Œé€‰æ‹©ç»´æŒåˆå§‹æ—‹è½¬</span>        <span class="token class-name">GameObject</span> rock <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>rockPrefab<span class="token punctuation">,</span>handPos<span class="token punctuation">.</span>position<span class="token punctuation">,</span>Quaternion<span class="token punctuation">.</span>identity<span class="token punctuation">)</span><span class="token punctuation">;</span>        rock<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rock<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>target <span class="token operator">=</span> attackTarget<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åæˆ‘ä»¬æŠŠçŸ³å¤´äººçš„åŠ¨ç”»äº‹ä»¶æ·»åŠ ä¸Šå»</p><img src="https://p5-tt.byteimg.com/origin/pgc-image/6ec880f34ce24caab5c2270d61e5d04a.png" alt="6.png" style="zoom:80%;" /><p>æœ€ååˆ«å¿˜äº†è¿˜è¦é€‰æ‹©çŸ³å¤´çš„ç´ æï¼ˆå°±æ˜¯æˆ‘ä»¬åˆšåˆšä¿å­˜å¥½çš„ç´ ææ¨¡æ¿ï¼‰ï¼Œä»¥åŠæ‰‹çš„åæ ‡</p><img src="https://p6-tt.byteimg.com/origin/pgc-image/29b7a5e0ae72481a933c5728c35ca1b9.png" alt="7.png" style="zoom:80%;" />]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¿™ä¸€ç« æˆ‘ä»¬å®ç°ä¸€ä¸‹çŸ³å¤´äººçš„ç‰¹æ®Šæ”»å‡»ï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆä¸€ä¸ªçŸ³å¤´ç„¶åä¸¢å‘æˆ‘ä»¬ç©å®¶&lt;/p&gt;
&lt;h1 id=&quot;ç¼–è¾‘çŸ³å¤´&quot;&gt;&lt;a href=&quot;#ç¼–è¾‘çŸ³å¤´&quot; class=&quot;headerlink&quot; title=&quot;ç¼–è¾‘çŸ³å¤´&quot;&gt;&lt;/a&gt;ç¼–è¾‘çŸ³å¤´&lt;/h1&gt;&lt;p&gt;é¦–å…ˆæˆ‘ä»¬æ‰¾åˆ°çŸ³å¤´ç´ ææ‹–å‡ºæ¥ï¼Œç”±äºæˆ‘ä»¬è¦</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°19-è®¾ç½®çŸ³å¤´äºº</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B019-%E8%AE%BE%E7%BD%AE%E7%9F%B3%E5%A4%B4%E4%BA%BA/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B019-%E8%AE%BE%E7%BD%AE%E7%9F%B3%E5%A4%B4%E4%BA%BA/</id>
    <published>2021-07-25T04:09:19.000Z</published>
    <updated>2021-07-25T06:52:30.857Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸€ç« èŠ‚æˆ‘ä»¬æ¥è®¾ç½®çŸ³å¤´äººï¼Œç”±äºå’Œè®¾ç½®å…½äººç›¸å·®ä¸å¤§ï¼Œç¯‡å¹…æ¯”è¾ƒå°‘</p><h1 id="è®¾ç½®åŠ¨ç”»"><a href="#è®¾ç½®åŠ¨ç”»" class="headerlink" title="è®¾ç½®åŠ¨ç”»"></a>è®¾ç½®åŠ¨ç”»</h1><p>æˆ‘ä»¬å»æµè§ˆçŸ³å¤´äººçš„åŠ¨ç”»å¯ä»¥å‘ç°ï¼Œ<code>Attack01</code>æ˜¯ç±»ä¼¼æ‹¿èµ·çŸ³å¤´ä¸¢æˆ‘ä»¬ï¼Œå®ƒæ‰æ˜¯æŠ€èƒ½æ”»å‡»ï¼Œè€Œ<code>Attack02</code>æ˜¯å‡»æ™•ç©å®¶çš„æ”»å‡»åŠ¨ç”»ï¼Œå¯ä»¥ä½œä¸ºæ™®é€šæ”»å‡»æ¥ä½¿ï¼Œå› æ­¤æˆ‘ä»¬åœ¨è°ƒæ•´æ”»å‡»åŠ¨ç”»æ—¶è¦æ³¨æ„åˆ†æ¸…</p><p>æˆ‘ä»¬çš„åŠ¨ç”»æ§åˆ¶å™¨æ–‡ä»¶å°±é€‰æ‹©æ˜¯åŸºäº<code>å…½äºº</code>çš„åŠ¨ç”»æ¥å®Œæˆï¼Œåˆ›å»ºä¸€ä¸ª<code>New Animator Override Controller</code>ï¼Œæ¨¡æ¿é€‰æ‹©ä¸ºå…½äººï¼Œç„¶åå†ä¸€ä¸ªä¸ªåŠ¨ç”»æ›¿æ¢ä¸Šå»</p><img src="https://p3-tt.byteimg.com/origin/pgc-image/cbf3634f05844a5f98fed856698b1a5a.png" alt="1.png" style="zoom:80%;" /><p>å…¶ä¸­<code>Run</code>å¹¶æ²¡æœ‰è‡ªå¸¦åŠ¨ç”»ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨<code>Walk</code>ä»£æ›¿</p><h1 id="ç¼–å†™ä»£ç æ–‡ä»¶"><a href="#ç¼–å†™ä»£ç æ–‡ä»¶" class="headerlink" title="ç¼–å†™ä»£ç æ–‡ä»¶"></a>ç¼–å†™ä»£ç æ–‡ä»¶</h1><p>æˆ‘ä»¬åƒå…½äººä»£ç æ–‡ä»¶é‚£æ ·å•ç‹¬åˆ›ä¸€ä¸ªä»£ç æ–‡ä»¶ç»™çŸ³å¤´äººç”¨ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯è¦ç»§æ‰¿<code>EnemyController</code></p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Golem</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">EnemyController</span></span><span class="token punctuation">&#123;</span>    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Skillï¼ˆçŸ³å¤´äººç‰¹æ®Šæ”»å‡»è®¾ç½®ï¼‰"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> kickForce <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token comment">//æ¨å¼€æ•Œäººè·ç¦»</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">kickOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//çŸ³å¤´äººå‡»é£ç©å®¶</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>attackTarget <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> transform<span class="token punctuation">.</span><span class="token function">IsFacingTarget</span><span class="token punctuation">(</span>attackTarget<span class="token punctuation">.</span>transform<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name"><span class="token keyword">var</span></span> targetState <span class="token operator">=</span> attackTarget<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CharacterStates<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            transform<span class="token punctuation">.</span><span class="token function">LookAt</span><span class="token punctuation">(</span>attackTarget<span class="token punctuation">.</span>transform<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Vector3</span> direction <span class="token operator">=</span> <span class="token punctuation">(</span>attackTarget<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">-</span> transform<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">.</span>normalized<span class="token punctuation">;</span>            attackTarget<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isStopped <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            attackTarget<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>velocity <span class="token operator">=</span> direction<span class="token operator">*</span>kickForce<span class="token punctuation">;</span>            targetState<span class="token punctuation">.</span><span class="token function">TakeDamage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>characterStates<span class="token punctuation">,</span>targetState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åå†æ·»åŠ åŠ¨ç”»äº‹ä»¶å°±è¡Œäº†</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¿™ä¸€ç« èŠ‚æˆ‘ä»¬æ¥è®¾ç½®çŸ³å¤´äººï¼Œç”±äºå’Œè®¾ç½®å…½äººç›¸å·®ä¸å¤§ï¼Œç¯‡å¹…æ¯”è¾ƒå°‘&lt;/p&gt;
&lt;h1 id=&quot;è®¾ç½®åŠ¨ç”»&quot;&gt;&lt;a href=&quot;#è®¾ç½®åŠ¨ç”»&quot; class=&quot;headerlink&quot; title=&quot;è®¾ç½®åŠ¨ç”»&quot;&gt;&lt;/a&gt;è®¾ç½®åŠ¨ç”»&lt;/h1&gt;&lt;p&gt;æˆ‘ä»¬å»æµè§ˆçŸ³å¤´äººçš„åŠ¨ç”»å¯ä»¥å‘ç°ï¼Œ&lt;code&gt;At</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°18-æ‰©å±•æ–¹æ³•</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B018-%E6%89%A9%E5%B1%95%E6%96%B9%E6%B3%95/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B018-%E6%89%A9%E5%B1%95%E6%96%B9%E6%B3%95/</id>
    <published>2021-07-24T04:55:12.000Z</published>
    <updated>2021-07-24T06:02:15.450Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸€ç« æˆ‘ä»¬æ¥ç†Ÿæ‚‰ä¸€ä¸‹æ‰©å±•æ–¹æ³•ï¼Œæ‰€è°“æ‰©å±•æ–¹æ³•å°±æ˜¯åœ¨ä¸ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œä½†æ˜¯å¯ä»¥é¢å¤–ç¼–å†™ä¸€ä¸ªç±»æ¥æ‰©å±•è¿™ä¸ªç±»çš„åŠŸèƒ½ï¼Œæ¯”å¦‚è¿™ä¸€ç« æˆ‘ä»¬æƒ³è®©æˆ‘ä»¬æ§åˆ¶ä¸»è§’åœ¨å…½äººåé¢æ—¶å…½äººæ”»å‡»ä¸ä¼šé€ æˆä¼¤å®³ï¼Œè¿™é‡Œå°±è¦ç”¨åˆ°<code>transfrom</code>ç±»ï¼Œä½†æ˜¯<code>transfrom</code>é‡Œè¾¹æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å°±è¦æ¥æ‰©å±•å®ƒ</p><h1 id="æ‰©å±•æ–¹æ³•"><a href="#æ‰©å±•æ–¹æ³•" class="headerlink" title="æ‰©å±•æ–¹æ³•"></a>æ‰©å±•æ–¹æ³•</h1><p>è¦æƒ³æˆ‘ä»¬çš„å…½äººæ•Œäººå¯¹èº«åç©å®¶é€ æˆä¸äº†ä¼¤å®³ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸“é—¨æ¥åˆ¤æ–­ç©å®¶æ˜¯å¦åœ¨å…½äººæ­£å‰æ–¹æ‰‡å½¢åŒºåŸŸï¼Œå¦‚æœåœ¨åˆ™è¿”å›<code>true</code>å¦åˆ™è¿”å›<code>false</code>ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªæ–¹æ³•åŠ åˆ°è®¡ç®—ä¼¤å®³çš„<code>Hit()</code>å‡½æ•°é‡Œè¾¹è¿›è¡Œä¸€ä¸ªåˆ¤æ–­ï¼Œç©å®¶åœ¨å…½äººè§†é‡èŒƒå›´å†…å°±é€ æˆä¼¤å®³ï¼Œåä¹‹ä¸é€ æˆ</p><p>è¿™ä¸ªæ‰©å±•æ–¹æ³•æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ä»£ç æ–‡ä»¶</p><img src="https://p9-tt.byteimg.com/origin/pgc-image/1d4a90fb719d4281b68a709f01232cd2.png" alt="1.png" style="zoom:80%;" /><p>æ‰“å¼€ç¼–å†™å®ƒ</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ExtensionMethod</span><span class="token punctuation">&#123;</span>    <span class="token comment">//æ‰©å±•æ–¹æ³•ç±»</span>    <span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">float</span></span> dotThreshold <span class="token operator">=</span> <span class="token number">0.5f</span><span class="token punctuation">;</span> <span class="token comment">//è§†é‡èŒƒå›´å¤§å°</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">IsFacingTarget</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Transform</span> transform <span class="token punctuation">,</span> <span class="token class-name">Transform</span> target<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//åˆ¤æ–­ç›®æ ‡æ˜¯å¦åœ¨è§†é‡èŒƒå›´å†…</span>        <span class="token class-name"><span class="token keyword">var</span></span> vectorToTarget <span class="token operator">=</span> target<span class="token punctuation">.</span>position <span class="token operator">-</span> transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span><span class="token comment">//è·å¾—æ•Œäººå’Œç©å®¶çš„ç›¸å¯¹ä½ç½®</span>        vectorToTarget<span class="token punctuation">.</span><span class="token function">Normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å‘é‡åŒ–</span>        <span class="token comment">//Dot:ä¸¤ä¸ªçŸ¢é‡çš„ç‚¹ç§¯ã€‚ ç‚¹ç§¯æ˜¯ä¸€ä¸ªæµ®ç‚¹å€¼ï¼Œç­‰äºä¸¤ä¸ªçŸ¢é‡çš„å¤§å°ç›¸ä¹˜ï¼Œç„¶åä¹˜ä»¥å®ƒä»¬ä¹‹é—´çš„è§’åº¦çš„ä½™å¼¦ã€‚</span>        <span class="token class-name"><span class="token keyword">float</span></span> dot <span class="token operator">=</span> Vector3<span class="token punctuation">.</span><span class="token function">Dot</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>forward<span class="token punctuation">,</span>vectorToTarget<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> dot <span class="token operator">></span> dotThreshold<span class="token punctuation">;</span><span class="token comment">//å¦‚æœç©å®¶åœ¨æ•Œäººå¤¹è§’120Â°(cos120 = 0.5)è§†é‡èŒƒå›´å†…åˆ™è¿”å›true</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<code>Vector3.Dot()</code>æ–¹æ³•ï¼Œå®˜æ–¹APIåœ¨<a href="http://docs.unity3d.com/ScriptReference/Vector3.Dot.html">è¿™é‡Œ</a>ï¼ŒåŒæ—¶ä¹Ÿç”¨äº†<code>transform.forward</code>æ¥è¡¨ç¤ºæ•Œäººé¢å¯¹çš„æ–¹å‘</p><p>åŒæ—¶è¿˜è¦æ³¨æ„åˆ°å‚æ•°æœ‰ä¸ª<code>this</code>ï¼Œè¿™æ ·å¯ä»¥è®©æ–¹æ³•åŠ å…¥åˆ°<code>Transform</code>ç±»é‡Œé¢ï¼Œå˜æˆå®ƒçš„ä¸€ä¸ªæ–¹æ³•</p><img src="https://p9-tt.byteimg.com/origin/pgc-image/f180df5587214500b2f7e3cb8e63072a.png" alt="2.png" style="zoom:80%;" /><p>æœ€åæˆ‘ä»¬å›åˆ°<code>Hit()</code>å‡½æ•°ä¸­ï¼ŒæŠŠåˆ¤æ–­æ¡ä»¶åŠ ä¸Šå°±å®Œæˆäº†</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Hit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//ç”±äºåœ¨æ•Œäººè¿½ä¸»è§’çš„è¿‡ç¨‹ä¸­ä¸»è§’å¯èƒ½ä¼šè·‘å¼€ï¼Œè¿™æ—¶å€™å¦‚æœæ”»å‡»çš„è¯ç›®æ ‡å°±ä¸¢å¤±äº†</span>    <span class="token comment">//æ‰€ä»¥æˆ‘ä»¬åœ¨æ”»å‡»å‰åˆ¤æ–­ç›®æ ‡æ˜¯å¦ä¸ºç©ºï¼Œä»¥é˜²æŠ¥é”™</span>    <span class="token comment">//åŒæ—¶è¿˜åˆ¤æ–­äº†ç©å®¶æ˜¯å¦åœ¨æ•Œäººçš„è§†é‡èŒƒå›´å†…ï¼Œåœ¨çš„è¯æ‰é€ æˆä¼¤å®³</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>attackTarget <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> transform<span class="token punctuation">.</span><span class="token function">IsFacingTarget</span><span class="token punctuation">(</span>attackTarget<span class="token punctuation">.</span>transform<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name"><span class="token keyword">var</span></span> targetStates <span class="token operator">=</span> attackTarget<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CharacterStates<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        targetStates<span class="token punctuation">.</span><span class="token function">TakeDamage</span><span class="token punctuation">(</span>characterStates<span class="token punctuation">,</span>targetStates<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·ï¼Œå½“æˆ‘ä»¬çš„ç©å®¶èµ°åˆ°æ•Œäººåè¾¹çš„æ—¶å€™å°±ä¸ä¼šå—åˆ°ä¼¤å®³</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¿™ä¸€ç« æˆ‘ä»¬æ¥ç†Ÿæ‚‰ä¸€ä¸‹æ‰©å±•æ–¹æ³•ï¼Œæ‰€è°“æ‰©å±•æ–¹æ³•å°±æ˜¯åœ¨ä¸ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œä½†æ˜¯å¯ä»¥é¢å¤–ç¼–å†™ä¸€ä¸ªç±»æ¥æ‰©å±•è¿™ä¸ªç±»çš„åŠŸèƒ½ï¼Œæ¯”å¦‚è¿™ä¸€ç« æˆ‘ä»¬æƒ³è®©æˆ‘ä»¬æ§åˆ¶ä¸»è§’åœ¨å…½äººåé¢æ—¶å…½äººæ”»å‡»ä¸ä¼šé€ æˆä¼¤å®³ï¼Œè¿™é‡Œå°±è¦ç”¨åˆ°&lt;code&gt;transfrom&lt;/code&gt;ç±»ï¼Œä½†æ˜¯&lt;code&gt;transfrom&lt;/code</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°17-è®¾ç½®å…½äººæ•Œäºº</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B017-%E8%AE%BE%E7%BD%AE%E5%85%BD%E4%BA%BA%E6%95%8C%E4%BA%BA/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B017-%E8%AE%BE%E7%BD%AE%E5%85%BD%E4%BA%BA%E6%95%8C%E4%BA%BA/</id>
    <published>2021-07-23T02:01:51.000Z</published>
    <updated>2021-07-23T03:47:43.441Z</updated>
    
    <content type="html"><![CDATA[<p> åœ¨è¿™ä¸€ç« èŠ‚ä¸­æˆ‘ä»¬æ¥è®¾ç½®ä¸€ä¸‹å…½äººæ•Œäººï¼Œç”±äºå®ƒçš„<code>Attack02</code>åŠ¨ç”»åŒ…å«ä¸€ä¸ªæ¨äººçš„æ•ˆæœï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å®ƒè¿›è¡Œå•ç‹¬çš„æµ‹è¯•ï¼Œè€Œä¸æ˜¯ç»§ç»­æ²¿ç”¨ä¹‹å‰çš„<code>EnemyController</code>ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨å®ƒåŸºç¡€ä¸Šè¿›è¡Œæ·»åŠ ï¼Œæ‰€ä»¥å¯ä»¥é€‰æ‹©ç»§æ‰¿ç±»æ–¹å¼æ”¹å†™</p><h1 id="ç»§æ‰¿EnemyControllerå¹¶æ·»åŠ æ¨å¼€äººç‰©æ–¹æ³•"><a href="#ç»§æ‰¿EnemyControllerå¹¶æ·»åŠ æ¨å¼€äººç‰©æ–¹æ³•" class="headerlink" title="ç»§æ‰¿EnemyControllerå¹¶æ·»åŠ æ¨å¼€äººç‰©æ–¹æ³•"></a>ç»§æ‰¿EnemyControllerå¹¶æ·»åŠ æ¨å¼€äººç‰©æ–¹æ³•</h1><p>å› ä¸ºå…½äººæ˜¯ç”¨ç»§æ‰¿çš„ä»£ç ï¼Œæˆ‘ä»¬è¦ä¸“é—¨åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹æ”¾ç‰¹å®šæ•Œäººçš„<code>EnemyController</code>å­ç±»ä»£ç </p><img src="https://p5-tt.byteimg.com/origin/pgc-image/2a7f1d824413463f8bbb1701fb464525.png" alt="1.png" style="zoom:80%;" /><p>åŒæ—¶ä¹ŸæŠŠè¿™ä¸ªä»£ç æŒ‚è½½åˆ°å…½äººèº«ä¸Š</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Grunt</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">EnemyController</span></span><span class="token punctuation">&#123;</span>    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Skillï¼ˆå…½äººç‰¹æ®Šæ”»å‡»è®¾ç½®ï¼‰"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> kickForce <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span><span class="token comment">//æ¨å¼€æ•Œäººè·ç¦»</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">kickOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//å¦‚æœè®¿é—®ä¸äº†attackTargetè¦è¿”å›çˆ¶ç±»ä¿®æ”¹ä¸ºprotectå±æ€§</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>attackTarget <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            transform<span class="token punctuation">.</span><span class="token function">LookAt</span><span class="token punctuation">(</span>attackTarget<span class="token punctuation">.</span>transform<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Vector3</span> direction <span class="token operator">=</span> attackTarget<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token operator">-</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>            direction<span class="token punctuation">.</span><span class="token function">Normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é‡åŒ–æ¨å¼€çš„æ–¹å‘</span>            attackTarget<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isStopped <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token comment">//velocityè¡¨ç¤ºé€Ÿåº¦ï¼Œè¿™é‡Œç»™äº†ä¸»è§’ä¸€ä¸ªåå‘é€Ÿåº¦ï¼Œè¾¾åˆ°ç»™æ¨å¼€çš„æ•ˆæœ</span>            attackTarget<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>velocity <span class="token operator">=</span> direction<span class="token operator">*</span>kickForce<span class="token punctuation">;</span>                        attackTarget<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Animator<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetTrigger</span><span class="token punctuation">(</span><span class="token string">"Dizzy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//äººç‰©è¿›å…¥çœ©æ™•çŠ¶æ€</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åæˆ‘ä»¬æŠŠåŠ¨ç”»äº‹ä»¶æ·»åŠ ä¸Šï¼Œ<code>Attack02</code>ç”¨çš„äº‹ä»¶æ˜¯æˆ‘ä»¬ä¸Šé¢å†™çš„<code>kickOff()</code></p><p>åŒæ—¶è¿™é‡Œæœ‰ä¸ªçœ©æ™•çŠ¶æ€ï¼Œæˆ‘ä»¬æŠŠçœ©æ™•åŠ¨ç”»å¦‚ä¸‹æ·»åŠ å¥½ï¼ŒåŒæ—¶çœ©æ™•åŠ¨ç”»é€Ÿåº¦æˆ‘æ”¹ä¸ºäº†2ï¼Œè®©å®ƒæ’­æ”¾å¿«ä¸€ç‚¹</p><img src="https://p5-tt.byteimg.com/origin/pgc-image/e375df607aa64f32b0779527e3494c29.png" alt="2.png" style="zoom:80%;" /><h1 id="æ›¿æ¢åŠ¨ç”»å¹¶ä¸”æ·»åŠ ä¸€ä¸ªåŠ¨ç”»è¡Œä¸º"><a href="#æ›¿æ¢åŠ¨ç”»å¹¶ä¸”æ·»åŠ ä¸€ä¸ªåŠ¨ç”»è¡Œä¸º" class="headerlink" title="æ›¿æ¢åŠ¨ç”»å¹¶ä¸”æ·»åŠ ä¸€ä¸ªåŠ¨ç”»è¡Œä¸º"></a>æ›¿æ¢åŠ¨ç”»å¹¶ä¸”æ·»åŠ ä¸€ä¸ªåŠ¨ç”»è¡Œä¸º</h1><p>æˆ‘ä»¬æŠŠå²è±å§†çš„åŠ¨ç”»å¤åˆ¶ä¸€ä»½ç»™å…½äººï¼Œç„¶åä¸ºäº†ä¿æŒå…½äººåœ¨æ¨å¼€äººç‰©æ—¶äººç‰©è¿›å…¥çœ©æ™•çŠ¶æ€å¹¶ä¸”ä¸èƒ½ç§»åŠ¨ï¼Œæˆ‘ä»¬è¿˜è¦æ·»åŠ ä¸€ä¸ªåŠ¨ç”»è¡Œä¸ºï¼ˆ<code>Behaviour</code>ï¼‰</p><p>æ›¿æ¢åŠ¨ç”»è¿‡ç¨‹ä¸å†æè¿°ï¼Œä½†æ˜¯æ³¨æ„è¿™é‡Œ<strong>ä¸èƒ½</strong>é‡‡ç”¨åŠ¨ç”»æ§åˆ¶å™¨ç»§æ‰¿çš„æ–¹å¼</p><p>è¿™é‡Œå°±è¯´ä¸€ä¸‹åŠ¨ç”»è¡Œä¸ºï¼Œæ‰¾åˆ°äººç‰©çš„<code>Dizzy</code>åŠ¨ç”»ï¼Œç‚¹å‡»<code>Add Behaviour</code>ï¼Œåˆ›å»ºä¸€ä¸ªå«åš<code>Stop Agent</code>çš„è¡Œä¸ºï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªä»£ç æ–‡ä»¶ï¼Œåˆ›å»ºå¥½åæˆ‘ä»¬æŠŠè¿™ä¸ªä»£ç æ–‡ä»¶å½’ç±»æ”¾å¥½</p><img src="https://p9-tt.byteimg.com/origin/pgc-image/3b6e539cae684b47ae1971d9d95485de.png" alt="3.png" style="zoom:80%;" /><img src="https://p9-tt.byteimg.com/origin/pgc-image/752bc9fca53d4a6a80c77a7381d9a0f0.png" alt="4.png" style="zoom:80%;" /><p>è¿™ä¸ªä»£ç æ–‡ä»¶æ‰“å¼€å°±å·²ç»æœ‰ä¸€äº›æ³¨é‡Šåœ¨é‚£äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å–æ¶ˆæˆ‘ä»¬è¦ç”¨æ–¹æ³•çš„æ³¨é‡Šï¼Œè¿™é‡Œç”¨åˆ°çš„å°±æ˜¯è¿›å…¥åŠ¨ç”»ã€åŠ¨ç”»æ’­æ”¾æ—¶ä»¥åŠåŠ¨ç”»ç»“æŸæ—¶åˆ»çš„ä»£ç </p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StopAgent</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">StateMachineBehaviour</span></span><span class="token punctuation">&#123;</span>    <span class="token comment">// OnStateEnter is called when a transition starts and the state machine starts to evaluate this state</span>    <span class="token keyword">override</span> <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnStateEnter</span><span class="token punctuation">(</span><span class="token class-name">Animator</span> animator<span class="token punctuation">,</span> <span class="token class-name">AnimatorStateInfo</span> stateInfo<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> layerIndex<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        animator<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isStopped <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// OnStateUpdate is called on each Update frame between OnStateEnter and OnStateExit callbacks</span>    <span class="token keyword">override</span> <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnStateUpdate</span><span class="token punctuation">(</span><span class="token class-name">Animator</span> animator<span class="token punctuation">,</span> <span class="token class-name">AnimatorStateInfo</span> stateInfo<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> layerIndex<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        animator<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isStopped <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// OnStateExit is called when a transition ends and the state machine finishes evaluating this state</span>    <span class="token keyword">override</span> <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnStateExit</span><span class="token punctuation">(</span><span class="token class-name">Animator</span> animator<span class="token punctuation">,</span> <span class="token class-name">AnimatorStateInfo</span> stateInfo<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> layerIndex<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>       animator<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isStopped <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// OnStateMove is called right after Animator.OnAnimatorMove()</span>    <span class="token comment">//override public void OnStateMove(Animator animator, AnimatorStateInfo stateInfo, int layerIndex)</span>    <span class="token comment">//&#123;</span>    <span class="token comment">//    // Implement code that processes and affects root motion</span>    <span class="token comment">//&#125;</span>    <span class="token comment">// OnStateIK is called right after Animator.OnAnimatorIK()</span>    <span class="token comment">//override public void OnStateIK(Animator animator, AnimatorStateInfo stateInfo, int layerIndex)</span>    <span class="token comment">//&#123;</span>    <span class="token comment">//    // Implement code that sets up animation IK (inverse kinematics)</span>    <span class="token comment">//&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¹‹åæˆ‘ä»¬å¯ä»¥æŠŠè¡Œä¸ºæ”¾è¿›äººç‰©çš„çœ©æ™•ã€å—ä¼¤ç­‰åŠ¨ç”»ï¼Œç”šè‡³æ˜¯æ•Œäººçš„æ”»å‡»åŠ¨ç”»</p><p>æ³¨æ„çš„æ˜¯æ·»åŠ åˆ°æ•Œäººæ”»å‡»åŠ¨ç”»æ—¶å¯èƒ½ä¼šæœ‰ä¸€ä¸ªæŠ¥é”™ï¼ŒåŸå› æ˜¯æˆ‘ä»¬å¯èƒ½æŠŠæ•Œäººæ‰“æ­»äº†ï¼Œå¯¼è‡´è¡Œä¸ºæ— æ³•è·å¾—agentï¼Œè§£å†³åŠæ³•å¦‚ä¸‹ï¼Œæˆ‘ä»¬å»åˆ°<code>EnemyController.cs</code>ä¿®æ”¹æ•Œäººæ­»äº†ä¹‹åçš„çŠ¶æ€</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">case</span> EnemyStates<span class="token punctuation">.</span>DEAD<span class="token punctuation">:</span>collider<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">//é˜²æ­¢æ—¶å€™å¼€ä¸šå†æ¬¡æ”»å‡»</span><span class="token comment">//agent.enabled = false;//ç›´æ¥å…³é—­å¯¼èˆªç»„ä»¶</span>agent<span class="token punctuation">.</span>radius <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//æŠŠagentçš„èŒƒå›´ç¼©å°</span><span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">,</span><span class="token number">2f</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é”€æ¯æ¸¸æˆå¯¹è±¡ï¼Œå»¶è¿Ÿä¸º2ç§’</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæˆ‘ä»¬åŸæœ¬æƒ³å…³é—­agentä»¥è¾¾åˆ°agentæ²¡æœ‰ä½“ç§¯æ•ˆæœï¼Œæ‰€ä»¥å¯ä»¥æŠŠagent.enabled = false;è¯­å¥æ”¹ä¸ºäº†ç›´æ¥æŠŠagentèŒƒå›´ç¼©å°åˆ°0ï¼Œä¹Ÿæ˜¯åŒæ ·çš„æ•ˆæœ</p><p>åˆ°è¿™æˆ‘ä»¬å°±åˆæ­¥è®¾ç½®å¥½äº†å…½äººäº†</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt; åœ¨è¿™ä¸€ç« èŠ‚ä¸­æˆ‘ä»¬æ¥è®¾ç½®ä¸€ä¸‹å…½äººæ•Œäººï¼Œç”±äºå®ƒçš„&lt;code&gt;Attack02&lt;/code&gt;åŠ¨ç”»åŒ…å«ä¸€ä¸ªæ¨äººçš„æ•ˆæœï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å®ƒè¿›è¡Œå•ç‹¬çš„æµ‹è¯•ï¼Œè€Œä¸æ˜¯ç»§ç»­æ²¿ç”¨ä¹‹å‰çš„&lt;code&gt;EnemyController&lt;/code&gt;ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨å®ƒåŸºç¡€ä¸Šè¿›è¡Œæ·»åŠ ï¼Œæ‰€ä»¥å¯ä»¥é€‰æ‹©ç»§æ‰¿ç±»æ–¹å¼æ”¹</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°16-åˆ¶ä½œæ›´å¤šçš„æ•Œäºº</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B016-%E5%88%B6%E4%BD%9C%E6%9B%B4%E5%A4%9A%E7%9A%84%E6%95%8C%E4%BA%BA/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B016-%E5%88%B6%E4%BD%9C%E6%9B%B4%E5%A4%9A%E7%9A%84%E6%95%8C%E4%BA%BA/</id>
    <published>2021-07-22T01:53:09.000Z</published>
    <updated>2021-07-22T15:31:27.489Z</updated>
    
    <content type="html"><![CDATA[<p> è¿™ä¸€ç« æˆ‘ä»¬æŠŠæˆ‘ä»¬çš„æ•Œäººæ•°é‡åˆ¶ä½œåœ°å¤šä¸€äº›ï¼Œæ›´åŠ åœ°å»å®Œå–„æ¸¸æˆ</p><h1 id="åˆ¶ä½œå¤šä¸€ä¸ªå²è±å§†"><a href="#åˆ¶ä½œå¤šä¸€ä¸ªå²è±å§†" class="headerlink" title="åˆ¶ä½œå¤šä¸€ä¸ªå²è±å§†"></a>åˆ¶ä½œå¤šä¸€ä¸ªå²è±å§†</h1><p>åˆ¶ä½œå¤šä¸€ä¸ªå²è±å§†å¾ˆç®€å•ï¼Œåªç”¨å¯¹ç€ä¹‹å‰çš„å²è±å§†<code>Ctrl + D</code>å¤åˆ¶ä¸€ä¸‹å°±å¯ä»¥</p><p>ä½†æ˜¯è¿™ä¹‹ä¸­ä¹Ÿæœ‰å­˜åœ¨é—®é¢˜ï¼Œå°±æ˜¯å²è±å§†ä¼šå…±ç”¨ä¸€ä¸ª<code>Character Data</code>ï¼Œè¿™å¯ä»¥åœ¨æ¯æ¬¡å¼€å§‹æ¸¸æˆæ—¶åˆ›å»ºä¸€ä¸ªä¸´æ—¶<code>Data</code>ç»™ä»–ä»¬æ¥è§£å†³</p><p>æ‰“å¼€<code>Character States.cs</code></p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token class-name">CharacterData_SO</span> characterData<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">CharacterData_SO</span> templateData<span class="token punctuation">;</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>templateData <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token comment">//å¤åˆ¶ä¸€ä¸ªä¸´æ—¶æ¨¡æ¿Data</span>        characterData <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>templateData<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç”Ÿæˆå¤šä¸€ä¸ªdata</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åå²è±å§†èº«ä¸Šçš„<code>Data</code>å¦‚ä¸‹è®¾ç½®</p><img src="https://p6-tt.byteimg.com/origin/pgc-image/e780aba5845e41caa4a1b38673b38708.png" alt="2.png" style="zoom:80%;" /><h1 id="æ”¾ç½®ä¸€ä¸ªåˆºåˆºé¾Ÿ"><a href="#æ”¾ç½®ä¸€ä¸ªåˆºåˆºé¾Ÿ" class="headerlink" title="æ”¾ç½®ä¸€ä¸ªåˆºåˆºé¾Ÿ"></a>æ”¾ç½®ä¸€ä¸ªåˆºåˆºé¾Ÿ</h1><p>æˆ‘ä»¬çš„å²è±å§†ç´ ææ–‡ä»¶å¤¹ä¸‹æœ‰å¦å¤–ä¸€ä¸ªæ•Œäººåˆºåˆºé¾Ÿï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå®ƒæ”¾ç½®ä¸Šæ¥</p><p>ç”±äºå®ƒä¹Ÿæ˜¯ä¾èµ–<code>EnemyController.cs</code>çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä¹‹å‰è¿˜è¦æ·»åŠ ä¸€è¡Œå¼ºåˆ¶é™„å¸¦ç»„ä»¶ä»£ç </p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">RequireComponent</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">CharacterStates</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™æ ·å°±å¯ä»¥å¼ºåˆ¶é™„å¸¦<code>CharacterStates</code>ä»£ç ç»„ä»¶äº†</p><p>åœ¨ç´ æä¸­æ‰¾åˆ°åˆºåˆºé¾ŸæŠŠå®ƒæ”¾ç½®åœ¨åœ°å›¾ä¸Š</p><img src="https://p9-tt.byteimg.com/origin/pgc-image/c0a6ab51762547b5855e2d4d808bb14c.png" alt="3.png" style="zoom:80%;" /><p>ç„¶åä¸ºå®ƒæ·»åŠ <code>EnemyController.cs</code>ï¼Œä»¥åŠè®¾ç½®å¥½åŸºæœ¬ä¿¡æ¯</p><img src="https://p9-tt.byteimg.com/origin/pgc-image/82f0fc3573f7434aa1a235f4fbe931c3.png" alt="4.png" style="zoom:80%;" /><p>è¿˜æœ‰ä¸€ä¸ªå…³é”®çš„åœ°æ–¹åœ¨äºåŠ¨ç”»çš„åˆ‡æ¢ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸€ä¸ªæŠ€å·§ï¼ŒæŠŠå²è±å§†åŸæ¥çš„<code>Animations</code>å¤åˆ¶ä¸€ä¸ªå‡ºæ¥ç›´æ¥è¦†ç›–æ›¿æ¢åŠ¨ç”»</p><p>æˆ‘ä»¬åœ¨å³é”®åˆ›å»ºæ—¶é€‰æ‹©<code>Animator Override Controller</code>å°±å¯ä»¥äº†</p><img src="https://p3-tt.byteimg.com/origin/pgc-image/61c8eb67c769464eb07f58ab37b2c59d.png" alt="5.png" style="zoom:80%;" /><p>ç„¶åå±æ€§é¢æ¿ä¸­ç¬¬ä¸€ä¸ªé€‰é¡¹å°±ä¼šé—®æˆ‘ä»¬è¦ä¾é å“ªä¸ª<code>Animation</code>ä¸ºæ¨¡æ¿ï¼Œæˆ‘ä»¬é€‰æ‹©å²è±å§†åŸæ¥çš„åŠ¨ç”»</p><img src="https://p5-tt.byteimg.com/origin/pgc-image/60d1f5873d4b440ba04764b3bdfd5cda.png" alt="6.png" style="zoom:80%;" /><p>ä¹‹åå†å°†å®ƒä»¬æ›¿æ¢å°±å¯ä»¥äº†ï¼Œåˆ«å¿˜äº†<code>Attack01</code>å’Œ<code>Attack02</code>è¦å•ç‹¬å¤åˆ¶å‡ºæ¥ä»¥åŠæ·»åŠ å¸§äº‹ä»¶</p><h1 id="å…½äººå’ŒçŸ³å¤´äºº"><a href="#å…½äººå’ŒçŸ³å¤´äºº" class="headerlink" title="å…½äººå’ŒçŸ³å¤´äºº"></a>å…½äººå’ŒçŸ³å¤´äºº</h1><p>è¿˜æœ‰éœ€è¦æ·»åŠ çš„å°±æ˜¯å…½äººå’ŒçŸ³å¤´äººï¼Œè¿™é‡Œæˆ‘ä»¬æš‚æ—¶æ·»åŠ å¥½ç´ æå†æŠŠå®ƒä»¬ç§»åˆ°åœ°å›¾ä¸Šå°±å¥½äº†ï¼Œä¹‹åçš„äº‹æƒ…ä¸‹ä¸€ç« èŠ‚å†å¤„ç†</p><img src="https://p6-tt.byteimg.com/origin/pgc-image/712fe6fd05d24f17a782e3bbd8937ab7.png" alt="7.png" style="zoom:80%;" /><img src="https://p5-tt.byteimg.com/origin/pgc-image/c884e6e35d714f3988fb0a5b4109a5cc.png" alt="8.png" style="zoom:80%;" />]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt; è¿™ä¸€ç« æˆ‘ä»¬æŠŠæˆ‘ä»¬çš„æ•Œäººæ•°é‡åˆ¶ä½œåœ°å¤šä¸€äº›ï¼Œæ›´åŠ åœ°å»å®Œå–„æ¸¸æˆ&lt;/p&gt;
&lt;h1 id=&quot;åˆ¶ä½œå¤šä¸€ä¸ªå²è±å§†&quot;&gt;&lt;a href=&quot;#åˆ¶ä½œå¤šä¸€ä¸ªå²è±å§†&quot; class=&quot;headerlink&quot; title=&quot;åˆ¶ä½œå¤šä¸€ä¸ªå²è±å§†&quot;&gt;&lt;/a&gt;åˆ¶ä½œå¤šä¸€ä¸ªå²è±å§†&lt;/h1&gt;&lt;p&gt;åˆ¶ä½œå¤šä¸€ä¸ªå²è±å§†å¾ˆ</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°15-ä½¿ç”¨æ¥å£å®ç°è§‚å¯Ÿè€…æ¨¡å¼çš„è®¢é˜…å’Œå¹¿æ’­</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B015-%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%E7%9A%84%E8%AE%A2%E9%98%85%E5%92%8C%E5%B9%BF%E6%92%AD/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B015-%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%E7%9A%84%E8%AE%A2%E9%98%85%E5%92%8C%E5%B9%BF%E6%92%AD/</id>
    <published>2021-07-21T01:30:13.000Z</published>
    <updated>2021-07-22T04:22:22.553Z</updated>
    
    <content type="html"><![CDATA[<p> è¿™ä¸€ç« æˆ‘ä»¬ä½¿ç”¨æ¥å£æ¥å®ç°è§‚å¯Ÿè€…æ¨¡å¼çš„è®¢é˜…å’Œå¹¿æ’­ï¼ŒåŒæ—¶ä¹Ÿæ¥å®ç°ç©å®¶æ­»äº†æ¸¸æˆç»“æŸä¹‹åæ•Œäººçš„è·èƒœåŠ¨ç”»</p><h1 id="ç¼–å†™æ¥å£"><a href="#ç¼–å†™æ¥å£" class="headerlink" title="ç¼–å†™æ¥å£"></a>ç¼–å†™æ¥å£</h1><p>åœ¨<code>Tools</code>æ–‡ä»¶å¤¹ä¸‹æˆ‘ä»¬æ–°å»ºä¸€ä¸ªä»£ç æ–‡ä»¶<code>IEndGameObserver.cs</code>è¡¨ç¤ºæ¸¸æˆç»“æŸä¹‹åçš„æ¥å£</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IEndGameObserver</span><span class="token punctuation">&#123;</span>    <span class="token comment">//æ³¨æ„æ¥å£åªå†™å£°æ˜ä¸å†™å®šä¹‰</span>    <span class="token comment">//æ¸¸æˆç»“æŸè¦æ“ä½œçš„éƒ½åœ¨è¿™ä¸ªæ¥å£å®ç°</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">EndNotify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åæˆ‘ä»¬æ¥åˆ°<code>EnemyController.cs</code>ç¼–å†™ä¸€ä¸ªå¹¿æ’­æ–¹æ³•</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EnemyController</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span><span class="token punctuation">,</span><span class="token class-name">IEndGameObserver</span></span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">EndNotify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//è·èƒœåŠ¨ç”»</span>        <span class="token comment">//åœæ­¢æ‰€æœ‰ç§»åŠ¨</span>        <span class="token comment">//åœæ­¢Agent</span>        isChase <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        isWalk <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        attackTarget <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶å®ƒè¦åœ¨æ¸¸æˆç»“æŸæ—¶è¦æœ‰æ“ä½œçš„ä»£ç ä¹Ÿå¯ä»¥åƒè¿™ç§æ–¹å¼æ¥ç»§æ‰¿æ¥å£å¹¶å®ç°æ“ä½œ</p><h1 id="è®¢é˜…æ¥å£"><a href="#è®¢é˜…æ¥å£" class="headerlink" title="è®¢é˜…æ¥å£"></a>è®¢é˜…æ¥å£</h1><p>å› ä¸ºæˆ‘ä»¬ä¼šæœ‰å¾ˆå¤šä¸åŒçš„ä»£ç æ–‡ä»¶éƒ½ä¼šç»§æ‰¿è¿™ä¸ªæ¥å£ï¼Œæ€æ ·æ¥ç®¡ç†è®¢é˜…ä¹Ÿæ˜¯å€¼å¾—è€ƒè™‘çš„äº‹æƒ…</p><p>æ‰“å¼€ä¸Šä¸€ç« åˆ›å»ºçš„<code>GameManager.cs</code></p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Sigltion<span class="token punctuation">&lt;</span>GameManager<span class="token punctuation">></span></span></span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">CharacterStates</span> playerStates<span class="token punctuation">;</span>    <span class="token comment">//æ¸¸æˆç»“æŸæ—¶è°ƒç”¨çš„æ–¹æ³•çš„æ•°ç»„</span>    List<span class="token operator">&lt;</span>IEndGameObserver<span class="token operator">></span>endGameObservers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>IEndGameObserver<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">RigisterPlayer</span><span class="token punctuation">(</span><span class="token class-name">CharacterStates</span> player<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//é€šè¿‡å¤–ç•Œæ³¨å†Œçš„æ–¹å¼æ¥è·å¾—å¯¹è±¡çš„playerStates</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>playerStates <span class="token operator">=</span> player<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AddObserve</span><span class="token punctuation">(</span><span class="token class-name">IEndGameObserver</span> gameObserver<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//åŠ å…¥å¾…æ“ä½œæ•°ç»„</span>        endGameObservers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>gameObserver<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">RemoveObserve</span><span class="token punctuation">(</span><span class="token class-name">IEndGameObserver</span> gameObserver<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//å°†ç‰¹å®šçš„è§‚å¯Ÿè€…åœ¨å¾…æ“ä½œæ•°ç»„ä¸­åˆ é™¤</span>        endGameObservers<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>gameObserver<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">NotifyObserves</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//è°ƒç”¨å¾…æ“ä½œæ•°ç»„ä¸­æ¯ä¸€ä¸ªè§‚å¯Ÿè€…</span>        <span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token class-name">IEndGameObserver</span> gameObserver <span class="token keyword">in</span> endGameObservers<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            gameObserver<span class="token punctuation">.</span><span class="token function">EndNotify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸ºæˆ‘ä»¬æ˜¯è¦åœ¨ä¸»è§’æ­»äº†ä¹‹åå¼€å§‹æ¸¸æˆç»“æŸçš„æ“ä½œï¼Œæ‰€ä»¥å›åˆ°<code>PlayerController.cs</code>åœ¨åˆ¤æ–­ä¸»è§’æ­»äº†ä¹‹åè°ƒç”¨å¹¿æ’­</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>charcterStates<span class="token punctuation">.</span>currentHealth <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//åˆ¤æ–­æ­»äº¡</span>        isDead <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">NotifyObserves</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŒæ—¶æˆ‘ä»¬åœ¨<code>EnemyController.cs</code>ä¸­è¿˜è¦è¡¥å……ä¸€ä¸ªåŠ å…¥å¾…æ“ä½œæ•°ç»„æ–¹æ³•å’Œç§»é™¤æ–¹æ³•</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//void OnEnable()&#123;//Unityçš„ä¸€ä¸ªå¯åŠ¨æ¸¸æˆæ—¶è‡ªåŠ¨è°ƒç”¨çš„å‡½æ•°</span><span class="token comment">//  GameManager.Instance.AddObserve(this);</span><span class="token comment">// &#125;</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//å¼€å§‹æ¸¸æˆæ—¶å…ˆæ£€æµ‹æ˜¯å¦å‹¾é€‰äº†å®ˆå«çŠ¶æ€</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>isGuard<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        enemyStates <span class="token operator">=</span> EnemyStates<span class="token punctuation">.</span>GUARD<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>        enemyStates <span class="token operator">=</span> EnemyStates<span class="token punctuation">.</span>PATROL<span class="token punctuation">;</span>        <span class="token function">GetNewWayPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token comment">//FIXME:åœºæ™¯åˆ‡æ¢åšå¥½åä¿®æ”¹æ‰</span>    GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">AddObserve</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnDisable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>GameManager<span class="token punctuation">.</span>IsInitialized<span class="token punctuation">)</span>         <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token comment">//å¦‚æœGameManageræ²¡æœ‰ç»™æ„å»ºçš„è¯å°±ç›´æ¥return</span>        GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">RemoveObserve</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”±äº<code>OnEnable()</code>æ˜¯åœ¨æ¸¸æˆå¼€å§‹æ—¶æ—©æœŸå°±è°ƒç”¨çš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¿™æ ·å†™ä¼šå‘ç”ŸæŠ¥é”™ï¼Œæˆ‘ä»¬è¦ç­‰åˆ°åé¢å†™åœºæ™¯åŠ è½½æ—¶æ‰ç”¨è¿™ç§æ–¹æ³•ï¼Œè¿™é‡Œæš‚æ—¶æŠŠåŠ å…¥å¾…æ“ä½œæ•°ç»„ä»£ç å•ç‹¬å†™åˆ°<code>Start()</code>é‡Œ</p><img src="https://p9-tt.byteimg.com/origin/pgc-image/5e902802764e44b099915b6323377dfb.png" alt="1.png" style="zoom:80%;" /><h1 id="é…ç½®æ•Œäººèƒœåˆ©åŠ¨ç”»"><a href="#é…ç½®æ•Œäººèƒœåˆ©åŠ¨ç”»" class="headerlink" title="é…ç½®æ•Œäººèƒœåˆ©åŠ¨ç”»"></a>é…ç½®æ•Œäººèƒœåˆ©åŠ¨ç”»</h1><p>æˆ‘ä»¬æ‰“å¼€åŠ¨ç”»ç®¡ç†å™¨ï¼Œé…ç½®æ•Œäººåœ¨æ‰“æ­»ä¸»è§’åçš„åŠ¨ç”»</p><p>æ–°å»ºä¸€ä¸ª<code>Victory Layer</code>ï¼ˆæ³¨æ„æƒé‡å€¼ä¸º1ï¼‰ï¼Œä»¥åŠä¸€ä¸ª<code>Win</code>å¸ƒå°”å€¼æ§åˆ¶åŠ¨ç”»è§¦å‘</p><img src="https://p6-tt.byteimg.com/origin/pgc-image/85512e9ac113448c808c81d1b29dc079.png" alt="1.png" style="zoom:80%;" /><p>è¿”å›<code>EnemyController.cs</code>ä»£ç æˆ‘ä»¬è¦é…ç½®åŠ¨ç”»å˜é‡ä»€ä¹ˆæ—¶å€™è§¦å‘</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>charcterStates<span class="token punctuation">.</span>currentHealth <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        isDead <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">//è¡€é‡å˜0åˆ™æ­»äº¡çŠ¶æ€ä¸ºçœŸ</span>    <span class="token keyword">else</span><span class="token punctuation">&#123;</span><span class="token comment">//åŠ äº†ä¸ªelseæ˜¯é˜²æ­¢æ­»åæ•Œäººåœ¨èƒœåˆ©åŠ¨ç”»ä¸‹ä¸€å¸§åˆç»™åˆ‡æ¢å›æ™®é€šåŠ¨ç”»</span>        <span class="token function">SwitchEnemyStates</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">SwitchAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        lastAttackTime<span class="token operator">-=</span>Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">;</span><span class="token comment">//æ¯ä¸€å¸§éƒ½å‡å†·å´</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">EndNotify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//è·èƒœåŠ¨ç”»</span>    <span class="token comment">//åœæ­¢æ‰€æœ‰ç§»åŠ¨</span>    <span class="token comment">//åœæ­¢Agent</span>    anim<span class="token punctuation">.</span><span class="token function">SetBool</span><span class="token punctuation">(</span><span class="token string">"Win"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    isChase <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    isWalk <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    attackTarget <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åæˆ‘ä»¬å‘ç°ä¸»è§’æ­»äº†ä¹‹åè¿˜æ˜¯å¯ä»¥æ§åˆ¶ç§»åŠ¨ï¼Œè¿™é‡Œæˆ‘ä»¬åœ¨<code>PlyaerController.cs</code>ä¿®å¤ä¸€ä¸‹</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">MoveToTarget</span><span class="token punctuation">(</span><span class="token class-name">Vector3</span> target<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>agent<span class="token punctuation">.</span>isStopped <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>isDead<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token comment">//å¦‚æœæ­»äº†å°±ä¸èƒ½ç§»åŠ¨</span><span class="token function">StopAllCoroutines</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç»ˆæ­¢å…¶å®ƒç§»åŠ¨å‘½ä»¤</span>agent<span class="token punctuation">.</span>destination <span class="token operator">=</span> target<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">EventAttact</span><span class="token punctuation">(</span><span class="token class-name">GameObject</span> target<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>isDead<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token comment">//å¦‚æœæ­»äº†å°±ä¸èƒ½ç§»åŠ¨</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//å¦‚æœé¼ æ ‡ç‚¹å‡»çš„ç›®æ ‡ä¸ä¸ºç©ºï¼Œæˆ–è€…ç‚¹å‡»çš„æ•Œäººä¸æ˜¯å±äºæ­»äº¡çŠ¶æ€</span>attactTarget <span class="token operator">=</span> target<span class="token punctuation">;</span><span class="token comment">//åˆ¤æ–­æ˜¯å¦æš´å‡»</span>charcterStates<span class="token punctuation">.</span>isCritical <span class="token operator">=</span> Random<span class="token punctuation">.</span><span class="token keyword">value</span> <span class="token operator">&lt;</span> charcterStates<span class="token punctuation">.</span>attackData<span class="token punctuation">.</span>criticalChance<span class="token punctuation">;</span><span class="token function">StartCoroutine</span><span class="token punctuation">(</span><span class="token function">MoveToAttackTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt; è¿™ä¸€ç« æˆ‘ä»¬ä½¿ç”¨æ¥å£æ¥å®ç°è§‚å¯Ÿè€…æ¨¡å¼çš„è®¢é˜…å’Œå¹¿æ’­ï¼ŒåŒæ—¶ä¹Ÿæ¥å®ç°ç©å®¶æ­»äº†æ¸¸æˆç»“æŸä¹‹åæ•Œäººçš„è·èƒœåŠ¨ç”»&lt;/p&gt;
&lt;h1 id=&quot;ç¼–å†™æ¥å£&quot;&gt;&lt;a href=&quot;#ç¼–å†™æ¥å£&quot; class=&quot;headerlink&quot; title=&quot;ç¼–å†™æ¥å£&quot;&gt;&lt;/a&gt;ç¼–å†™æ¥å£&lt;/h1&gt;&lt;p&gt;åœ¨&lt;code</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°14-æ³›å‹å•ä¾‹æ¨¡å¼</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B014-%E6%B3%9B%E5%9E%8B%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B014-%E6%B3%9B%E5%9E%8B%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-07-20T01:52:36.000Z</published>
    <updated>2021-07-21T01:34:24.792Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸€ç« æˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªæ³›å‹å•ä¾‹æ¨¡å¼çš„ä»£ç ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„é¡¹ç›®ä¸­ä¼šæœ‰å¾ˆå¤šçš„<code>Manager</code>ï¼Œå¦‚æœæ¯ä¸ªéƒ½ä½¿ç”¨å•ä¾‹æ¨¡å¼ä¼šæ›´å¥½åœ°å»ç®¡ç†å’Œä½¿ç”¨</p><p>ä¾‹å¦‚å…¶ä¸­æ§åˆ¶æˆ‘ä»¬æ¸¸æˆçš„å¼€å§‹æš‚åœç­‰ä¸€èˆ¬æ˜¯ç”¨<code>Game Manager</code>æ¥å‘½åï¼Œæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªä»£ç æ–‡ä»¶ä»¥åŠä¸€ä¸ªç©ºå¯¹è±¡ä½¿å¾—ä»£ç å¯ä»¥ä¾é™„åœ¨å®ƒä¸Šé¢</p><img src="https://p6-tt.byteimg.com/origin/pgc-image/d8bf83d3ad554952a66a0b00aafc1b96.png" alt="1.png" style="zoom:80%;" /><p>è¿™ä¸ªä»£ç æˆ‘ä»¬å…ˆæ”¾åœ¨ä¸€è¾¹ä¹‹åå†è¡¥å……ï¼Œå…ˆæŠŠæ³›å‹å•ä¾‹æ¨¡å¼ä»£ç å†™äº†å…ˆ</p><h1 id="æ³›å‹å•ä¾‹æ¨¡å¼"><a href="#æ³›å‹å•ä¾‹æ¨¡å¼" class="headerlink" title="æ³›å‹å•ä¾‹æ¨¡å¼"></a>æ³›å‹å•ä¾‹æ¨¡å¼</h1><p>åˆ›å»ºç›®å½•æ–‡ä»¶å¦‚ä¸‹</p><img src="https://p26-tt.byteimg.com/origin/pgc-image/86a804f3de9a4c9b960af8c63dd89626.png" alt="2.png" style="zoom:80%;" /><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sigltion<span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Sigltion<span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">T</span> instance<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">T</span> Instance<span class="token punctuation">&#123;</span>        <span class="token keyword">get</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//å…è®¸å­ç±»å¯¹Awakeè¿›è¡Œé‡å†™</span>    <span class="token keyword">protected</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>            instance <span class="token operator">=</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//æ£€æµ‹å•ä¾‹æ˜¯å¦ç”Ÿæˆ</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> IsInitialized<span class="token punctuation">&#123;</span>        <span class="token keyword">get</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//å…è®¸å­ç±»ä¿®æ”¹é”€æ¯æ—¶çš„æ“ä½œ</span>    <span class="token keyword">protected</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">)</span>            instance <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·ä¸€æ—¦ä¸€ä¸ªAç±»ç»§æ‰¿äº†<code>Sigltion&lt;A&gt;</code>ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å…¶å®ƒç±»ä¸­è°ƒç”¨Aç±»çš„å•ä¾‹ï¼Œå¦‚ï¼š<code>A.Instance</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¿™ä¸€ç« æˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªæ³›å‹å•ä¾‹æ¨¡å¼çš„ä»£ç ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„é¡¹ç›®ä¸­ä¼šæœ‰å¾ˆå¤šçš„&lt;code&gt;Manager&lt;/code&gt;ï¼Œå¦‚æœæ¯ä¸ªéƒ½ä½¿ç”¨å•ä¾‹æ¨¡å¼ä¼šæ›´å¥½åœ°å»ç®¡ç†å’Œä½¿ç”¨&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚å…¶ä¸­æ§åˆ¶æˆ‘ä»¬æ¸¸æˆçš„å¼€å§‹æš‚åœç­‰ä¸€èˆ¬æ˜¯ç”¨&lt;code&gt;Game Manager&lt;/code&gt;æ¥å‘½åï¼Œæˆ‘ä»¬æ¥</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°13-æ•Œäººçš„å®ˆå«çŠ¶æ€å’Œæ­»äº¡çŠ¶æ€</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B013-%E6%95%8C%E4%BA%BA%E7%9A%84%E5%AE%88%E5%8D%AB%E7%8A%B6%E6%80%81%E5%92%8C%E6%AD%BB%E4%BA%A1%E7%8A%B6%E6%80%81/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B013-%E6%95%8C%E4%BA%BA%E7%9A%84%E5%AE%88%E5%8D%AB%E7%8A%B6%E6%80%81%E5%92%8C%E6%AD%BB%E4%BA%A1%E7%8A%B6%E6%80%81/</id>
    <published>2021-07-19T01:43:57.000Z</published>
    <updated>2021-07-19T04:08:52.903Z</updated>
    
    <content type="html"><![CDATA[<p> è¿™ä¸€ç« èŠ‚æˆ‘ä»¬æ¥åˆ¶ä½œæ•Œäººçš„å®ˆå«çŠ¶æ€å’Œæ­»äº¡çŠ¶æ€</p><h1 id="æ•Œäººçš„å®ˆå«çŠ¶æ€ï¼ˆGuardï¼‰"><a href="#æ•Œäººçš„å®ˆå«çŠ¶æ€ï¼ˆGuardï¼‰" class="headerlink" title="æ•Œäººçš„å®ˆå«çŠ¶æ€ï¼ˆGuardï¼‰"></a>æ•Œäººçš„å®ˆå«çŠ¶æ€ï¼ˆGuardï¼‰</h1><p>æ‰“å¼€<code>EnemyController.cs</code></p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">private</span> <span class="token class-name">Quaternion</span> guardRotation<span class="token punctuation">;</span><span class="token comment">//è®°å½•æ•Œäººæœ€åˆçš„æ—‹è½¬è§’åº¦ï¼Œç”¨äºè„±ç¦»è¿½å‡»å›å»å®ˆå«ç‚¹ç –å¤´è½¬å¤´</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//...</span>    guardRotation <span class="token operator">=</span> transform<span class="token punctuation">.</span>rotation<span class="token punctuation">;</span><span class="token comment">//è·å¾—æœ€åˆæ—‹è½¬è§’åº¦</span><span class="token punctuation">&#125;</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SwitchEnemyStates</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//...</span>    <span class="token keyword">switch</span><span class="token punctuation">(</span>enemyStates<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">case</span> EnemyStates<span class="token punctuation">.</span>GUARD<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>å®ˆå«çŠ¶æ€            isChase <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">//è„±ç¦»è¿½å‡»çŠ¶æ€</span>            <span class="token comment">//å¦‚æœåœ¨è¿½å‡»ä¸»è§’æ—¶å›åˆ°å®ˆå«çŠ¶æ€ï¼Œå°±è¦è·‘å›å®ˆå«ç‚¹</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>position <span class="token operator">!=</span> guardPos<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                isWalk <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">//æ’­æ”¾èµ°è·¯åŠ¨ç”»</span>                agent<span class="token punctuation">.</span>isStopped <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                <span class="token comment">//å¯¼èˆªå›æœ€åˆå®ˆå«ç‚¹</span>                agent<span class="token punctuation">.</span>destination <span class="token operator">=</span> guardPos<span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>Vector3<span class="token punctuation">.</span><span class="token function">SqrMagnitude</span><span class="token punctuation">(</span>guardPos <span class="token operator">-</span> transform<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token operator">&lt;=</span>agent<span class="token punctuation">.</span>stoppingDistance<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    <span class="token comment">//SqrMagnitudeä¹Ÿæ˜¯å¯ä»¥ç”¨äºæ¯”è¾ƒè·ç¦»çš„æ–¹æ³•ï¼Œæ¯”èµ·Distanceç¨å¾®å¿«ä¸€äº›</span>                    <span class="token comment">//è¿™é‡Œæ˜¯åˆ¤æ–­æ˜¯å¦åˆ°è¾¾æœ€åˆå®ˆå«ç‚¹å¯ä»¥åœæ­¢èŒƒå›´</span>                    isWalk <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                    <span class="token comment">//æ…¢æ…¢è½¬å¤´ã€‚ç¬¬ä¸‰ä¸ªå‚æ•°è¶Šæ¥è¿‘1è½¬å¾—è¶Šå¿«</span>                    transform<span class="token punctuation">.</span>rotation <span class="token operator">=</span> Quaternion<span class="token punctuation">.</span><span class="token function">Lerp</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>rotation<span class="token punctuation">,</span>guardRotation<span class="token punctuation">,</span><span class="token number">0.01f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæˆ‘ä»¬å°±å†™å¥½äº†å®ˆå«çŠ¶æ€çš„ä»£ç ï¼Œå…¶ä¸­<code>SqrMagnitude()</code>ä½œç”¨å’Œ<code>Distance()</code>ä¸€æ ·éƒ½æ˜¯æ¯”è¾ƒä¸¤ä¸ªç‚¹çš„è·ç¦»ï¼Œç„¶åæˆ‘ä»¬è¿˜åŠ äº†æ…¢æ…¢è½¬å¤´çš„æ•ˆæœï¼Œå¦åˆ™æ•Œäººå›åˆ°å®ˆå«ç‚¹æ˜¯ä¸ä¼šè½¬å¤´çš„</p><h1 id="æ­»äº¡çŠ¶æ€"><a href="#æ­»äº¡çŠ¶æ€" class="headerlink" title="æ­»äº¡çŠ¶æ€"></a>æ­»äº¡çŠ¶æ€</h1><p>æˆ‘ä»¬å¸Œæœ›å½“æ•Œäººè¡€é‡ä¸º0æ—¶æ’­æ”¾æ­»äº¡åŠ¨ç”»å¹¶ä¸”å°¸ä½“æ¶ˆå¤±æ‰</p><h2 id="è®¾ç½®æ­»äº¡åŠ¨ç”»"><a href="#è®¾ç½®æ­»äº¡åŠ¨ç”»" class="headerlink" title="è®¾ç½®æ­»äº¡åŠ¨ç”»"></a>è®¾ç½®æ­»äº¡åŠ¨ç”»</h2><p>æ‰“å¼€åŠ¨ç”»æ§åˆ¶å™¨ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ª<code>Death Layer</code>ï¼Œä¸è¦å¿˜äº†æƒé‡è®¾ä¸º1</p><img src="https://p5-tt.byteimg.com/origin/pgc-image/32be87ac0205413280a7f42a61d7296e.png" alt="1.png" style="zoom:80%;" /><p>è¿™é‡Œæœ‰ä¸ª<code>GetHit</code>æ˜¯ç”¨æ¥åšæš´å‡»ä¼¤å®³å—ä¼¤æ•ˆæœçš„ï¼Œå®ƒæœ‰å·¦è¾¹çš„<code>Hit</code>è§¦å‘ï¼Œè€Œæˆ‘ä»¬çš„æ­»äº¡åŠ¨ç”»<code>Die</code>è¿ç€<code>Any State</code>è¡¨ç¤ºä»»ä½•çŠ¶æ€éƒ½èƒ½è½¬ç§»è¿‡æ¥ï¼Œç”±å¸ƒå°”å€¼<code>Death</code>æ§åˆ¶</p><p><strong>ç‰¹åˆ«è¦æ³¨æ„çš„åœ°æ–¹ï¼š</strong>å…³äºæ­»äº¡åŠ¨ç”»çš„è®¾ç½®<code>Can Transition To</code>ä¸€å®šä¸èƒ½å‹¾é€‰ï¼Œä¸ç„¶ä¼šå‘ç”Ÿé¬¼ç•œ</p><img src="https://p6-tt.byteimg.com/origin/pgc-image/497e554f53c24b17be551acb0694058c.png" alt="2.png" style="zoom:80%;" /><p>æ¥ä¸‹æ¥ä¸»è§’çš„åŠ¨ç”»ä¹Ÿæ˜¯å¦‚æ­¤è®¾ç½®</p><img src="https://p6-tt.byteimg.com/origin/pgc-image/66e702dd2c644d058b5e628fbcf052c6.png" alt="3.png" style="zoom:80%;" /><h2 id="ç¼–å†™åŠ¨ç”»çŠ¶æ€è½¬ç§»ä»£ç "><a href="#ç¼–å†™åŠ¨ç”»çŠ¶æ€è½¬ç§»ä»£ç " class="headerlink" title="ç¼–å†™åŠ¨ç”»çŠ¶æ€è½¬ç§»ä»£ç "></a>ç¼–å†™åŠ¨ç”»çŠ¶æ€è½¬ç§»ä»£ç </h2><p>å›åˆ°æˆ‘ä»¬çš„<code>EnemyController.cs</code>ä¸­</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">private</span> <span class="token class-name">Collider</span> collider<span class="token punctuation">;</span><span class="token comment">//ç¢°æ’ä½“ç»„ä»¶</span><span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">bool</span></span> isDead<span class="token punctuation">;</span><span class="token comment">//æ­»äº¡çŠ¶æ€æ§åˆ¶</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//...</span>    collider <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Collider<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>charcterStates<span class="token punctuation">.</span>currentHealth <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        isDead <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">//è¡€é‡å˜0åˆ™æ­»äº¡çŠ¶æ€ä¸ºçœŸ</span>    <span class="token comment">//...</span><span class="token punctuation">&#125;</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SwitchAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//...</span>    anim<span class="token punctuation">.</span><span class="token function">SetBool</span><span class="token punctuation">(</span><span class="token string">"Death"</span><span class="token punctuation">,</span>isDead<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ˜¯å¦æ’­æ”¾æ­»äº¡åŠ¨ç”»</span><span class="token punctuation">&#125;</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SwitchEnemyStates</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//ç¬¬ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦ä¸ºæ­»äº¡</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>isDead<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        enemyStates <span class="token operator">=</span> EnemyStates<span class="token punctuation">.</span>DEAD<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">FoundPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//å¦‚æœå‘ç°player åˆ‡æ¢åˆ°CHASE</span>        enemyStates <span class="token operator">=</span> EnemyStates<span class="token punctuation">.</span>CHASE<span class="token punctuation">;</span>        <span class="token comment">//Debug.LogFormat("æ•Œäºº&#123;0&#125;å‘ç°äº†ç©å®¶",this.name);//æµ‹è¯•ä»£ç </span>    <span class="token punctuation">&#125;</span>            <span class="token keyword">case</span> EnemyStates<span class="token punctuation">.</span>DEAD<span class="token punctuation">:</span>    collider<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">//é˜²æ­¢æ—¶å€™å¼€ä¸šå†æ¬¡æ”»å‡»</span>    agent<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">//ç›´æ¥å…³é—­å¯¼èˆªç»„ä»¶</span>    <span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">,</span><span class="token number">2f</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é”€æ¯æ¸¸æˆå¯¹è±¡ï¼Œå»¶è¿Ÿä¸º2ç§’</span>    <span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæˆ‘ä»¬è®¾ç½®äº†<code>Death</code>çš„åŠ¨ç”»çŠ¶æ€ï¼Œæ³¨æ„å¼€å¤´<code>if(isDead)</code>çš„ä¸‹ä¸€ä¸ªæ˜¯<code>else if</code>ï¼Œè€Œ<code>Hit</code>çš„çŠ¶æ€å¯ä»¥å»åˆ°<code>CharcterStates.cs</code>ä¸­è®¾ç½®</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TakeDamage</span><span class="token punctuation">(</span><span class="token class-name">CharcterStates</span> attacker<span class="token punctuation">,</span><span class="token class-name">CharcterStates</span> defener<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//è®¡ç®—ä¼¤å®³æ•°å€¼</span>    <span class="token comment">//å½“å‰æ”»å‡»åŠ›å‡å»ç›®æ ‡çš„é˜²å¾¡åŠ›ï¼Œå¦‚æœé˜²å¾¡åŠ›è¿‡é«˜å°±æ˜¯0ä¼¤å®³</span>    <span class="token class-name"><span class="token keyword">int</span></span> damage <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>attacker<span class="token punctuation">.</span><span class="token function">CurrentDamage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>defener<span class="token punctuation">.</span>currentDefence<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    currentHealth <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>currentHealth<span class="token operator">-</span>damage<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¡€é‡ä¹Ÿæ˜¯æœ€å°å€¼é”åœ¨0</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>isCritical<span class="token punctuation">)</span><span class="token comment">//åˆ¤æ–­è¢«æ‰“è€…æ˜¯å¦å—åˆ°æš´å‡»å¹¶ä¸”æ’­æ”¾å—ä¼¤åŠ¨ç”»</span>        defener<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Animator<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetTrigger</span><span class="token punctuation">(</span><span class="token string">"Hit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//å°†æ¥è¦åšçš„äº‹æƒ…</span>    <span class="token comment">//TODO:è¡€é‡æ¡UI</span>    <span class="token comment">//TODO:æ‰“æ­»æ€ªååŠ ç»éªŒ</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ä¸­é—´æˆ‘ä»¬æ‰“äº†ä¸€è¡Œä»£ç ï¼Œç”¨æ¥è·å–è¢«æ‰“è€…çš„Animatorå¹¶è®¾ç½®åŠ¨ç”»<code>Hit</code>çŠ¶æ€ï¼Œè¿™æ ·å°±å¯ä»¥é›†ä¸­ç®¡ç†æš´å‡»å—ä¼¤åŠ¨ç”»äº†</p><p>æœ€åå¯¹äºä¸»è§’æˆ‘ä»¬ä¹Ÿç”¨ç›¸åŒçš„åŠæ³•æ¥å†™è¿™äº›ä»£ç å°±å¤§åŠŸå‘Šæˆäº†</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt; è¿™ä¸€ç« èŠ‚æˆ‘ä»¬æ¥åˆ¶ä½œæ•Œäººçš„å®ˆå«çŠ¶æ€å’Œæ­»äº¡çŠ¶æ€&lt;/p&gt;
&lt;h1 id=&quot;æ•Œäººçš„å®ˆå«çŠ¶æ€ï¼ˆGuardï¼‰&quot;&gt;&lt;a href=&quot;#æ•Œäººçš„å®ˆå«çŠ¶æ€ï¼ˆGuardï¼‰&quot; class=&quot;headerlink&quot; title=&quot;æ•Œäººçš„å®ˆå«çŠ¶æ€ï¼ˆGuardï¼‰&quot;&gt;&lt;/a&gt;æ•Œäººçš„å®ˆå«çŠ¶æ€ï¼ˆGuardï¼‰</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Unityç¬”è®°12-å®ç°æ”»å‡»æ•°å€¼è®¡ç®—</title>
    <link href="http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B012-%E5%AE%9E%E7%8E%B0%E6%94%BB%E5%87%BB%E6%95%B0%E5%80%BC%E8%AE%A1%E7%AE%97/"/>
    <id>http://sakura-pub.ltd/UnityNotes/Unity%E7%AC%94%E8%AE%B012-%E5%AE%9E%E7%8E%B0%E6%94%BB%E5%87%BB%E6%95%B0%E5%80%BC%E8%AE%A1%E7%AE%97/</id>
    <published>2021-07-18T01:29:45.000Z</published>
    <updated>2021-07-26T01:10:45.401Z</updated>
    
    <content type="html"><![CDATA[<p> è¿™ä¸€ç« èŠ‚ä¸­æˆ‘ä»¬æ¥å®ç°æ”»å‡»ä¼¤å®³çš„è®¡ç®—ï¼Œç»™äºˆäººç‰©æˆ–æ•ŒäººçœŸå®çš„æ”»å‡»ä¼¤å®³</p><h1 id="è¡¥å……äººç‰©æ”»å‡»åŠ¨ç”»"><a href="#è¡¥å……äººç‰©æ”»å‡»åŠ¨ç”»" class="headerlink" title="è¡¥å……äººç‰©æ”»å‡»åŠ¨ç”»"></a>è¡¥å……äººç‰©æ”»å‡»åŠ¨ç”»</h1><p>åœ¨ä¹‹å‰æˆ‘ä»¬è¦ç»™äººç‰©æ·»åŠ ä¸€ä¸‹æš´å‡»åŠ¨ç”»ï¼Œå’Œä¸Šä¸€ç« èŠ‚è®¾ç½®æ•ŒäººåŠ¨ç”»ç±»ä¼¼ï¼Œæ³¨æ„è¦è®¾ç½®åŠ¨ç”»åˆ‡æ¢æ•ˆæœ</p><img src="https://p6-tt.byteimg.com/origin/pgc-image/db2c7f3914614d4ea5ec93211e2b47a7.png" alt="1.png" style="zoom:80%;" /><p>æ‰“å¼€<code>PlayerController.cs</code>ï¼Œä¿®æ”¹ä¸€ä¸‹</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token return-type class-name">IEnumerator</span> <span class="token function">MoveToAttackTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    agent<span class="token punctuation">.</span>isStopped <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    transform<span class="token punctuation">.</span><span class="token function">LookAt</span><span class="token punctuation">(</span>attactTarget<span class="token punctuation">.</span>transform<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>Vector3<span class="token punctuation">.</span><span class="token function">Distance</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span>attactTarget<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token operator">></span>          charcterStates<span class="token punctuation">.</span>attackData<span class="token punctuation">.</span>attackRange<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//æ¯”è¾ƒäººç‰©å’Œæ•Œäººçš„è·ç¦»æ˜¯å¦å¤§äº0æ”»å‡»è·ç¦»ï¼ŒDistance()å¯ä»¥æ¯”è¾ƒä¸¤ä¸ªVector3è·ç¦»</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>agent<span class="token punctuation">.</span>destination <span class="token operator">=</span> attactTarget<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>        <span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    agent<span class="token punctuation">.</span>isStopped <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token comment">//æ”»å‡»åŠ¨ç”»å’ŒCDéƒ½åœ¨ä¸‹é¢</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>lastAttactTime<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//CDå†·å´å®Œæˆå¯æ‰§è¡Œæ”»å‡»</span>        animator<span class="token punctuation">.</span><span class="token function">SetBool</span><span class="token punctuation">(</span><span class="token string">"Critical"</span><span class="token punctuation">,</span>charcterStates<span class="token punctuation">.</span>isCritical<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¢åŠ äº†ä¼ é€’æ˜¯å¦æš´å‡»</span>        animator<span class="token punctuation">.</span><span class="token function">SetTrigger</span><span class="token punctuation">(</span><span class="token string">"Attack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ™®é€šæ”»å‡»</span>        lastAttactTime <span class="token operator">=</span> charcterStates<span class="token punctuation">.</span>attackData<span class="token punctuation">.</span>coolDown<span class="token punctuation">;</span><span class="token comment">//ä¿®æ”¹äº†è¿™é‡Œçš„CDæ—¶é—´</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæˆ‘ä»¬ä¿®æ”¹äº†ä¸¤ä¸ªåœ°æ–¹ï¼Œä¸€ä¸ªæ˜¯å¢åŠ äº†æš´å‡»åˆ¤æ–­ï¼Œå¦ä¸€ä¸ªæ˜¯ä¿®æ”¹äº†CDæ—¶é—´åˆ¤æ–­</p><h1 id="å¢åŠ æ”»å‡»æ•°å€¼è®¡ç®—"><a href="#å¢åŠ æ”»å‡»æ•°å€¼è®¡ç®—" class="headerlink" title="å¢åŠ æ”»å‡»æ•°å€¼è®¡ç®—"></a>å¢åŠ æ”»å‡»æ•°å€¼è®¡ç®—</h1><p>å‰é¢è¡¥å……å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥æ­£å¼æ¥å†™æ”»å‡»ä¼¤å®³çš„æ•°å€¼è®¡ç®—äº†</p><p>æ‰“å¼€<code>CharcterStates.cs</code>ï¼Œæˆ‘ä»¬åœ¨æœ€ä¸‹é¢åŠ ä¸Šæˆ‘ä»¬çš„ä¼¤å®³è®¡ç®—ä»£ç </p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">EventAttact</span><span class="token punctuation">(</span><span class="token class-name">GameObject</span> target<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//å¦‚æœé¼ æ ‡ç‚¹å‡»çš„ç›®æ ‡ä¸ä¸ºç©ºï¼Œæˆ–è€…ç‚¹å‡»çš„æ•Œäººä¸æ˜¯å±äºæ­»äº¡çŠ¶æ€</span>        attactTarget <span class="token operator">=</span> target<span class="token punctuation">;</span>        <span class="token comment">//éšæœºæš´å‡»ç‡è¯­å¥</span>        charcterStates<span class="token punctuation">.</span>isCritical <span class="token operator">=</span> Random<span class="token punctuation">.</span><span class="token keyword">value</span> <span class="token operator">&lt;</span> charcterStates<span class="token punctuation">.</span>attackData<span class="token punctuation">.</span>criticalChance<span class="token punctuation">;</span>        <span class="token function">StartCoroutine</span><span class="token punctuation">(</span><span class="token function">MoveToAttackTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//ä¼¤å®³è®¡ç®—åŒº</span><span class="token preprocessor property">#<span class="token directive keyword">region</span> Charcter Combat</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TakeDamage</span><span class="token punctuation">(</span><span class="token class-name">CharcterStates</span> attacker<span class="token punctuation">,</span><span class="token class-name">CharcterStates</span> defener<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//è®¡ç®—ä¼¤å®³æ•°å€¼</span>    <span class="token comment">//å½“å‰æ”»å‡»åŠ›å‡å»ç›®æ ‡çš„é˜²å¾¡åŠ›ï¼Œå¦‚æœé˜²å¾¡åŠ›è¿‡é«˜å°±æ˜¯0ä¼¤å®³</span>    <span class="token class-name"><span class="token keyword">int</span></span> damage <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>attacker<span class="token punctuation">.</span><span class="token function">CurrentDamage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>defener<span class="token punctuation">.</span>currentDefence<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    currentHealth <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>currentHealth<span class="token operator">-</span>damage<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¡€é‡ä¹Ÿæ˜¯æœ€å°å€¼é”åœ¨0</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>attacker<span class="token punctuation">.</span>isCritical<span class="token punctuation">)</span><span class="token comment">//åˆ¤æ–­è¢«æ‰“è€…æ˜¯å¦å—åˆ°æš´å‡»å¹¶ä¸”æ’­æ”¾å—ä¼¤åŠ¨ç”»</span>            defener<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Animator<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetTrigger</span><span class="token punctuation">(</span><span class="token string">"Hit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å°†æ¥è¦åšçš„äº‹æƒ…</span>    <span class="token comment">//TODO:è¡€é‡æ¡UI</span>    <span class="token comment">//TODO:æ‰“æ­»æ€ªååŠ ç»éªŒ</span><span class="token punctuation">&#125;</span><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">CurrentDamage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//åœ¨æ”»å‡»åŠ›èŒƒå›´å†…å–éšæœºæ•°è¿”å›ä¸€ä¸ªéšæœºæ”»å‡»åŠ›</span>    <span class="token class-name"><span class="token keyword">float</span></span> coreDamage <span class="token operator">=</span> Random<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span>attackData<span class="token punctuation">.</span>minDamage<span class="token punctuation">,</span>attackData<span class="token punctuation">.</span>maxDamage<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>isCritical<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//å¦‚æœæš´å‡»çš„è¯è¿˜è¦è®¡ç®—ä¸Šæš´å‡»ç‡</span>        coreDamage <span class="token operator">*=</span>attackData<span class="token punctuation">.</span>criticalMultiplier<span class="token punctuation">;</span><span class="token comment">//ä¹˜ç­‰äº</span>        Debug<span class="token punctuation">.</span><span class="token function">LogFormat</span><span class="token punctuation">(</span><span class="token string">"æš´å‡»äº†ï¼ä¼¤å®³ä¸ºï¼ˆä¸ç®—ç›®æ ‡é˜²å¾¡åŠ›ï¼‰ï¼š&#123;0&#125;"</span><span class="token punctuation">,</span>coreDamage<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>coreDamage<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="è°ƒç”¨ä¼¤å®³è®¡ç®—æ–¹æ³•"><a href="#è°ƒç”¨ä¼¤å®³è®¡ç®—æ–¹æ³•" class="headerlink" title="è°ƒç”¨ä¼¤å®³è®¡ç®—æ–¹æ³•"></a>è°ƒç”¨ä¼¤å®³è®¡ç®—æ–¹æ³•</h1><p>ä¼¤å®³è®¡ç®—ä»£ç å†™å¥½åï¼Œæˆ‘ä»¬å°±è¦å»æƒ³å¦‚ä½•è°ƒç”¨å®ƒï¼Œåœ¨å“ªé‡Œè°ƒç”¨å®ƒäº†</p><p>å‚è€ƒä¸€äº›RPGæ¸¸æˆï¼Œä¸€èˆ¬éƒ½æ˜¯å½“ä½ çš„æ­¦å™¨æŒ¥å‡ºå»åæ¥è§¦åˆ°æ•Œäººé‚£ä¸€ç¬é—´è®¡ç®—ä¼¤å®³ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‰ç…§è¿™æ ·æ¥åš</p><h2 id="åœ¨äººç‰©èº«ä¸Šè°ƒç”¨"><a href="#åœ¨äººç‰©èº«ä¸Šè°ƒç”¨" class="headerlink" title="åœ¨äººç‰©èº«ä¸Šè°ƒç”¨"></a>åœ¨äººç‰©èº«ä¸Šè°ƒç”¨</h2><p>é¦–å…ˆè¦è°ƒå‡º<code>Animation</code>çª—å£</p><img src="https://p26-tt.byteimg.com/origin/pgc-image/42623310028b4fbcafc6c49ce9fbc6a6.png" alt="2.png" style="zoom:80%;" /><p>ç„¶åçª—å£å·¦ä¸Šè§’é€‰æ‹©ä¸Šæˆ‘ä»¬çš„æ”»å‡»åŠ¨ç”»<code>Attack01</code>ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ”»å‡»åŠ¨ç”»é‡Œé¢çš„æŸä¸ªç‰¹å®šå¸§æ·»åŠ äº‹ä»¶äº†</p><p>æˆ‘ä»¬å†æ¬¡ç¼–è¾‘ä¸€ä¸‹<code>PlayerController.cs</code>ä»£ç åŠ ä¸€ä¸ªç”¨æ¥è°ƒç”¨çš„æ–¹æ³•</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//Animation Event</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Hit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name"><span class="token keyword">var</span></span> targetStates <span class="token operator">=</span> attactTarget<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CharcterStates<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//è®¡ç®—ä¼¤å®³</span>    targetStates<span class="token punctuation">.</span><span class="token function">TakeDamage</span><span class="token punctuation">(</span>charcterStates<span class="token punctuation">,</span>targetStates<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å›åˆ°<code>Animation</code>çª—å£ï¼Œå°†å®ƒæ·»åŠ ä¸ºäº‹ä»¶</p><img src="https://p5-tt.byteimg.com/origin/pgc-image/3ebdba5a85864a339407b9a8d21a740f.png" alt="4.png" style="zoom:80%;" /><p><strong>æ³¨æ„ï¼šåŒæ ·çš„æš´å‡»åŠ¨ç”»ä¹Ÿè¦åŠ ä¸Š</strong></p><h2 id="åœ¨æ•Œäººèº«ä¸Šè°ƒç”¨"><a href="#åœ¨æ•Œäººèº«ä¸Šè°ƒç”¨" class="headerlink" title="åœ¨æ•Œäººèº«ä¸Šè°ƒç”¨"></a>åœ¨æ•Œäººèº«ä¸Šè°ƒç”¨</h2><p>ç„¶ååœ¨æ•Œäººèº«ä¸Šæˆ‘ä»¬ä¹Ÿè¦è¿›è¡ŒåŒæ ·çš„æ“ä½œï¼Œæ‰“å¼€<code>EnemyController.cs</code></p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">//EnemyController.cs</span><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Hit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//ç”±äºåœ¨æ•Œäººè¿½ä¸»è§’çš„è¿‡ç¨‹ä¸­ä¸»è§’å¯èƒ½ä¼šè·‘å¼€ï¼Œè¿™æ—¶å€™å¦‚æœæ”»å‡»çš„è¯ç›®æ ‡å°±ä¸¢å¤±äº†</span>    <span class="token comment">//æ‰€ä»¥æˆ‘ä»¬åœ¨æ”»å‡»å‰åˆ¤æ–­ç›®æ ‡æ˜¯å¦ä¸ºç©ºï¼Œä»¥é˜²æŠ¥é”™</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>attackTarget <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name"><span class="token keyword">var</span></span> targetStates <span class="token operator">=</span> attackTarget<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CharcterStates<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        targetStates<span class="token punctuation">.</span><span class="token function">TakeDamage</span><span class="token punctuation">(</span>charcterStates<span class="token punctuation">,</span>targetStates<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶ååœ¨ä¸º<code>Animation</code>æ·»åŠ åŠ¨ç”»æ—¶æˆ‘ä»¬å‘ç°å½“å‰å²è±å§†çš„åŠ¨ç”»æ˜¯<code>åªè¯»</code>å±æ€§çš„ï¼Œå¯¹äºè¿™ç§æƒ…å†µæˆ‘ä»¬å¯ä»¥æŠŠåŠ¨ç”»å•ç‹¬å¤åˆ¶åˆ°å…¶å®ƒåœ°æ–¹ï¼Œå†å°†å¤åˆ¶å‡ºæ¥çš„åŠ¨ç”»æ›¿æ¢åŸæ¥çš„ï¼Œå°±å¯ä»¥è¿›è¡Œäº‹ä»¶æ·»åŠ äº†</p><p>å¦‚å›¾å¯¹ç€åŠ¨ç”»æ–‡ä»¶æŒ‰<code>Ctrl+D</code>å¯ä»¥å¿«é€Ÿå¤åˆ¶</p><img src="https://p9-tt.byteimg.com/origin/pgc-image/3831ed71b8dc46cc8d7ce464438e15b3.png" alt="5.png" style="zoom:80%;" /><p>ç„¶åæˆ‘ä»¬å°†å¤åˆ¶å‡ºæ¥çš„åŠ¨ç”»ï¼ˆè¿™é‡Œæœ‰ä¸¤ä¸ªï¼‰åˆ†ç±»æ”¾å¥½</p><img src="https://p26-tt.byteimg.com/origin/pgc-image/cded851a377744a2a2c53f78e2573698.png" alt="6.png" style="zoom:80%;" /><p>ç„¶åè¿›è¡ŒåŠ¨ç”»æ›¿æ¢</p><img src="https://p26-tt.byteimg.com/origin/pgc-image/99667e3e7b754c4f8b286410045bac15.png" alt="7.png" style="zoom:80%;" /><p>æœ€åå†è¿›è¡ŒåŠ¨ç”»å¸§äº‹ä»¶æ·»åŠ æ“ä½œå°±è¡Œäº†</p><p>åˆ°è¿™æˆ‘ä»¬å°±æŠŠä¼¤å®³è®¡ç®—ä»£ç å’Œæ•ˆæœéƒ½å†™å‡ºæ¥äº†ï¼Œä¸‹ä¸€ç« èŠ‚ä¸­æˆ‘ä»¬è¿˜ä¼šå»è¡¥å……å¦‚æœæ•Œäººæˆ–äººç‰©è¡€é‡åˆ°0äº†æ—¶å€™çš„çŠ¶æ€</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt; è¿™ä¸€ç« èŠ‚ä¸­æˆ‘ä»¬æ¥å®ç°æ”»å‡»ä¼¤å®³çš„è®¡ç®—ï¼Œç»™äºˆäººç‰©æˆ–æ•ŒäººçœŸå®çš„æ”»å‡»ä¼¤å®³&lt;/p&gt;
&lt;h1 id=&quot;è¡¥å……äººç‰©æ”»å‡»åŠ¨ç”»&quot;&gt;&lt;a href=&quot;#è¡¥å……äººç‰©æ”»å‡»åŠ¨ç”»&quot; class=&quot;headerlink&quot; title=&quot;è¡¥å……äººç‰©æ”»å‡»åŠ¨ç”»&quot;&gt;&lt;/a&gt;è¡¥å……äººç‰©æ”»å‡»åŠ¨ç”»&lt;/h1&gt;&lt;p&gt;åœ¨ä¹‹å‰æˆ‘ä»¬</summary>
      
    
    
    
    <category term="Unityå­¦ä¹ ç¬”è®°" scheme="http://sakura-pub.ltd/categories/Unity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Unity" scheme="http://sakura-pub.ltd/tags/Unity/"/>
    
  </entry>
  
</feed>
